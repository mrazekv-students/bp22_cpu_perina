(function(t){function e(e){for(var n,i,s=e[0],o=e[1],u=e[2],h=0,d=[];h<s.length;h++)i=s[h],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);l&&l(e);while(d.length)d.shift()();return c.push.apply(c,u||[]),a()}function a(){for(var t,e=0;e<c.length;e++){for(var a=c[e],n=!0,s=1;s<a.length;s++){var o=a[s];0!==r[o]&&(n=!1)}n&&(c.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},r={app:0},c=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=o;c.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"2a59":function(t,e,a){},"3a5b":function(t,e,a){"use strict";a("44fc")},"44fc":function(t,e,a){},"4f95":function(t,e,a){},"50c4b":function(t,e,a){"use strict";a("2a59")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("7a23");function r(t,e,a,r,c,i){var s=Object(n["k"])("the-processor");return Object(n["i"])(),Object(n["c"])(s,{style:{width:"100%",height:"100%"}})}var c={class:"horizontal-container"},i={class:"vertical-container control-container"},s={class:"horizontal-container button-container"},o={class:"program-container"},u={class:"vertical-container model-container"};function l(t,e,a,r,l,h){var d=Object(n["k"])("common-button"),m=Object(n["k"])("code-editor"),b=Object(n["k"])("tabs-container");return Object(n["i"])(),Object(n["d"])("div",c,[Object(n["e"])("div",i,[Object(n["e"])("div",s,[(Object(n["i"])(!0),Object(n["d"])(n["a"],null,Object(n["j"])(l.commonButtons,(function(t){return Object(n["i"])(),Object(n["c"])(d,{key:t,displayValue:t.display,function:t.function,disabled:t.disabled,class:"control-button"},null,8,["displayValue","function","disabled"])})),128))]),Object(n["e"])("div",o,[Object(n["f"])(m,{onRegisterCompiler:h.RegisterCompiler},null,8,["onRegisterCompiler"])])]),Object(n["e"])("div",u,[Object(n["f"])(b,{onRegisterMemory:h.RegisterMemory,instruction:l.instruction.instruction},null,8,["onRegisterMemory","instruction"])])])}var h=a("1da1"),d=(a("d3b7"),a("96cf"),["disabled"]);function m(t,e,a,r,c,i){return Object(n["i"])(),Object(n["d"])("button",{class:"common-button",disabled:a.disabled,onClick:e[0]||(e[0]=function(){return i.Click&&i.Click.apply(i,arguments)})},Object(n["m"])(a.displayValue),9,d)}var b={name:"CommonButton",props:{displayValue:{type:String,required:!0},function:{type:Function,required:!0},disabled:{type:Boolean,default:!1}},methods:{Click:function(){this.function()}}},f=(a("50c4b"),a("6b0d")),O=a.n(f);const v=O()(b,[["render",m]]);var D=v;function g(t,e,a,r,c,i){var s=Object(n["k"])("prism-editor");return Object(n["i"])(),Object(n["c"])(s,{class:"code-editor",modelValue:c.code,"onUpdate:modelValue":e[0]||(e[0]=function(t){return c.code=t}),highlight:i.HighlightCode,"line-numbers":""},null,8,["modelValue","highlight"])}var p=a("e57a"),j=(a("cabf"),a("8c7a")),y=a.n(j),R=(a("5792"),a("ac1f"),a("1276"),a("2ca0"),a("8a79"),a("b0c0"),a("fb6a"),a("159b"),a("b64b"),a("d4ec")),C=a("ade3"),k=function t(e){Object(R["a"])(this,t),this.name=e};Object(C["a"])(k,"HALT",new k("HALT")),Object(C["a"])(k,"NEGATE",new k("NEGATE")),Object(C["a"])(k,"ACCDEC",new k("ACCDEC")),Object(C["a"])(k,"ACCINC",new k("ACCINC")),Object(C["a"])(k,"NOP",new k("NOP")),Object(C["a"])(k,"OUTP",new k("OUTP")),Object(C["a"])(k,"INP",new k("INP")),Object(C["a"])(k,"MLOAD",new k("MLOAD")),Object(C["a"])(k,"DLOAD",new k("DLOAD")),Object(C["a"])(k,"ILOAD",new k("ILOAD")),Object(C["a"])(k,"DSTORE",new k("DSTORE")),Object(C["a"])(k,"ISTORE",new k("ISTORE")),Object(C["a"])(k,"BRANCH",new k("BRANCH")),Object(C["a"])(k,"BRZERO",new k("BRZERO")),Object(C["a"])(k,"BRPOS",new k("BRPOS")),Object(C["a"])(k,"BRNEG",new k("BRNEG")),Object(C["a"])(k,"MADD",new k("MADD")),Object(C["a"])(k,"IJUMP",new k("IJUMP")),Object(C["a"])(k,"LABEL",new k("LABEL"));var M=0;function x(t,e){var a=t.split("\n");M=0;while(a.length>0){var n=a.shift().split(/\s+/);while(n.length>0)I(n,e)}e.push({instruction:"END"})}function I(t,e){var a=t.shift();if(a.startsWith(";"))t.length=0;else if(a.endsWith(":"))P(k.LABEL.name,a.slice(0,-1),e);else switch(a.toUpperCase()){case k.HALT.name:E(k.HALT.name,e);break;case k.NEGATE.name:E(k.NEGATE.name,e);break;case k.ACCDEC.name:E(k.ACCDEC.name,e);break;case k.ACCINC.name:E(k.ACCINC.name,e);break;case k.NOP.name:E(k.NOP.name,e);break;case k.OUTP.name:E(k.OUTP.name,e);break;case k.INP.name:E(k.INP.name,e);break;case k.MLOAD.name:A(k.MLOAD.name,t.shift(),e);break;case k.DLOAD.name:w(k.DLOAD.name,t.shift(),e);break;case k.ILOAD.name:w(k.ILOAD.name,t.shift(),e);break;case k.DSTORE.name:w(k.DSTORE.name,t.shift(),e);break;case k.ISTORE.name:w(k.ISTORE.name,t.shift(),e);break;case k.BRANCH.name:P(k.BRANCH.name,t.shift(),e);break;case k.BRZERO.name:P(k.BRZERO.name,t.shift(),e);break;case k.BRPOS.name:P(k.BRPOS.name,t.shift(),e);break;case k.BRNEG.name:P(k.BRNEG.name,t.shift(),e);break;case k.MADD.name:w(k.MADD.name,t.shift(),e);break;case k.IJUMP.name:w(k.IJUMP.name,t.shift(),e);break;case"":break;default:throw Error("Unknown instruction at "+M)}}function E(t,e){M++,e.push({instruction:t})}function w(t,e,a){if(M++,!S(e))throw Error("Incorrect parameter format at instruction "+M+" ("+t+")");e=parseInt(e.substring(1)),a.push({instruction:t,address:e})}function A(t,e,a){if(M++,!T(e))throw Error("Incorrect parameter format at instruction "+M+" ("+t+")");e=parseInt(e),a.push({instruction:t,value:e})}function P(t,e,a){if(M++,N(e))throw Error("Label must not be keyword at instruction "+M+" ("+t+")");a.push({instruction:t,label:e})}function S(t){var e=t.startsWith("@");return e&&(t=t.substring(1),e=T(t)),e}function N(t){var e=!1;return Object.keys(k).forEach((function(a){a===t.toUpperCase()&&(e=!0)})),e}function T(t){return/^-?\d+$/.test(t)}var B={name:"CodeEditor",components:{PrismEditor:p["a"]},emits:["RegisterCompiler"],data:function(){return{code:"",instructionList:[],labelDict:{}}},created:function(){this.$emit("RegisterCompiler",{compile:this.CompileProgram,getInstruction:this.GetInstruction,getLabel:this.GetLabel})},methods:{HighlightCode:function(t){return y.a.languages.bp22={operator:/\b(?:HALT|NEGATE|ACCDEC|ACCINC|NOP|OUTP|INP|MLOAD|DLOAD|ILOAD|DSTORE|ISTORE|BRANCH|BRZERO|BRPOS|BRNEG|MADD|IJUMP|LABEL)\b/i},y.a.highlight(t,y.a.languages.bp22)},CompileProgram:function(){this.instructionList=[],this.labelDict={};try{x(this.code,this.instructionList)}catch(e){throw console.error(e),e}for(var t in this.instructionList)"LABEL"==this.instructionList[t].instruction&&(this.labelDict[this.instructionList[t].label]=parseInt(t));console.log(this.instructionList),console.log(this.labelDict)},GetInstruction:function(t){if(t<this.instructionList.length)return this.instructionList[t];throw RangeError("Invalid instruction address")},GetLabel:function(t){if(t in this.labelDict)return this.labelDict[t];throw RangeError("No such label")}}};a("951f");const L=O()(B,[["render",g]]);var _=L,U={class:"horizontal-container"};function H(t,e,a,r,c,i){var s=Object(n["k"])("common-button");return Object(n["i"])(),Object(n["d"])(n["a"],null,[Object(n["e"])("div",U,[Object(n["f"])(s,{displayValue:"RAM-Only Memory",function:function(){return i.ChangeCurrentTab("RamOnlyMemory")}},null,8,["function"]),Object(n["f"])(s,{displayValue:"Direct Cache",function:function(){return i.ChangeCurrentTab("DirectCacheMemory")}},null,8,["function"]),Object(n["f"])(s,{displayValue:"Two-Way Cache",function:function(){return i.ChangeCurrentTab("TwoWayCacheMemory")}},null,8,["function"]),Object(n["f"])(s,{displayValue:"Full Cache",function:function(){return i.ChangeCurrentTab("FullCacheMemory")}},null,8,["function"])]),(Object(n["i"])(),Object(n["c"])(Object(n["l"])(c.currentTab),{onRegisterMemory:i.RegisterMemory,instruction:a.instruction},null,8,["onRegisterMemory","instruction"]))],64)}function G(t,e,a,r,c,i){var s=Object(n["k"])("processor-model"),o=Object(n["k"])("ram-model");return Object(n["i"])(),Object(n["d"])(n["a"],null,[Object(n["f"])(s,{currentInstruction:a.instruction},null,8,["currentInstruction"]),Object(n["f"])(o,{data:c.ramData},null,8,["data"])],64)}var W={class:"vertical-container processor"},F=Object(n["e"])("div",null,"CPU",-1);function V(t,e,a,r,c,i){return Object(n["i"])(),Object(n["d"])("div",W,[F,Object(n["e"])("div",null,"[ "+Object(n["m"])(a.currentInstruction)+" ]",1)])}var J={name:"ProcessorModel",props:{currentInstruction:{type:String,default:""}}};a("d529");const $=O()(J,[["render",V]]);var z=$,Z=(a("25f0"),{class:"ram"}),q={class:"ram-address"},K={class:"ram-value"};function Q(t,e,a,r,c,i){return Object(n["i"])(),Object(n["d"])("table",Z,[(Object(n["i"])(!0),Object(n["d"])(n["a"],null,Object(n["j"])(a.data.length,(function(t){return Object(n["i"])(),Object(n["d"])("tr",{key:t},[Object(n["e"])("td",q,Object(n["m"])("0x"+(t-1).toString(16).toUpperCase()),1),Object(n["e"])("td",K,Object(n["m"])(a.data[t-1]),1)])})),128))])}var X={name:"RamModel",props:{data:{type:Array,required:!0}}};a("597e");const Y=O()(X,[["render",Q]]);var tt=Y,et={name:"RamOnlyMemory",components:{ProcessorModel:z,RamModel:tt},emits:["RegisterMemory"],props:{instruction:{type:String}},data:function(){return{ramData:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},created:function(){this.Reset(),this.$emit("RegisterMemory",{write:this.Write,read:this.Read,flush:function(){},reset:this.Reset})},methods:{Write:function(t,e){if(!(t<this.ramData.length&&t>=0))throw RangeError("Invalid memory address");this.ramData[t]=e},Read:function(t){if(t<this.ramData.length&&t>=0)return this.ramData[t];throw RangeError("Invalid memory address")},Reset:function(){this.ramData=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}};const at=O()(et,[["render",G]]);var nt=at;function rt(t,e,a,r,c,i){var s=Object(n["k"])("processor-model"),o=Object(n["k"])("cache-model"),u=Object(n["k"])("ram-model");return Object(n["i"])(),Object(n["d"])(n["a"],null,[Object(n["f"])(s,{currentInstruction:a.instruction},null,8,["currentInstruction"]),Object(n["f"])(o,{data:c.cacheData},null,8,["data"]),Object(n["f"])(u,{data:c.ramData},null,8,["data"])],64)}var ct={class:"cache"},it={class:"cache-address"},st={class:"cache-valid"},ot={class:"cache-tag"},ut={class:"cache-value"};function lt(t,e,a,r,c,i){return Object(n["i"])(),Object(n["d"])("table",ct,[(Object(n["i"])(!0),Object(n["d"])(n["a"],null,Object(n["j"])(a.data.length,(function(t){return Object(n["i"])(),Object(n["d"])("tr",{key:t},[Object(n["e"])("td",it,Object(n["m"])("0x"+(t-1).toString(16).toUpperCase()),1),Object(n["e"])("td",st,Object(n["m"])(a.data[t-1].valid?"T":"F"),1),Object(n["e"])("td",ot,Object(n["m"])("0x"+a.data[t-1].tag.toString(16).toUpperCase()),1),Object(n["e"])("td",ut,Object(n["m"])(a.data[t-1].data),1)])})),128))])}var ht={name:"CacheModel",props:{data:{type:Array,required:!0}}};a("72ab");const dt=O()(ht,[["render",lt]]);var mt=dt;function bt(t,e){return{valid:!0,tag:t,data:e}}function ft(t,e,a){return e<<a|t}function Ot(t,e){return{valid:!1,tag:t,data:e}}var vt={name:"DirectCacheMemory",components:{ProcessorModel:z,RamModel:tt,CacheModel:mt},emits:["RegisterMemory"],props:{instruction:{type:String}},data:function(){return{ramData:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],cacheData:[{valid:!0,tag:0,data:0},{valid:!0,tag:0,data:0},{valid:!0,tag:0,data:0},{valid:!0,tag:0,data:0}]}},created:function(){this.Reset(),this.$emit("RegisterMemory",{write:this.Write,read:this.Read,flush:this.Flush,reset:this.Reset})},methods:{Write:function(t,e){if(t>this.ramData.length||t<0)throw RangeError("Invalid memory address");var a=3&t,n=(12&t)>>2;if(this.cacheData[a].tag==n)this.cacheData[a]=Ot(n,e);else if(this.cacheData[a].valid)this.cacheData[a]=bt(n,this.ramData[t]),this.cacheData[a]=Ot(n,e);else{var r=ft(a,this.cacheData[a].tag,2);this.ramData[r]=this.cacheData[a].data,this.cacheData[a]=bt(n,this.ramData[t]),this.cacheData[a]=Ot(n,e)}},Read:function(t){if(t>this.ramData.length||t<0)throw RangeError("Invalid memory address");var e=3&t,a=(12&t)>>2;if(this.cacheData[e].tag==a)return this.cacheData[e].data;if(this.cacheData[e].valid)return this.cacheData[e]=bt(a,this.ramData[t]),this.cacheData[e].data;var n=ft(e,this.cacheData[e].tag,2);return this.ramData[n]=this.cacheData[e].data,this.cacheData[e]=bt(a,this.ramData[t]),this.cacheData[e].data},Flush:function(){for(var t=0;t<this.cacheData.length;t++){var e=ft(t,this.cacheData[t].tag,2);this.ramData[e]=this.cacheData[t].data,this.cacheData[t].valid=!0}},Reset:function(){this.ramData=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.cacheData=[{valid:!0,tag:0,data:0},{valid:!0,tag:0,data:0},{valid:!0,tag:0,data:0},{valid:!0,tag:0,data:0}]}}};const Dt=O()(vt,[["render",rt]]);var gt=Dt,pt={class:"horizontal-container"};function jt(t,e,a,r,c,i){var s=Object(n["k"])("processor-model"),o=Object(n["k"])("cache-model"),u=Object(n["k"])("ram-model");return Object(n["i"])(),Object(n["d"])(n["a"],null,[Object(n["f"])(s,{currentInstruction:a.instruction},null,8,["currentInstruction"]),Object(n["e"])("div",pt,[Object(n["f"])(o,{data:c.cacheData[0]},null,8,["data"]),Object(n["f"])(o,{data:c.cacheData[1]},null,8,["data"])]),Object(n["f"])(u,{data:c.ramData},null,8,["data"])],64)}var yt={name:"TwoWayCacheMemory",components:{ProcessorModel:z,CacheModel:mt,RamModel:tt},emits:["RegisterMemory"],props:{instruction:{type:String}},data:function(){return{ramData:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],cacheData:[[{valid:!0,tag:0,data:0},{valid:!0,tag:0,data:0}],[{valid:!0,tag:0,data:0},{valid:!0,tag:0,data:0}]]}},created:function(){this.Reset(),this.$emit("RegisterMemory",{write:this.Write,read:this.Read,flush:this.Flush,reset:this.Reset})},methods:{Write:function(t,e){if(t>this.ramData.length||t<0)throw RangeError("Invalid memory address");for(var a=1&t,n=(14&t)>>1,r=0;r<this.cacheData.length;r++)if(this.cacheData[r][a].tag==n)return void(this.cacheData[r][a]=Ot(n,e));var c=Math.random()<.5?0:1;if(this.cacheData[c][a].valid)this.cacheData[c][a]=bt(n,this.ramData[t]),this.cacheData[c][a]=Ot(n,e);else{var i=ft(a,this.cacheData[c][a].tag,1);this.ramData[i]=this.cacheData[c][a].data,this.cacheData[c][a]=bt(n,this.ramData[t]),this.cacheData[c][a]=Ot(n,e)}},Read:function(t){if(t>this.ramData.length||t<0)throw RangeError("Invalid memory address");for(var e=1&t,a=(14&t)>>1,n=0;n<this.cacheData.length;n++)if(this.cacheData[n][e].tag==a)return this.cacheData[n][e].data;var r=Math.random()<.5?0:1;if(this.cacheData[r][e].valid)return this.cacheData[r][e]=bt(a,this.ramData[t]),this.cacheData[r][e].data;var c=ft(e,this.cacheData[r][e].tag,1);return this.ramData[c]=this.cacheData[r][e].data,this.cacheData[r][e]=bt(a,this.ramData[t]),this.cacheData[r][e].data},Flush:function(){for(var t=0;t<this.cacheData.length;t++)for(var e=0;e<this.cacheData[t].length;e++){var a=ft(e,this.cacheData[t][e].tag,1);this.ramData[a]=this.cacheData[t][e].data,this.cacheData[t][e].valid=!0}},Reset:function(){this.ramData=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.cacheData=[[{valid:!0,tag:0,data:0},{valid:!0,tag:0,data:0}],[{valid:!0,tag:0,data:0},{valid:!0,tag:0,data:0}]]}}};const Rt=O()(yt,[["render",jt]]);var Ct=Rt;function kt(t,e,a,r,c,i){var s=Object(n["k"])("processor-model"),o=Object(n["k"])("cache-model"),u=Object(n["k"])("ram-model");return Object(n["i"])(),Object(n["d"])(n["a"],null,[Object(n["f"])(s,{currentInstruction:a.instruction},null,8,["currentInstruction"]),Object(n["f"])(o,{data:c.cacheData},null,8,["data"]),Object(n["f"])(u,{data:c.ramData},null,8,["data"])],64)}var Mt={name:"FullCacheMemory",components:{ProcessorModel:z,CacheModel:mt,RamModel:tt},emits:["RegisterMemory"],props:{instruction:{type:String}},data:function(){return{ramData:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],cacheData:[{valid:!0,tag:0,data:0},{valid:!0,tag:0,data:0},{valid:!0,tag:0,data:0},{valid:!0,tag:0,data:0}]}},created:function(){this.Reset(),this.$emit("RegisterMemory",{write:this.Write,read:this.Read,flush:this.Flush,reset:this.Reset})},methods:{Write:function(t,e){if(t>this.ramData.length||t<0)throw RangeError("Invalid memory address");for(var a=0;a<this.cacheData.length;a++)if(this.cacheData[a].tag==t)return void(this.cacheData[a]=Ot(t,e));var n=Math.floor(4*Math.random());this.cacheData[n].valid?(this.cacheData[n]=bt(t,this.ramData[t]),this.cacheData[n]=Ot(t,e)):(this.ramData[this.cacheData[n].tag]=this.cacheData[n].data,this.cacheData[n]=bt(t,this.ramData[t]),this.cacheData[n]=Ot(t,e))},Read:function(t){if(t>this.ramData.length||t<0)throw RangeError("Invalid memory address");for(var e=0;e<this.cacheData.length;e++)if(this.cacheData[e].tag==t)return this.cacheData[e].data;var a=Math.floor(4*Math.random());return this.cacheData[a].valid?(this.cacheData[a]=bt(t,this.ramData[t]),this.cacheData[a].data):(this.ramData[this.cacheData[a].tag]=this.cacheData[a].data,this.cacheData[a]=bt(t,this.ramData[t]),this.cacheData[a].data)},Flush:function(){for(var t=0;t<this.cacheData.length;t++)this.ramData[this.cacheData[t].tag]=this.cacheData[t].data,this.cacheData[t].valid=!0},Reset:function(){this.ramData=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.cacheData=[{valid:!0,tag:0,data:0},{valid:!0,tag:0,data:0},{valid:!0,tag:0,data:0},{valid:!0,tag:0,data:0}]}}};const xt=O()(Mt,[["render",kt]]);var It=xt,Et={name:"TabsContainer",components:{CommonButton:D,RamOnlyMemory:nt,DirectCacheMemory:gt,TwoWayCacheMemory:Ct,FullCacheMemory:It},emits:["RegisterMemory"],props:{instruction:{type:String}},data:function(){return{currentTab:"RamOnlyMemory"}},methods:{ChangeCurrentTab:function(t){this.currentTab=t},RegisterMemory:function(t){this.$emit("RegisterMemory",t)}}};const wt=O()(Et,[["render",H]]);var At=wt,Pt=a("bee2"),St=function t(e){Object(R["a"])(this,t),this.name=e};Object(C["a"])(St,"NextInstruction",new St("NextInstruction")),Object(C["a"])(St,"HaltExecution",new St("HaltExecution")),Object(C["a"])(St,"EndExecution",new St("EndExecution")),Object(C["a"])(St,"MoveToLabel",new St("MoveToLabel")),Object(C["a"])(St,"MoveToAddress",new St("MoveToAddress"));var Nt=function(){function t(e,a){Object(R["a"])(this,t),this.memory=e,this.acc=a}return Object(Pt["a"])(t,[{key:"execute",value:function(t){var e;switch(t.instruction){case k.HALT.name:e=this._executeHalt();break;case k.NEGATE.name:e=this._executeNegate();break;case k.ACCDEC.name:e=this._executeAccdec();break;case k.ACCINC.name:e=this._executeAccinc();break;case k.NOP.name:e=this._executeNop();break;case k.OUTP.name:e=this._executeOutp();break;case k.INP.name:e=this._executeInp();break;case k.MLOAD.name:e=this._executeMload(t.value);break;case k.DLOAD.name:e=this._executeDload(t.address);break;case k.ILOAD.name:e=this._executeIload(t.address);break;case k.DSTORE.name:e=this._executeDstore(t.address);break;case k.ISTORE.name:e=this._executeIstore(t.address);break;case k.BRANCH.name:e=this._executeBranch(t.label);break;case k.BRZERO.name:e=this._executeBrzero(t.label);break;case k.BRPOS.name:e=this._executeBrpos(t.label);break;case k.BRNEG.name:e=this._executeBrneg(t.label);break;case k.MADD.name:e=this._executeMadd(t.address);break;case k.IJUMP.name:e=this._executeIjump(t.address);break;case k.LABEL.name:e=this._executeLabel();break;case"END":e=this._endExecution();break;default:throw Error("Unknown instruction")}return e}},{key:"_executeHalt",value:function(){return{result:St.HaltExecution}}},{key:"_executeNegate",value:function(){return this.acc.value=-this.acc.value,{result:St.NextInstruction}}},{key:"_executeAccdec",value:function(){return this.acc.value-=1,{result:St.NextInstruction}}},{key:"_executeAccinc",value:function(){return this.acc.value+=1,{result:St.NextInstruction}}},{key:"_executeNop",value:function(){return{result:St.NextInstruction}}},{key:"_executeOutp",value:function(){return{result:St.NextInstruction}}},{key:"_executeInp",value:function(){return this.acc.value=Math.floor(1024*Math.random()),{result:St.NextInstruction}}},{key:"_executeMload",value:function(t){return this.acc.value=t,{result:St.NextInstruction}}},{key:"_executeDload",value:function(t){return this.acc.value=this.memory.read(t),{result:St.NextInstruction}}},{key:"_executeIload",value:function(t){var e=this.memory.read(t);return this.acc.value=this.memory.read(e),{result:St.NextInstruction}}},{key:"_executeDstore",value:function(t){return this.memory.write(t,this.acc.value),{result:St.NextInstruction}}},{key:"_executeIstore",value:function(t){var e=this.memory.read(t);return this.memory.write(e,this.acc.value),{result:St.NextInstruction}}},{key:"_executeBranch",value:function(t){return{result:St.MoveToLabel,label:t}}},{key:"_executeBrzero",value:function(t){return 0==this.acc.value?{result:St.MoveToLabel,label:t}:{result:St.NextInstruction}}},{key:"_executeBrpos",value:function(t){return this.acc.value>0?{result:St.MoveToLabel,label:t}:{result:St.NextInstruction}}},{key:"_executeBrneg",value:function(t){return this.acc.value<0?{result:St.MoveToLabel,label:t}:{result:St.NextInstruction}}},{key:"_executeMadd",value:function(t){return this.acc.value+=this.memory.read(t),{result:St.NextInstruction}}},{key:"_executeIjump",value:function(t){var e=this.memory.read(t);return{result:St.MoveToAddress,address:e}}},{key:"_executeLabel",value:function(){return{result:St.NextInstruction}}},{key:"_endExecution",value:function(){return this.memory.flush(),{result:St.EndExecution}}}]),t}(),Tt="notStarted",Bt="started",Lt="halted",_t="ended",Ut={name:"TheLayout",components:{CommonButton:D,CodeEditor:_,TabsContainer:At},data:function(){return{commonButtons:[{display:"|>",function:this.StartProgram,disabled:!1},{display:"|||",function:this.StopProgram,disabled:!0},{display:"||",function:this.PauseProgram,disabled:!0},{display:">",function:this.ExecuteInstruction,disabled:!0}],compiler:null,memory:null,cpu:null,currentState:Tt,instructionPointer:0,accumulator:{value:0},instruction:{instruction:""}}},methods:{StartProgram:function(){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("Start program"),t.currentState==_t&&t.ChangeSimulationState(Tt),t.currentState!=Tt){e.next=12;break}e.prev=3,t.compiler.compile(),e.next=11;break;case 7:return e.prev=7,e.t0=e["catch"](3),console.error("Compilation failed"),e.abrupt("return");case 11:t.cpu=new Nt(t.memory,t.accumulator);case 12:t.ChangeSimulationState(Bt);case 13:if(t.currentState!=Bt){e.next=19;break}return t.ExecuteInstruction(),e.next=17,t.Sleep(500);case 17:e.next=13;break;case 19:case"end":return e.stop()}}),e,null,[[3,7]])})))()},StopProgram:function(){console.log("Stop program"),this.ChangeSimulationState(Tt)},PauseProgram:function(){console.log("Pause program"),this.ChangeSimulationState(Lt)},ExecuteInstruction:function(){try{this.instruction=this.compiler.getInstruction(this.instructionPointer);var t=this.cpu.execute(this.instruction);console.log(this.instruction),t.result==St.NextInstruction?this.instructionPointer++:t.result==St.MoveToLabel?this.instructionPointer=this.compiler.getLabel(t.label)+1:t.result==St.MoveToAddress?this.instructionPointer=t.address:t.result==St.HaltExecution?(console.log("Program halted"),this.instructionPointer++,this.ChangeSimulationState(Lt)):t.result==St.EndExecution&&(console.log("Program end"),this.ChangeSimulationState(_t))}catch(e){console.error("Execution failed"),this.ChangeSimulationState(_t)}},RegisterCompiler:function(t){this.compiler=t},RegisterMemory:function(t){this.memory=t},ChangeSimulationState:function(t){switch(t){case Tt:this.commonButtons[0].disabled=!1,this.commonButtons[1].disabled=!0,this.commonButtons[2].disabled=!0,this.commonButtons[3].disabled=!0,this.ResetState();break;case Bt:this.commonButtons[0].disabled=!0,this.commonButtons[1].disabled=!1,this.commonButtons[2].disabled=!1,this.commonButtons[3].disabled=!0;break;case Lt:this.commonButtons[0].disabled=!1,this.commonButtons[1].disabled=!1,this.commonButtons[2].disabled=!0,this.commonButtons[3].disabled=!1;break;case _t:this.commonButtons[0].disabled=!1,this.commonButtons[1].disabled=!0,this.commonButtons[2].disabled=!0,this.commonButtons[3].disabled=!0;break}this.currentState=t},Sleep:function(t){return new Promise((function(e){setTimeout(e,t)}))},ResetState:function(){this.instructionPointer=0,this.accumulator={value:0},this.instruction={instruction:""},this.memory.reset()}}};a("f2ab");const Ht=O()(Ut,[["render",l]]);var Gt=Ht,Wt={name:"App",components:{TheProcessor:Gt}};a("3a5b");const Ft=O()(Wt,[["render",r]]);var Vt=Ft;Object(n["b"])(Vt).mount("#app")},"597e":function(t,e,a){"use strict";a("c0cd")},"72ab":function(t,e,a){"use strict";a("d7cd")},"8c5f":function(t,e,a){},9389:function(t,e,a){},"951f":function(t,e,a){"use strict";a("8c5f")},c0cd:function(t,e,a){},d529:function(t,e,a){"use strict";a("4f95")},d7cd:function(t,e,a){},f2ab:function(t,e,a){"use strict";a("9389")}});
//# sourceMappingURL=app.e700d31a.js.map