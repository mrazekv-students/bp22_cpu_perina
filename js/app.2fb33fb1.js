(function(e){function t(t){for(var a,i,o=t[0],s=t[1],l=t[2],h=0,d=[];h<o.length;h++)i=o[h],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);u&&u(t);while(d.length)d.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,o=1;o<n.length;o++){var s=n[o];0!==r[s]&&(a=!1)}a&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},c=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/bp22_cpu_perina/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=s;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0197":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURUJCQhaLU8ZnFzsAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACQSURBVHja7c6hEQAgDATBtED/zeIxzJAIAnv2xW9IkiRJkiRJkiSdNpYAAAAAAAAAAAAAAAAAAADeA+wOsjsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAP0A2AAAAAAAAAAAAAAAAAACA/oDqHQAAAAAAAAAAAAAAAAAA4H6AJEmSJEmSJEn6pIgJyBT+EOiZi/cAAAAASUVORK5CYII="},"08a6":function(e,t,n){},"10c6":function(e,t,n){},"1d79":function(e,t,n){"use strict";n("e564")},2036:function(e,t,n){"use strict";n("80a4")},"20ec":function(e,t,n){"use strict";n("f84f")},"21e6":function(e,t,n){"use strict";n("5a91")},"26dd":function(e,t,n){"use strict";n("dbd5")},"2d89":function(e,t,n){"use strict";n("08a6")},"36b0":function(e,t,n){},3868:function(e,t,n){"use strict";n("b7d6")},4174:function(e,t,n){"use strict";n("b2b0")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23"),r=n("bfbe"),c=n("003c"),i={class:"vertical-container main-container"};function o(e,t,n,r,c,o){var s=Object(a["resolveComponent"])("the-title"),l=Object(a["resolveComponent"])("the-processor"),u=Object(a["resolveComponent"])("notifications");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createElementVNode"])("div",i,[Object(a["createVNode"])(s,{title:"Cache Simulator",author:"Daniel Peřina",date:"2022",organisation:"Brno University of Technology",suborganisation:"Faculty of Information Technology",onUpdateSettings:o.Initialize},null,8,["onUpdateSettings"]),Object(a["createVNode"])(l,{ref:"processor"},null,512)]),Object(a["createVNode"])(u,{position:"bottom right",duration:1e4,classes:"vue-notification custom-notification"})],64)}var s=n("0197"),l=n.n(s),u={class:"horizontal-container title-bar"},h={class:"horizontal-container title-container"},d=Object(a["createElementVNode"])("img",{src:l.a,alt:"."},null,-1),m={class:"title"},g={class:"vertical-container additional-info"};function b(e,t,n,r,c,i){var o=Object(a["resolveComponent"])("icon-button"),s=Object(a["resolveComponent"])("the-about"),l=Object(a["resolveComponent"])("the-settings");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createElementVNode"])("div",u,[Object(a["createElementVNode"])("div",h,[d,Object(a["createElementVNode"])("h1",m,Object(a["toDisplayString"])(n.title),1),Object(a["createElementVNode"])("div",g,[Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(n.organisation),1),Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(n.suborganisation),1),Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(this.author+", "+this.date),1)]),Object(a["createVNode"])(o,{displayIcon:"fa-solid fa-info",function:i.ToggleAbout,tooltip:c.tooltips.help,class:"title-button"},null,8,["function","tooltip"]),Object(a["createVNode"])(o,{displayIcon:"fa-solid fa-gear",function:i.ToggleSettings,tooltip:c.tooltips.settings,class:"title-button"},null,8,["function","tooltip"])])]),(Object(a["openBlock"])(),Object(a["createBlock"])(a["Teleport"],{to:"body"},[Object(a["createVNode"])(s,{show:c.showAbout,onClose:i.ToggleAbout},null,8,["show","onClose"]),Object(a["createVNode"])(l,{show:c.showSettings,onClose:i.ToggleSettings},null,8,["show","onClose"])]))],64)}var p=["disabled"];function f(e,t,n,r,c,i){var o=Object(a["resolveDirective"])("tooltip");return n.visible?Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:0,class:"icon-button",disabled:n.disabled,onClick:t[0]||(t[0]=function(){return i.Click&&i.Click.apply(i,arguments)})},[Object(a["createElementVNode"])("i",{class:Object(a["normalizeClass"])(n.displayIcon)},null,2)],8,p)),[[o,n.tooltip]]):Object(a["createCommentVNode"])("",!0)}var O={name:"IconButton",props:{displayIcon:{type:String,required:!0},function:{type:Function,required:!0},tooltip:{default:null},visible:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},methods:{Click:function(){this.function()}}},v=(n("76bd"),n("6b0d")),y=n.n(v);const C=y()(O,[["render",f]]);var A=C,j={key:0,class:"modal-mask"},R={class:"modal-wrapper"},S={class:"about-container horizontal-container"},D=Object(a["createElementVNode"])("div",{class:"about-content vertical-container"},[Object(a["createElementVNode"])("h2",null,"Cache Simulator"),Object(a["createElementVNode"])("p",null," The Cache Simulator is a simple website application for simulating and displaying function of caches in CPU. CPU caches are small but fast memory storages that serve as a buffer between fast procesor and significantly slower RAM memory. In this application, user can input random program written in assembler (see below for instruction list) and simulate its execution and flow of data between CPU, cache and RAM. That way user can test various different architectures of cache, their influence on various programs and see why it is important to take cache structure into account when programming performant code. "),Object(a["createElementVNode"])("p",null," The application contains several pre-prepared example programs demonstrating common problems with some cache architectures and/or bad programming practices. For evaluation of their properties see the animated flow of data between CPU, cache and RAM and also the execution statistics: CPU cycles needed to execute program and rates of cache hit or cache miss. "),Object(a["createElementVNode"])("h3",null,"Controls"),Object(a["createElementVNode"])("p",null," The application consists of two parts. On the left are program control buttons and a code editor. At the top of the code editor is a selection box containing pre-prepared example programs. These program show various interesting properties of caches and can be freely edited (the changes are not saved). "),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])(" Once the desired program is entered the simulation can be started by either clicking the "),Object(a["createElementVNode"])("b",null,"START"),Object(a["createTextVNode"])(" button or the "),Object(a["createElementVNode"])("b",null,"STEP"),Object(a["createTextVNode"])(" button. Running program can be paused by clicking the "),Object(a["createElementVNode"])("b",null,"PAUSE"),Object(a["createTextVNode"])(" button and ended using the "),Object(a["createElementVNode"])("b",null,"STOP"),Object(a["createTextVNode"])(" button. Actively running program can also be fast-forwarded by clicking the "),Object(a["createElementVNode"])("b",null,"FAST FORWARD"),Object(a["createTextVNode"])(" button in place of the "),Object(a["createElementVNode"])("b",null,"START"),Object(a["createTextVNode"])(" button. ")]),Object(a["createElementVNode"])("p",null," On the right side are CPU and memory visual models. The application supports 4 cache models: no cache, directly mapped cache, two-way cache and full cache. User can change currently selected cache model by clicking the appropriate tab. Selected cache model can only be changed when the program is neither running or paused. "),Object(a["createElementVNode"])("p",null," At the far right of the title bar is a settings button which shows the settings dialog. Here user can change size of both cache memory and RAM memory, CPU costs of accessing both and speed of animations. "),Object(a["createElementVNode"])("h3",null,"Assembler"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])(" Used assembler was based on assembler intruduced in lab 4: Implementation of procesor in VHDL, course Design of Computer Systems, FIT BUT. All usable instructions and their description can be seen at "),Object(a["createElementVNode"])("a",{href:"https://github.com/mrazekv-students/bp22_cpu_perina/issues/3"},"github"),Object(a["createTextVNode"])(" or in the table below: ")]),Object(a["createElementVNode"])("table",null,[Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("th",null,"Instruction"),Object(a["createElementVNode"])("th",null,"Description")]),Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("td",{class:"instruction"},"HALT"),Object(a["createElementVNode"])("td",{class:"description"},"Stops program execution at this position.")]),Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("td",{class:"instruction"},"NEGATE"),Object(a["createElementVNode"])("td",{class:"description"},"Negates value in accumulator register.")]),Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("td",{class:"instruction"},"ACCDEC"),Object(a["createElementVNode"])("td",{class:"description"},"Increments value in accumulator by one.")]),Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("td",{class:"instruction"},"ACCINC"),Object(a["createElementVNode"])("td",{class:"description"},"Decrements value in accumulator by one.")]),Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("td",{class:"instruction"},"NOP"),Object(a["createElementVNode"])("td",{class:"description"},"No operation.")]),Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("td",{class:"instruction"},"OUTP"),Object(a["createElementVNode"])("td",{class:"description"},"No operation (originally I/O instruction).")]),Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("td",{class:"instruction"},"INP"),Object(a["createElementVNode"])("td",{class:"description"},"Sets value in accumulator to random value in range 0-1023 (originally I/O instruction).")]),Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("td",{class:"instruction"},"MLOAD [value]"),Object(a["createElementVNode"])("td",{class:"description"},"Loads value to accumulator.")]),Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("td",{class:"instruction"},"DLOAD @[address]"),Object(a["createElementVNode"])("td",{class:"description"},"Loads value located at entered memory address to accumulator.")]),Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("td",{class:"instruction"},"ILOAD @[address]"),Object(a["createElementVNode"])("td",{class:"description"},"Loads value located at memory address determined by value stored at entered memory address to accumulator.")]),Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("td",{class:"instruction"},"DSTORE @[address]"),Object(a["createElementVNode"])("td",{class:"description"},"Stores value in accumulator to entered memory address.")]),Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("td",{class:"instruction"},"ISTORE @[address]"),Object(a["createElementVNode"])("td",{class:"description"},"Stores value in accumulator to memory address determined by value of entered memory address.")]),Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("td",{class:"instruction"},"BRANCH [label]"),Object(a["createElementVNode"])("td",{class:"description"},"Moves program execution to position marked by entered label.")]),Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("td",{class:"instruction"},"BRZERO [label]"),Object(a["createElementVNode"])("td",{class:"description"},"Moves program execution to position marked by entered label if value in accumulator is equal to zero.")]),Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("td",{class:"instruction"},"BRPOS [label]"),Object(a["createElementVNode"])("td",{class:"description"},"Moves program execution to position marked by entered label if value in accumulator is greater than zero.")]),Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("td",{class:"instruction"},"BRNEG [label]"),Object(a["createElementVNode"])("td",{class:"description"},"Moves program execution to position marked by entered label if value in accumulator is lesser than zero.")]),Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("td",{class:"instruction"},"MADD @[address]"),Object(a["createElementVNode"])("td",{class:"description"},"Adds value at entered memory address to value in accumulator.")]),Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("td",{class:"instruction"},"IJUMP @[address]"),Object(a["createElementVNode"])("td",{class:"description"},"Indirect jump to address in code stored in entered memory address.")]),Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("td",{class:"instruction"},"FLUSH"),Object(a["createElementVNode"])("td",{class:"description"},"Flushes contents of cache to main memory and resets CPU cycle counter.")])]),Object(a["createElementVNode"])("p",null," Instruction names are case-insensitive. Value parameters are signed integers written in decimal notation. Address parameters are written in hexadecimal notation with at-sign ('@') prefix. Label are case-sensitive alfanumeric strings that are not equal to instruction name and ends with colon (':'). Labels parameters are written without the colon. ")],-1);function E(e,t,n,r,c,i){var o=Object(a["resolveComponent"])("icon-button");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Transition"],{name:"modal"},{default:Object(a["withCtx"])((function(){return[n.show?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",j,[Object(a["createElementVNode"])("div",R,[Object(a["createElementVNode"])("div",S,[D,Object(a["createVNode"])(o,{displayIcon:"fa-solid fa-xmark",function:i.CloseAbout,class:"close-button"},null,8,["function"])])])])):Object(a["createCommentVNode"])("",!0)]})),_:1})}var k={name:"TheAbout",components:{IconButton:A},props:{show:{type:Boolean,required:!0}},methods:{CloseAbout:function(){this.$emit("close")}}};n("4174");const w=y()(k,[["render",E]]);var N=w,T={key:0,class:"modal-mask"},M={class:"modal-wrapper"},x={class:"settings-container horizontal-container"},V={class:"vertical-container"},P={class:"settings-section"},L=Object(a["createElementVNode"])("h2",null,"Animation Settings",-1),B={class:"settings-section"},I=Object(a["createElementVNode"])("h2",null,"Memory Cost Settings",-1),F={class:"settings-section"},H=Object(a["createElementVNode"])("h2",null,"Memory Size Settings",-1);function U(e,t,n,r,c,i){var o=this,s=Object(a["resolveComponent"])("number-input"),l=Object(a["resolveComponent"])("icon-button");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Transition"],{name:"modal"},{default:Object(a["withCtx"])((function(){return[n.show?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",T,[Object(a["createElementVNode"])("div",M,[Object(a["createElementVNode"])("div",x,[Object(a["createElementVNode"])("div",V,[Object(a["createElementVNode"])("div",P,[L,Object(a["createVNode"])(s,{label:"Instruction Interval:",modelValue:o.times.instructionWait,"onUpdate:modelValue":t[0]||(t[0]=function(e){return o.times.instructionWait=e}),modelModifiers:{number:!0}},null,8,["modelValue"]),Object(a["createVNode"])(s,{label:"Connector Fill Time:",modelValue:o.times.connectorFill,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.times.connectorFill=e}),modelModifiers:{number:!0}},null,8,["modelValue"]),Object(a["createVNode"])(s,{label:"Connector Fade Time:",modelValue:o.times.connectorFade,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.times.connectorFade=e}),modelModifiers:{number:!0}},null,8,["modelValue"]),Object(a["createVNode"])(s,{label:"Highlight Fade Time:",modelValue:o.times.highlightFade,"onUpdate:modelValue":t[3]||(t[3]=function(e){return o.times.highlightFade=e}),modelModifiers:{number:!0}},null,8,["modelValue"])]),Object(a["createElementVNode"])("div",B,[I,Object(a["createVNode"])(s,{label:"Cache Check Cost:",modelValue:o.cycleCosts.cacheCheck,"onUpdate:modelValue":t[4]||(t[4]=function(e){return o.cycleCosts.cacheCheck=e}),modelModifiers:{number:!0}},null,8,["modelValue"]),Object(a["createVNode"])(s,{label:"Cache Access Cost:",modelValue:o.cycleCosts.cacheAccess,"onUpdate:modelValue":t[5]||(t[5]=function(e){return o.cycleCosts.cacheAccess=e}),modelModifiers:{number:!0}},null,8,["modelValue"]),Object(a["createVNode"])(s,{label:"RAM Access Cost:",modelValue:o.cycleCosts.ramAccess,"onUpdate:modelValue":t[6]||(t[6]=function(e){return o.cycleCosts.ramAccess=e}),modelModifiers:{number:!0}},null,8,["modelValue"])]),Object(a["createElementVNode"])("div",F,[H,Object(a["createVNode"])(s,{label:"RAM Size:",modelValue:o.memorySize.ram,"onUpdate:modelValue":t[7]||(t[7]=function(e){return o.memorySize.ram=e}),modelModifiers:{number:!0}},null,8,["modelValue"]),Object(a["createVNode"])(s,{label:"Cache Size:",modelValue:o.memorySize.cache,"onUpdate:modelValue":t[8]||(t[8]=function(e){return o.memorySize.cache=e}),modelModifiers:{number:!0}},null,8,["modelValue"])])]),Object(a["createVNode"])(l,{displayIcon:"fa-solid fa-xmark",function:i.CloseSetting,class:"close-button"},null,8,["function"])])])])):Object(a["createCommentVNode"])("",!0)]})),_:1})}n("a9e3");var z={class:"number-input horizontal-container"},_=["value"];function W(e,t,n,r,c,i){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",z,[Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(n.label),1),Object(a["createElementVNode"])("input",{value:n.modelValue,onInput:t[0]||(t[0]=function(t){return e.$emit("update:modelValue",Number(t.target.value))})},null,40,_)])}var G={name:"NumberInput",props:{label:{type:String,required:!0},modelValue:{type:Number,required:!0}}};n("c769");const Z=y()(G,[["render",W]]);var $=Z,q={name:"TheSettings",components:{IconButton:A,NumberInput:$},props:{show:{type:Boolean,required:!0}},methods:{CloseSetting:function(){this.$emit("close")}}};n("26dd");const J=y()(q,[["render",U]]);var Q=J,Y={name:"TheTitle",components:{IconButton:A,TheAbout:N,TheSettings:Q},emits:["UpdateSettings"],props:{title:{type:String,required:!0},author:{type:String},organisation:{type:String},suborganisation:{type:String},date:{type:String}},data:function(){return{showAbout:!1,showSettings:!1,tooltips:{settings:"Show settings",help:"About application"}}},methods:{ToggleAbout:function(){this.showAbout=!this.showAbout},ToggleSettings:function(){this.showSettings&&this.$emit("UpdateSettings"),this.showSettings=!this.showSettings}}};n("8588");const K=y()(Y,[["render",b]]);var X=K,ee={class:"horizontal-container app-container"},te={class:"vertical-container control-container"},ne={class:"horizontal-container button-container"},ae={class:"vertical-container program-container"},re={class:"vertical-container model-container"};function ce(e,t,n,r,c,i){var o=Object(a["resolveComponent"])("icon-button"),s=Object(a["resolveComponent"])("v-select"),l=Object(a["resolveComponent"])("code-editor"),u=Object(a["resolveComponent"])("the-tab-container");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ee,[Object(a["createElementVNode"])("div",te,[Object(a["createElementVNode"])("div",ne,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(c.controlButtons,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])(o,{key:e,displayIcon:e.display,function:e.function,tooltip:e.tooltip,disabled:e.disabled,visible:e.visible,class:"control-button"},null,8,["displayIcon","function","tooltip","disabled","visible"])})),128))]),Object(a["createElementVNode"])("div",ae,[Object(a["createVNode"])(s,{class:"program-select",modelValue:c.selected,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.selected=e}),options:c.programs,label:"label",reduce:function(e){return e.label},disabled:i.hasStarted,placeholder:"Vyberte ukázkový program","onOption:selected":i.SelectProgram},null,8,["modelValue","options","reduce","disabled","onOption:selected"]),Object(a["createVNode"])(l,{selectedProgram:c.selectedProgram,hasStarted:i.hasStarted,onRegisterCompiler:i.RegisterCompiler,onFocus:t[1]||(t[1]=function(){return c.editingCode=!0}),onBlur:t[2]||(t[2]=function(){return c.editingCode=!1})},null,8,["selectedProgram","hasStarted","onRegisterCompiler"])])]),Object(a["createElementVNode"])("div",re,[Object(a["createVNode"])(u,{onRegisterMemory:i.RegisterMemory,onRegisterRegs:i.RegisterRegs,hasStarted:i.hasStarted,editingCode:c.editingCode,instruction:c.instruction.instruction,instructionPointer:c.instructionPointer,accumulator:c.accumulator.value,addressPointer:c.addressPointer.value},null,8,["onRegisterMemory","onRegisterRegs","hasStarted","editingCode","instruction","instructionPointer","accumulator","addressPointer"])])])}var ie=n("1da1"),oe=(n("96cf"),n("4a7a")),se=n.n(oe),le=(n("6dfc"),[{label:"Základní ukázkový program",code:"; Základní ukázkový program\n; Naplní paměti 7-0 hodnotami jejich adres\n  MLOAD 7\nloop:\n  DSTORE @10\n  ISTORE @10\n  ACCDEC\n  BRPOS loop\n"},{label:"Průchod maticí po sloupcích",code:"; Průchod maticí 4x4\n; Matice je v paměti uložena po řádcích\n; Matice je procházena po sloupcích\n; Při průchodu se pole matice zpracují\n; Zpracované pole matici mají hodnotu 1\n\n  ; Aktuální adresa\n  MLOAD 0\n  DSTORE @20\n  ; Čítač sloupců\n  MLOAD 4\n  DSTORE @21\n  ; Čítač řádků\n  MLOAD 4\n  DSTORE @22\n  ; Základní adresa sloupce\n  MLOAD -1\n  DSTORE @23\n\n  ; Algoritmus\n  FLUSH HALT\ncol:\n  ; Načte se základní adresa sloupce\n  DLOAD @23\n  ACCINC\n  DSTORE @23\n  ; Skok na end pok čítač sloupců == 0\n  DLOAD @21\n  BRZERO end\n  ; Dekrementuje se čítač sloupců\n  ACCDEC\n  DSTORE @21\n  ; Nastaví se čítač řádků\n  MLOAD 4\n  DSTORE @22\n  ; Nastaví aktuální adresu\n  DLOAD @23\n  DSTORE @20\nrow:\n  ; Průchod\n  MLOAD 1\n  ISTORE @20\n  ; Upraví se adresa sloupce na další řádek\n  DLOAD @20\n  ACCINC ACCINC ACCINC ACCINC\n  DSTORE @20\n  ; Dekrementuje se čítač řádku\n  DLOAD @22\n  ACCDEC\n  DSTORE @22\n  ; Skok na col pokud čítač řádků == 0\n  BRZERO col\n  ; Skok na row jinak\n  BRANCH row\nend:\n  HALT\n"},{label:"Průchod maticí po řádcích",code:"; Průchod maticí 4x4\n; Matice je v paměti uložena po řádcích\n; Matice je procházena po řádcích\n; Při průchodu se pole matice zpracují\n; Zpracované pole matici mají hodnotu 1\n  ; Aktuální adresa\n  MLOAD 0\n  DSTORE @20\n  ; Čítač řádků\n  MLOAD 4\n  DSTORE @21\n  ; Čítač sloupců\n  MLOAD 4\n  DSTORE @22\n\n ; Algoritmus\n  FLUSH HALT\nrow:\n  ; Skok na end pokud čítač řádků == 0\n  DLOAD @21\n  BRZERO end\n  ; Dekrementuje se čítač řádků\n  ACCDEC\n  DSTORE @21\n  ; Nastaví se čítač sloupců\n  MLOAD 4\n  DSTORE @22\ncol:\n  ; Průchod\n  MLOAD 1\n  ISTORE @20\n  ; Upraví se adresa na další buňku\n  DLOAD @20\n  ACCINC\n  DSTORE @20\n  ; Dekrementuje se čítač sloupců\n  DLOAD @22\n  ACCDEC\n  DSTORE @22\n  ; Skok na col pokud čítač sloupců == 0\n  BRZERO row\n  ; Skok na row jinak\n  BRANCH col\nend:\n  HALT\n"},{label:"Zpracování pole jedním cyklem",code:"; Zpracování pole pomocí jednoho cyklu\n; Hodnota prvku se nejdřív nastaví na 1\n; poté se inkrementuje\n\n  ; Čítač pro pohyb v poli\n  MLOAD 31\n  DSTORE @3F\n  FLUSH HALT\nloop:\n  ; Nastavit hodnotu na 1 a uložit\n  MLOAD 1\n  ISTORE @3F\n  ; Hodnotu inkrementovat a uložit\n  ILOAD @3F\n  ACCINC\n  ISTORE @3F\n  ; Pokud čítač == 0 tak konec\n  DLOAD @3F\n  BRZERO end\n  ; Jinak pokračovat\n  ACCDEC\n  DSTORE @3F\n  BRANCH loop\nend:\n  HALT\n"},{label:"Zpracování pole dvěma cykly",code:"; Zpracování pole pomocí dvou cyklů\n; Hodnota prvku se nejdřív nastaví na 1\n; poté se inkrementuje\n\n  ; Čítač pro pohyb v poli\n  MLOAD 31\n  DSTORE @3F\n  FLUSH HALT\nloop_one:\n  ; Nastavit hodnota na 1\n  MLOAD 1\n  ISTORE @3F\n  ; Pokud čítač == 0 tak konec cyklu\n  DLOAD @3F\n  BRZERO end_one\n  ; Jinak pokračovat\n  ACCDEC\n  DSTORE @3F\n  BRANCH loop_one\nend_one:\n  ; Čítač pro pohyb v poli (znovu)\n  MLOAD 31\n  DSTORE @3F\nloop_inc:\n  ; Hodnotu inkrementovat\n  ILOAD @3F\n  ACCINC\n  ISTORE @3F\n  ; Pokud čítač == 0 tak konec\n  DLOAD @3F\n  BRZERO end_inc\n  ; Jinak pokračovat\n  ACCDEC\n  DSTORE @3F\n  BRANCH loop_inc\nend_inc:\n  HALT\n"},{label:"Zpracování spojitého seznamu",code:"; Průchod spojitým seznamem\n; Prvek seznamu se skládá ze dvojice:\n; hodnota a odkaz na další prvek\n\n  ; Vytvořit seznam\n  MLOAD 1 DSTORE @04 MLOAD 10 DSTORE @05\n  MLOAD 1 DSTORE @0A MLOAD 16 DSTORE @0B\n  MLOAD 1 DSTORE @10 MLOAD 22 DSTORE @11\n  MLOAD 1 DSTORE @16 MLOAD 28 DSTORE @17\n  MLOAD 1 DSTORE @1C MLOAD 34 DSTORE @1D\n  MLOAD 1 DSTORE @22 MLOAD 40 DSTORE @23\n  MLOAD 1 DSTORE @28 MLOAD 44 DSTORE @29\n  MLOAD 1 DSTORE @2C MLOAD -1 DSTORE @2D\n\n  ; Průchod seznamem\n  FLUSH HALT\n  ; Aktuální prvek\n  MLOAD 4\n  DSTORE @0\nloop:\n  ; Vynulovat hodnotu prvku\n  MLOAD 0\n  ISTORE @0\n  ; Načíst odkaz na další prvek\n  DLOAD @0\n  ACCINC\n  DSTORE @0\n  ILOAD @0\n  DSTORE @0\n  ; Pokud odkaz je záporný tak konec\n  BRNEG end\n  ; Jinak pokračovat\n  BRANCH loop\nend:\n  HALT\n"}]);function ue(e,t,n,r,c,i){var o=Object(a["resolveComponent"])("prism-editor");return Object(a["openBlock"])(),Object(a["createBlock"])(o,{class:"code-editor",modelValue:c.code,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.code=e}),highlight:i.HighlightCode,"line-numbers":!0,readonly:n.hasStarted},null,8,["modelValue","highlight","readonly"])}var he=n("e57a"),de=(n("cabf"),n("8c7a")),me=n.n(de),ge=(n("ac1f"),n("1276"),n("2ca0"),n("8a79"),n("b0c0"),n("fb6a"),n("99af"),n("159b"),n("b64b"),n("d4ec")),be=n("ade3"),pe=function e(t){Object(ge["a"])(this,e),this.name=t};Object(be["a"])(pe,"HALT",new pe("HALT")),Object(be["a"])(pe,"NEGATE",new pe("NEGATE")),Object(be["a"])(pe,"ACCDEC",new pe("ACCDEC")),Object(be["a"])(pe,"ACCINC",new pe("ACCINC")),Object(be["a"])(pe,"NOP",new pe("NOP")),Object(be["a"])(pe,"OUTP",new pe("OUTP")),Object(be["a"])(pe,"INP",new pe("INP")),Object(be["a"])(pe,"MLOAD",new pe("MLOAD")),Object(be["a"])(pe,"DLOAD",new pe("DLOAD")),Object(be["a"])(pe,"ILOAD",new pe("ILOAD")),Object(be["a"])(pe,"DSTORE",new pe("DSTORE")),Object(be["a"])(pe,"ISTORE",new pe("ISTORE")),Object(be["a"])(pe,"BRANCH",new pe("BRANCH")),Object(be["a"])(pe,"BRZERO",new pe("BRZERO")),Object(be["a"])(pe,"BRPOS",new pe("BRPOS")),Object(be["a"])(pe,"BRNEG",new pe("BRNEG")),Object(be["a"])(pe,"MADD",new pe("MADD")),Object(be["a"])(pe,"IJUMP",new pe("IJUMP")),Object(be["a"])(pe,"LABEL",new pe("LABEL")),Object(be["a"])(pe,"FLUSH",new pe("FLUSH"));var fe=1;function Oe(e,t){var n=e.split("\n");fe=1;while(n.length>0){var a=n.shift().split(/\s+/);while(a.length>0)ve(a,t);fe++}t.push({instruction:"END"})}function ve(e,t){var n=e.shift();if(n.startsWith(";"))e.length=0;else if(n.endsWith(":"))je(pe.LABEL.name,n.slice(0,-1),t);else switch(n.toUpperCase()){case pe.HALT.name:ye(pe.HALT.name,t);break;case pe.NEGATE.name:ye(pe.NEGATE.name,t);break;case pe.ACCDEC.name:ye(pe.ACCDEC.name,t);break;case pe.ACCINC.name:ye(pe.ACCINC.name,t);break;case pe.NOP.name:ye(pe.NOP.name,t);break;case pe.OUTP.name:ye(pe.OUTP.name,t);break;case pe.INP.name:ye(pe.INP.name,t);break;case pe.MLOAD.name:Ae(pe.MLOAD.name,e.shift(),t);break;case pe.DLOAD.name:Ce(pe.DLOAD.name,e.shift(),t);break;case pe.ILOAD.name:Ce(pe.ILOAD.name,e.shift(),t);break;case pe.DSTORE.name:Ce(pe.DSTORE.name,e.shift(),t);break;case pe.ISTORE.name:Ce(pe.ISTORE.name,e.shift(),t);break;case pe.BRANCH.name:je(pe.BRANCH.name,e.shift(),t);break;case pe.BRZERO.name:je(pe.BRZERO.name,e.shift(),t);break;case pe.BRPOS.name:je(pe.BRPOS.name,e.shift(),t);break;case pe.BRNEG.name:je(pe.BRNEG.name,e.shift(),t);break;case pe.MADD.name:Ce(pe.MADD.name,e.shift(),t);break;case pe.IJUMP.name:Ce(pe.IJUMP.name,e.shift(),t);break;case pe.FLUSH.name:ye(pe.FLUSH.name,t);break;case"":break;default:throw Error("Unknown instruction at line ".concat(fe," (").concat(n,")."))}}function ye(e,t){t.push({instruction:e,line:fe})}function Ce(e,t,n){if(!Re(t))throw Error("Invalid parameter at line ".concat(fe," (").concat(e," ").concat(t,")."));t=parseInt(t.substring(1),16),n.push({instruction:e,address:t,line:fe})}function Ae(e,t,n){if(!De(t))throw Error("Invalid parameter at line ".concat(fe," (").concat(e," ").concat(t,")."));t=parseInt(t),n.push({instruction:e,value:t,line:fe})}function je(e,t,n){if(Se(t))throw Error("Invalid label at line ".concat(fe," (label ").concat(t,"). Label must not be keyword."));n.push({instruction:e,label:t,line:fe})}function Re(e){var t=e.startsWith("@");return t&&(e=e.substring(1),t=Ee(e)),t}function Se(e){var t=!1;return Object.keys(pe).forEach((function(n){n===e.toUpperCase()&&(t=!0)})),t}function De(e){return/^-?\d+$/.test(e)}function Ee(e){return/[0-9a-f]+$/i.test(e)}var ke={operator:/\b(?:HALT|NEGATE|ACCDEC|ACCINC|NOP|OUTP|INP|MLOAD|DLOAD|ILOAD|DSTORE|ISTORE|BRANCH|BRZERO|BRPOS|BRNEG|MADD|IJUMP|LABEL|FLUSH)\b/i,comment:/;.*/,string:/@[0-9a-f]+\b/i},we=(n("10c6"),{name:"CodeEditor",components:{PrismEditor:he["a"]},emits:["RegisterCompiler"],props:{hasStarted:{type:Boolean,required:!0},selectedProgram:{type:String,default:""}},watch:{selectedProgram:function(e){this.code=e}},data:function(){return{code:"",instructionList:[],labelDict:{},highlightedLine:-1}},created:function(){this.code=this.selectedProgram,this.$emit("RegisterCompiler",{compile:this.CompileProgram,getInstruction:this.GetInstruction,getLabel:this.GetLabel,getNextLine:this.GetNextLine,highlightLine:this.HighlightLine})},methods:{HighlightCode:function(e){return me.a.languages.bp22=ke,me.a.highlight(e,me.a.languages.bp22)},HighlightLine:function(e){if(this.highlightedLine>=0){var t=document.querySelector(".prism-editor__line-number:nth-child(".concat(this.highlightedLine+1,")"));if(!t)return;t.classList.remove("highlight-line")}if(this.highlightedLine=e,e>=0){var n=document.querySelector(".prism-editor__line-number:nth-child(".concat(e+1,")"));if(!n)return;n.classList.add("highlight-line")}},CompileProgram:function(){for(var e in this.instructionList=[],this.labelDict={},Oe(this.code,this.instructionList),this.instructionList)"LABEL"==this.instructionList[e].instruction&&(this.labelDict[this.instructionList[e].label]=parseInt(e));console.log(this.instructionList),console.log(this.labelDict)},GetInstruction:function(e){if(e<this.instructionList.length)return this.instructionList[e];throw RangeError("Invalid instruction address (".concat(e,")."))},GetLabel:function(e){if(e in this.labelDict)return this.labelDict[e];throw RangeError("Unknown label (".concat(e,")."))},GetNextLine:function(e){return e<this.instructionList.length?this.instructionList[e].line:-1}}});n("2036");const Ne=y()(we,[["render",ue]]);var Te=Ne,Me={class:"horizontal-container tab-button-row"},xe={class:"horizontal-container tab-container"};function Ve(e,t,n,r,c,i){var o=Object(a["resolveComponent"])("tab-button"),s=Object(a["resolveDirective"])("tooltip");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createElementVNode"])("div",Me,[Object(a["withDirectives"])(Object(a["createVNode"])(o,{displayValue:"RAM-Only Memory",disabled:n.hasStarted,active:c.activeTab["RamOnlyMemory"],function:function(){return i.ChangeCurrentTab("RamOnlyMemory")}},null,8,["disabled","active","function"]),[[s,c.tooltips.ramOnlyMemory]]),Object(a["withDirectives"])(Object(a["createVNode"])(o,{displayValue:"Direct Cache",disabled:n.hasStarted,active:c.activeTab["DirectCacheMemory"],function:function(){return i.ChangeCurrentTab("DirectCacheMemory")}},null,8,["disabled","active","function"]),[[s,c.tooltips.directCacheMemory]]),Object(a["withDirectives"])(Object(a["createVNode"])(o,{displayValue:"Two-Way Cache",disabled:n.hasStarted,active:c.activeTab["TwoWayCacheMemory"],function:function(){return i.ChangeCurrentTab("TwoWayCacheMemory")}},null,8,["disabled","active","function"]),[[s,c.tooltips.twoWayCacheMemory]]),Object(a["withDirectives"])(Object(a["createVNode"])(o,{displayValue:"Full Cache",disabled:n.hasStarted,active:c.activeTab["FullCacheMemory"],function:function(){return i.ChangeCurrentTab("FullCacheMemory")}},null,8,["disabled","active","function"]),[[s,c.tooltips.fullCacheMemory]])]),Object(a["createElementVNode"])("div",xe,[(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(c.currentTab),{onRegisterMemory:t[0]||(t[0]=function(t){return e.$emit("RegisterMemory",t)}),onRegisterRegs:t[1]||(t[1]=function(t){return e.$emit("RegisterRegs",t)}),instruction:n.instruction,instructionPointer:n.instructionPointer,accumulator:n.accumulator,addressPointer:n.addressPointer},null,8,["instruction","instructionPointer","accumulator","addressPointer"]))])],64)}var Pe=["disabled"];function Le(e,t,n,r,c,i){return Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{class:Object(a["normalizeClass"])("tab-button"+(n.active?" active":"")),disabled:n.disabled,onClick:t[0]||(t[0]=function(){return i.Click&&i.Click.apply(i,arguments)})},[Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(n.displayValue),1)],10,Pe)}var Be={name:"TabButton",props:{displayValue:{type:String,required:!0},function:{type:Function,required:!0},disabled:{type:Boolean,default:!1},active:{type:Boolean,default:!1}},methods:{Click:function(){this.function()}}};n("e5d3");const Ie=y()(Be,[["render",Le]]);var Fe=Ie;function He(e,t,n,r,c,i){var o=Object(a["resolveComponent"])("processor-model"),s=Object(a["resolveComponent"])("connector"),l=Object(a["resolveComponent"])("ram-model");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createVNode"])(o,{instruction:n.instruction,instuctionPointer:n.instructionPointer,accumulator:n.accumulator,addressPointer:n.addressPointer,onRegisterRegs:t[0]||(t[0]=function(t){return e.$emit("RegisterRegs",t)})},null,8,["instruction","instuctionPointer","accumulator","addressPointer"]),Object(a["createVNode"])(s,{id:0,width:6,onRegisterConnector:i.RegisterConnector},null,8,["onRegisterConnector"]),Object(a["createVNode"])(l,{data:c.ramData,onRegisterRam:i.RegisterRam},null,8,["data","onRegisterRam"])],64)}n("d3b7"),n("25f0");var Ue={class:"vertical-container processor"},ze=Object(a["createElementVNode"])("span",{class:"title"},"CPU",-1),_e={class:"horizontal-container registers"};function We(e,t,n,r,c,i){var o=Object(a["resolveComponent"])("register-label"),s=Object(a["resolveComponent"])("cache-stats");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ue,[ze,Object(a["createVNode"])(o,{value:n.instruction,class:"current-instruction"},null,8,["value"]),Object(a["createElementVNode"])("div",_e,[Object(a["createVNode"])(o,{label:"IP",tooltip:c.tooltips.regIP,value:n.instuctionPointer},null,8,["tooltip","value"]),Object(a["createVNode"])(o,{label:"ACC",tooltip:c.tooltips.regACC,value:n.accumulator,onRegisterLabel:i.RegisterACC},null,8,["tooltip","value","onRegisterLabel"])]),Object(a["createVNode"])(o,{label:"AP",tooltip:c.tooltips.regAP,value:i.addressPointerString,onRegisterLabel:i.RegisterAP,class:"address-pointer"},null,8,["tooltip","value","onRegisterLabel"]),Object(a["createVNode"])(s,{cycles:this.cacheStats.cycles,memoryAccesses:this.cacheStats.memoryAccesses,cacheHits:this.cacheStats.cacheHits,cacheMisses:this.cacheStats.cacheMisses},null,8,["cycles","memoryAccesses","cacheHits","cacheMisses"])])}var Ge={class:"register-label"},Ze={class:"title"},$e={class:"value"};function qe(e,t,n,r,c,i){var o=Object(a["resolveDirective"])("tooltip");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ge,[Object(a["withDirectives"])(Object(a["createElementVNode"])("span",Ze,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(n.label),1)],512),[[a["vShow"],null!=n.label],[o,n.tooltip]]),Object(a["createElementVNode"])("div",$e,[Object(a["createElementVNode"])("div",{style:Object(a["normalizeStyle"])(c.highlightStyle)},[Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(n.value),1)],4)])])}n("4d90");var Je={name:"RegisterLabel",emits:["RegisterLabel"],props:{label:{type:String,default:null},tooltip:{type:Object,default:null},value:{required:!0}},data:function(){return{highlightStyle:{background:this.colors.secondaryColor+"00"},fadeOut:{interval:null,timeout:null}}},created:function(){this.$emit("RegisterLabel",{highlight:this.Highlight})},methods:{Highlight:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.times.highlightFade;if(this.animations.enable){this.ResetIntervals(),this.ResetHighlight();var n,a=t;this.fadeOut.interval=setInterval((function(){n=Math.floor(a/t*255).toString(16).padStart(2,"0"),e.highlightStyle.background=e.colors.secondaryColor+n,a-=10}),10),this.fadeOut.timeout=setTimeout((function(){clearInterval(e.fadeOut.interval),e.fadeOut.interval=null,e.fadeOut.timeout=null}),t)}},ResetHighlight:function(){this.highlightStyle.background=this.colors.secondaryColor+"00"},ResetIntervals:function(){null!=this.fadeOut.interval&&(clearInterval(this.fadeOut.interval),clearTimeout(this.fadeOut.timeout),this.fadeOut.interval=null,this.fadeOut.timeout=null)}}};n("3868");const Qe=y()(Je,[["render",qe]]);var Ye=Qe,Ke={class:"vertical-container cache-stats"},Xe={class:"vertical-container cycle-counter"},et=Object(a["createElementVNode"])("span",{class:"stats-label"},"CPU cycles",-1),tt={class:"stats-value"},nt={class:"vertical-container memory-stats"},at={class:"horizontal-container"},rt=Object(a["createElementVNode"])("span",{class:"stats-label"},"Memory accesses:",-1),ct={class:"stats-value"},it={class:"horizontal-container"},ot=Object(a["createElementVNode"])("span",{class:"stats-label"},"Cache hits:",-1),st={class:"stats-value"},lt={class:"stats-value"},ut={class:"horizontal-container"},ht=Object(a["createElementVNode"])("span",{class:"stats-label"},"Cache misses:",-1),dt={class:"stats-value"},mt={class:"stats-value"};function gt(e,t,n,r,c,i){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ke,[Object(a["createElementVNode"])("div",Xe,[et,Object(a["createElementVNode"])("span",tt,Object(a["toDisplayString"])(i.cyclesFormat),1)]),Object(a["createElementVNode"])("div",nt,[Object(a["createElementVNode"])("div",at,[rt,Object(a["createElementVNode"])("span",ct,Object(a["toDisplayString"])(i.memoryAccessesFormat),1)]),Object(a["createElementVNode"])("div",it,[ot,Object(a["createElementVNode"])("span",st,Object(a["toDisplayString"])(i.cacheHitsFormat),1),Object(a["createElementVNode"])("span",lt,"("+Object(a["toDisplayString"])(i.cacheHitsPercentFormat)+"%)",1)]),Object(a["createElementVNode"])("div",ut,[ht,Object(a["createElementVNode"])("span",dt,Object(a["toDisplayString"])(i.cacheMissesFormat),1),Object(a["createElementVNode"])("span",mt,"("+Object(a["toDisplayString"])(i.cacheMissesPercentFormat)+"%)",1)])])])}var bt={name:"CacheStats",props:{cycles:{required:!0},memoryAccesses:{required:!0},cacheHits:{required:!0},cacheMisses:{required:!0}},computed:{cyclesFormat:function(){return this.cycles.toLocaleString()},memoryAccessesFormat:function(){return this.memoryAccesses.toLocaleString()},cacheHitsFormat:function(){return this.cacheHits.toLocaleString()},cacheHitsPercentFormat:function(){return(this.cacheHits/this.memoryAccesses*100).toPrecision(4)},cacheMissesFormat:function(){return this.cacheMisses.toLocaleString()},cacheMissesPercentFormat:function(){return(this.cacheMisses/this.memoryAccesses*100).toPrecision(4)}}};n("8569");const pt=y()(bt,[["render",gt]]);var ft=pt,Ot={name:"ProcessorModel",components:{RegisterLabel:Ye,CacheStats:ft},emits:["RegisterRegs"],props:{instruction:{type:String},instuctionPointer:{type:Number},accumulator:{type:Number},addressPointer:{type:Number,default:0}},computed:{addressPointerString:function(){return"0x".concat(this.addressPointer.toString(16).toUpperCase())}},data:function(){return{registers:{highlightACC:null,highlightAP:null},tooltips:{regIP:{content:"<h4>Instruction pointer register</h4>Register containing address of next instruction",html:!0},regACC:{content:"<h4>Accumulator register</h4>Register for program data",html:!0},regAP:{content:"<h4>Address pointer register</h4>Register with memory address used during memory accesses",html:!0}}}},methods:{RegisterACC:function(e){this.registers.highlightACC=e.highlight,this.$emit("RegisterRegs",this.registers)},RegisterAP:function(e){this.registers.highlightAP=e.highlight,this.$emit("RegisterRegs",this.registers)}}};n("a960");const vt=y()(Ot,[["render",We]]);var yt=vt,Ct={class:"ram"},At={class:"address"},jt=Object(a["createTextVNode"])(" Address "),Rt=[jt],St={class:"value"},Dt=Object(a["createTextVNode"])(" Data "),Et=[Dt],kt={class:"address"},wt={class:"hex"},Nt={class:"bin"},Tt={class:"value"};function Mt(e,t,n,r,c,i){var o=Object(a["resolveDirective"])("tooltip");return Object(a["openBlock"])(),Object(a["createElementBlock"])("table",Ct,[Object(a["createElementVNode"])("tr",null,[Object(a["withDirectives"])(Object(a["createElementVNode"])("th",At,Rt,512),[[o,c.tooltips.address]]),Object(a["withDirectives"])(Object(a["createElementVNode"])("th",St,Et,512),[[o,c.tooltips.data]])]),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(n.data.length,(function(e){return Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:e,style:Object(a["normalizeStyle"])(c.rowHighlightId==e-1?c.rowHighlightStyle:"")},[Object(a["createElementVNode"])("td",kt,[Object(a["createElementVNode"])("span",wt,Object(a["toDisplayString"])(i.FormatAddressHex(4*(e-1))),1),Object(a["createElementVNode"])("span",Nt," ("+Object(a["toDisplayString"])(i.FormatAddressBin(4*(e-1)))+")",1)]),Object(a["createElementVNode"])("td",Tt,Object(a["toDisplayString"])(n.data[e-1]),1)],4)})),128))])}n("90d7");var xt={name:"RamModel",emits:["RegisterRam"],props:{data:{type:Array,required:!0}},data:function(){return{rowHighlightId:-1,rowHighlight:{interval:null,timeout:null},rowHighlightStyle:{background:this.colors.secondaryColor+"00"},tooltips:{address:"Memory block address",data:"Memory content"}}},computed:{dataLength:function(){return 4*this.data.length}},created:function(){this.$emit("RegisterRam",{highlight:this.HighlightRow})},methods:{FormatAddressHex:function(e){var t=Math.log2(this.dataLength)/4;return t=t%1==0?Math.floor(t):Math.floor(t)+1,"0x".concat(e.toString(16).padStart(t,"0").toUpperCase())},FormatAddressBin:function(e){var t=Math.log2(this.dataLength);return t=t%1==0?Math.floor(t):Math.floor(t)+1,"".concat(e.toString(2).padStart(t,"0"))},HighlightRow:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.times.highlightFade;if(this.animations.enable){this.ResetRowIntervals(),this.ResetRowHighlight(),this.rowHighlightId=Math.floor(e/4);var a,r=n;this.rowHighlight.interval=setInterval((function(){a=Math.floor(r/n*255).toString(16).padStart(2,"0"),t.rowHighlightStyle.background=t.colors.secondaryColor+a,r-=10}),10),this.rowHighlight.timeout=setTimeout((function(){clearInterval(t.rowHighlight.interval),t.rowHighlight.interval=null,t.rowHighlight.timeout=null}),n)}},ResetRowIntervals:function(){null!=this.rowHighlight.interval&&(clearInterval(this.rowHighlight.interval),clearTimeout(this.rowHighlight.timeout),this.rowHighlight.interval=null,this.rowHighlight.timeout=null)},ResetRowHighlight:function(){this.rowHighlightStyle.background=this.colors.secondaryColor+"00"}}};n("1d79");const Vt=y()(xt,[["render",Mt]]);var Pt=Vt;function Lt(e,t,n,r,c,i){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"connector",style:Object(a["normalizeStyle"])(c.connectorStyle)},[Object(a["createElementVNode"])("div",{class:"bar",style:Object(a["normalizeStyle"])(c.barStyle)},null,4)],4)}var Bt={name:"Connector",emits:["RegisterConnector"],props:{id:{type:Number,required:!0},width:{type:Number,default:4}},data:function(){return{connectorStyle:{width:this.width+"rem"},barStyle:{width:"0%",opacity:1,"margin-left":"initial"},fillBar:{interval:null,timeout:null},fadeOut:{interval:null,timeout:null}}},created:function(){this.$emit("RegisterConnector",this.id,{fromCpuToMemory:this.FromCpuToMemory,fromMemoryToCpu:this.FromMemoryToCpu})},methods:{FromCpuToMemory:function(){var e=arguments,t=this;return Object(ie["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.length>0&&void 0!==e[0]?e[0]:t.times.connectorFill,r=e.length>1&&void 0!==e[1]?e[1]:t.times.connectorFade,!t.animations.enable){n.next=7;break}return t.ResetIntervals(),t.ResetBar("initial"),n.next=7,t.AnimateBar(a,r);case 7:case"end":return n.stop()}}),n)})))()},FromMemoryToCpu:function(){var e=arguments,t=this;return Object(ie["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.length>0&&void 0!==e[0]?e[0]:t.times.connectorFill,r=e.length>1&&void 0!==e[1]?e[1]:t.times.connectorFade,!t.animations.enable){n.next=7;break}return t.ResetIntervals(),t.ResetBar("auto"),n.next=7,t.AnimateBar(a,r);case 7:case"end":return n.stop()}}),n)})))()},AnimateBar:function(e,t){var n=this;return Object(ie["a"])(regeneratorRuntime.mark((function a(){var r,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=10,n.fillBar.interval=setInterval((function(){n.barStyle.width=r/e*100+"%",r+=10}),10),c=new Promise((function(t){n.fillBar.timeout=setTimeout((function(){clearInterval(n.fillBar.interval),n.fillBar.interval=null,n.fillBar.timeout=null,t()}),e)})),a.next=5,c;case 5:n.fadeOut.interval=setInterval((function(){n.barStyle.opacity=r/t,r-=10}),10),n.fadeOut.timeout=setTimeout((function(){clearInterval(n.fadeOut.interval),n.fadeOut.interval=null,n.fadeOut.timeout=null}),t);case 7:case"end":return a.stop()}}),a)})))()},ResetBar:function(e){this.barStyle.width="0%",this.barStyle.opacity=1,this.barStyle["margin-left"]=e},ResetIntervals:function(){null!=this.fillBar.interval&&(clearInterval(this.fillBar.interval),clearTimeout(this.fillBar.timeout),this.fillBar.interval=null,this.fillBar.timeout=null),null!=this.fadeOut.interval&&(clearInterval(this.fadeOut.interval),clearTimeout(this.fadeOut.timeout),this.fadeOut.interval=null,this.fadeOut.timeout=null)}}};n("f8dc");const It=y()(Bt,[["render",Lt]]);var Ft=It,Ht={name:"RamOnlyMemory",components:{ProcessorModel:yt,RamModel:Pt,Connector:Ft},emits:["RegisterMemory","RegisterRegs"],props:{instruction:{type:String},instructionPointer:{type:Number},accumulator:{type:Number},addressPointer:{type:Number}},data:function(){return{ramData:[],connector:{fromCpuToMemory:null,fromMemoryToCpu:null},ramModel:{highlight:null}}},computed:{ramDataLength:function(){return 4*this.ramData.length}},created:function(){this.$emit("RegisterMemory",{write:this.Write,read:this.Read,flush:function(){},initialize:this.Initialize}),this.Initialize()},methods:{Write:function(e,t){var n=this;return Object(ie["a"])(regeneratorRuntime.mark((function a(){var r,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(e<n.ramDataLength&&e>=0)){a.next=11;break}return r=e>>2,c=3&e,a.next=5,n.connector.fromCpuToMemory();case 5:n.ramModel.highlight(e),n.cacheStats.cycles+=n.cycleCosts.ramAccess,n.cacheStats.memoryAccesses++,n.ramData[r][c]=t,a.next=12;break;case 11:throw RangeError("Invalid memory address (0x".concat(e.toString(16).toUpperCase(),")."));case 12:case"end":return a.stop()}}),a)})))()},Read:function(e){var t=this;return Object(ie["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(e<t.ramDataLength&&e>=0)){n.next=11;break}return a=e>>2,r=3&e,t.ramModel.highlight(e),n.next=6,t.connector.fromMemoryToCpu();case 6:return t.cacheStats.cycles+=t.cycleCosts.ramAccess,t.cacheStats.memoryAccesses++,n.abrupt("return",t.ramData[a][r]);case 11:throw RangeError("Invalid memory address (0x".concat(e.toString(16).toUpperCase(),")."));case 12:case"end":return n.stop()}}),n)})))()},Initialize:function(){this.ramData=Array(this.memorySize.ram);for(var e=0;e<this.memorySize.ram;e++)this.ramData[e]=[0,0,0,0]},RegisterConnector:function(e,t){this.connector=t},RegisterRam:function(e){this.ramModel=e}}};const Ut=y()(Ht,[["render",He]]);var zt=Ut;function _t(e,t,n,r,c,i){var o=Object(a["resolveComponent"])("processor-model"),s=Object(a["resolveComponent"])("connector"),l=Object(a["resolveComponent"])("cache-model"),u=Object(a["resolveComponent"])("ram-model");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createVNode"])(o,{instruction:n.instruction,instuctionPointer:n.instructionPointer,accumulator:n.accumulator,addressPointer:n.addressPointer,onRegisterRegs:t[0]||(t[0]=function(t){return e.$emit("RegisterRegs",t)})},null,8,["instruction","instuctionPointer","accumulator","addressPointer"]),Object(a["createVNode"])(s,{id:0,width:3.5,onRegisterConnector:i.RegisterConnector},null,8,["width","onRegisterConnector"]),Object(a["createVNode"])(l,{data:c.cacheData,tagLength:i.tagLength,onSwitchValidBit:i.SwitchValidBit,onRegisterCache:i.RegisterCache},null,8,["data","tagLength","onSwitchValidBit","onRegisterCache"]),Object(a["createVNode"])(s,{id:1,width:3.5,onRegisterConnector:i.RegisterConnector},null,8,["width","onRegisterConnector"]),Object(a["createVNode"])(u,{data:c.ramData,onRegisterRam:i.RegisterRam},null,8,["data","onRegisterRam"])],64)}var Wt=n("2909"),Gt={class:"cache"},Zt={class:"address"},$t=Object(a["createTextVNode"])(" Address "),qt=[$t],Jt={class:"valid"},Qt=Object(a["createTextVNode"])(" V "),Yt=[Qt],Kt={class:"tag"},Xt=Object(a["createTextVNode"])(" Tag "),en=[Xt],tn={class:"value"},nn=Object(a["createTextVNode"])(" Data "),an=[nn],rn={class:"address"},cn={class:"hex"},on={class:"bin"},sn=["onDblclick"],ln={class:"value"};function un(e,t,n,r,c,i){var o=Object(a["resolveDirective"])("tooltip");return Object(a["openBlock"])(),Object(a["createElementBlock"])("table",Gt,[Object(a["createElementVNode"])("tr",null,[Object(a["withDirectives"])(Object(a["createElementVNode"])("th",Zt,qt,512),[[o,c.tooltips.address]]),Object(a["withDirectives"])(Object(a["createElementVNode"])("th",Jt,Yt,512),[[o,c.tooltips.dirtyBit]]),Object(a["withDirectives"])(Object(a["createElementVNode"])("th",Kt,en,512),[[o,c.tooltips.tag]]),Object(a["withDirectives"])(Object(a["createElementVNode"])("th",tn,an,512),[[o,c.tooltips.data]])]),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(n.data.length,(function(e){return Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:e,style:Object(a["normalizeStyle"])(c.rowHighlightId==e-1?c.rowHighlightStyle:"")},[Object(a["createElementVNode"])("td",rn,[Object(a["createElementVNode"])("span",cn,Object(a["toDisplayString"])(i.FormatAddressHex(4*(e-1))),1),Object(a["createElementVNode"])("span",on," ("+Object(a["toDisplayString"])(i.FormatAddressBin(4*(e-1)))+")",1)]),Object(a["createElementVNode"])("td",{class:"valid",style:Object(a["normalizeStyle"])(n.data[e-1].valid?"":c.validFalseStyle),onDblclick:function(t){return i.ValidDblClick(e-1)}},Object(a["toDisplayString"])(n.data[e-1].valid?"T":"F"),45,sn),Object(a["createElementVNode"])("td",{class:"tag",style:Object(a["normalizeStyle"])(c.tagHighlightId==e-1?c.tagHighlightStyle:"")},[Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(i.FormatAddressBin(n.data[e-1].tag,n.tagLength)),1)],4),Object(a["createElementVNode"])("td",ln,Object(a["toDisplayString"])(n.data[e-1].data),1)],4)})),128))])}var hn={name:"CacheModel",emits:["RegisterCache","SwitchValidBit"],props:{id:{type:Number,default:0},data:{type:Array,required:!0},tagLength:{type:Number,default:1}},data:function(){return{rowHighlightId:-1,rowHighlight:{interval:null,timeout:null},tagHighlightId:-1,tagHighlight:{interval:null,timeout:null},rowHighlightStyle:{background:this.colors.secondaryColor+"00"},tagHighlightStyle:{background:this.colors.infoColor+"00"},validFalseStyle:{color:this.colors.secondaryColorLight,"font-weight":"bold"},tooltips:{address:"Memory block address",dirtyBit:{content:"<h4>Dirty bit</h4>Signals coherence of data in cache and RAM",html:!0},tag:{content:"<h4>Memory block tag</h4>Value specifying RAM address",html:!0},data:"Memory content"}}},computed:{dataLength:function(){return 4*this.data.length}},created:function(){this.$emit("RegisterCache",{highlight:this.HighlightRow,highlightTag:this.HighlightTag},this.id)},methods:{FormatAddressHex:function(e,t){var n;return n="undefined"==typeof t?Math.log2(this.dataLength)/4:t/4,n=n%1==0?Math.floor(n):Math.floor(n)+1,"0x".concat(e.toString(16).padStart(n,"0").toUpperCase())},FormatAddressBin:function(e,t){var n;return n="undefined"==typeof t?Math.log2(this.dataLength):t,n=n%1==0?Math.floor(n):Math.floor(n)+1,"".concat(e.toString(2).padStart(n,"0"))},ValidDblClick:function(e){this.$emit("SwitchValidBit",e,this.id)},HighlightRow:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.times.highlightFade;if(this.animations.enable){this.ResetRowIntervals(),this.ResetRowHighlight(),this.rowHighlightId=Math.floor(e/4);var a,r=n;this.rowHighlight.interval=setInterval((function(){a=Math.floor(r/n*255).toString(16).padStart(2,"0"),t.rowHighlightStyle.background=t.colors.secondaryColor+a,r-=10}),10),this.rowHighlight.timeout=setTimeout((function(){clearInterval(t.rowHighlight.interval),t.rowHighlight.interval=null,t.rowHighlight.timeout=null}),n)}},ResetRowIntervals:function(){null!=this.rowHighlight.interval&&(clearInterval(this.rowHighlight.interval),clearTimeout(this.rowHighlight.timeout),this.rowHighlight.interval=null,this.rowHighlight.timeout=null)},ResetRowHighlight:function(){this.rowHighlightStyle.background=this.colors.secondaryColor+"00"},HighlightTag:function(e){var t=arguments,n=this;return Object(ie["a"])(regeneratorRuntime.mark((function a(){var r,c,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=t.length>1&&void 0!==t[1]?t[1]:n.times.highlightFade,!n.animations.enable){a.next=10;break}return n.ResetTagIntervals(),n.ResetTagHighlight(),n.tagHighlightId=e,c=r,n.tagHighlight.interval=setInterval((function(){i=Math.floor(c/r*255).toString(16).padStart(2,"0"),n.tagHighlightStyle.background=n.colors.infoColor+i,c-=10}),10),o=new Promise((function(e){n.tagHighlight.timeout=setTimeout((function(){clearInterval(n.tagHighlight.interval),n.tagHighlight.interval=null,n.tagHighlight.timeout=null,e()}),r)})),a.next=10,o;case 10:case"end":return a.stop()}}),a)})))()},ResetTagIntervals:function(){null!=this.tagHighlight.interval&&(clearInterval(this.tagHighlight.interval),clearTimeout(this.tagHighlight.timeout),this.tagHighlight.interval=null,this.tagHighlight.timeout=null)},ResetTagHighlight:function(){this.tagHighlightStyle.background=this.colors.infoColor+"00"}}};n("2d89");const dn=y()(hn,[["render",un]]);var mn=dn,gn=n("bee2"),bn=function(){function e(t,n,a,r,c,i,o){Object(ge["a"])(this,e),this.ram=t,this.cache=n,this.ramModel=a,this.cacheModel=r,this.connectorCpuCache=c,this.connectorCacheMem=i,this.config=o}return Object(gn["a"])(e,[{key:"getRamAddressFromCache",value:function(e,t,n){return e<<n|t}},{key:"readFromRam",value:function(){var e=Object(ie["a"])(regeneratorRuntime.mark((function e(t,n,a,r){var c,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c=t>>2,i=n>>2,this.ramModel.highlight(n),"undefined"!=typeof r){e.next=10;break}return e.next=6,this.connectorCacheMem.fromMemoryToCpu();case 6:this.cache[c].update(!0,a,this.ram[i]),this.cacheModel.highlight(t),e.next=14;break;case 10:return e.next=12,this.connectorCacheMem[r].fromMemoryToCpu();case 12:this.cache[r][c].update(!0,a,this.ram[i]),this.cacheModel[r].highlight(t);case 14:this.config.cacheStats.cycles+=this.config.cycleCosts.ramAccess;case 15:case"end":return e.stop()}}),e,this)})));function t(t,n,a,r){return e.apply(this,arguments)}return t}()},{key:"writeToRam",value:function(){var e=Object(ie["a"])(regeneratorRuntime.mark((function e(t,n,a){var r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t>>2,c=n>>2,"undefined"!=typeof a){e.next=9;break}return this.cacheModel.highlight(t),e.next=6,this.connectorCacheMem.fromCpuToMemory();case 6:this.ram[c]=Object(Wt["a"])(this.cache[r].data),e.next=13;break;case 9:return this.cacheModel[a].highlight(t),e.next=12,this.connectorCacheMem[a].fromCpuToMemory();case 12:this.ram[c]=Object(Wt["a"])(this.cache[a][r].data);case 13:this.ramModel.highlight(n),this.config.cacheStats.cycles+=this.config.cycleCosts.ramAccess;case 15:case"end":return e.stop()}}),e,this)})));function t(t,n,a){return e.apply(this,arguments)}return t}()},{key:"readFromCache",value:function(){var e=Object(ie["a"])(regeneratorRuntime.mark((function e(t,n){var a,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t>>2,c=3&t,"undefined"!=typeof n){e.next=9;break}return this.cacheModel.highlight(t),e.next=6,this.connectorCpuCache.fromMemoryToCpu();case 6:a=this.cache[r].data[c],e.next=13;break;case 9:return this.cacheModel[n].highlight(t),e.next=12,this.connectorCpuCache[n].fromMemoryToCpu();case 12:a=this.cache[n][r].data[c];case 13:return this.config.cacheStats.cycles+=this.config.cycleCosts.cacheAccess,e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"writeToCache",value:function(){var e=Object(ie["a"])(regeneratorRuntime.mark((function e(t,n,a,r){var c,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c=t>>2,i=3&t,"undefined"!=typeof r){e.next=9;break}return e.next=5,this.connectorCpuCache.fromCpuToMemory();case 5:this.cache[c].update(!1,n,a,i),this.cacheModel.highlight(t),e.next=13;break;case 9:return e.next=11,this.connectorCpuCache[r].fromCpuToMemory();case 11:this.cache[r][c].update(!1,n,a,i),this.cacheModel[r].highlight(t);case 13:this.config.cacheStats.cycles+=this.config.cycleCosts.cacheAccess;case 14:case"end":return e.stop()}}),e,this)})));function t(t,n,a,r){return e.apply(this,arguments)}return t}()}]),e}(),pn=function(){function e(){Object(ge["a"])(this,e),this.valid=!0,this.tag=0,this.data=[0,0,0,0],this.isEmpty=!0}return Object(gn["a"])(e,[{key:"update",value:function(e,t,n,a){this.valid=e,this.tag=t,"undefined"==typeof a?this.data=Object(Wt["a"])(n):this.data[a]=n,this.isEmpty&&(this.isEmpty=!1)}},{key:"switchValid",value:function(){this.valid=!this.valid}}]),e}();function fn(e){return new Promise((function(t){setTimeout(t,e)}))}var On={name:"DirectCacheMemory",components:{ProcessorModel:yt,RamModel:Pt,CacheModel:mn,Connector:Ft},emits:["RegisterMemory","RegisterRegs"],props:{instruction:{type:String},instructionPointer:{type:Number},accumulator:{type:Number},addressPointer:{type:Number}},computed:{tagLength:function(){return Math.floor(Math.log2(this.ramDataLength+1))-Math.floor(Math.log2(this.cacheDataLength+1))},cacheAddressBits:function(){return Math.floor(Math.log2(this.cacheDataLength+1))},ramDataLength:function(){return 4*this.ramData.length},cacheDataLength:function(){return 4*this.cacheData.length}},data:function(){return{ramData:[],cacheData:[],connectorCpuCache:{fromCpuToMemory:null,fromMemoryToCpu:null},connectorCacheMem:{fromCpuToMemory:null,fromMemoryToCpu:null},ramModel:{highlight:null},cacheModel:{highlight:null,highlightTag:null},memoryUtils:null}},created:function(){this.$emit("RegisterMemory",{write:this.Write,read:this.Read,flush:this.Flush,initialize:this.Initialize}),this.Initialize()},methods:{Write:function(e,t){var n=this;return Object(ie["a"])(regeneratorRuntime.mark((function a(){var r,c,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(e>n.ramDataLength||e<0)){a.next=2;break}throw RangeError("Invalid memory address (0x".concat(e.toString(16).toUpperCase(),")."));case 2:return r=e&(1<<n.cacheAddressBits)-1,c=r>>2,i=e>>n.cacheAddressBits,n.cacheStats.memoryAccesses++,n.cacheStats.cycles+=n.cycleCosts.cacheCheck,a.next=9,n.cacheModel.highlightTag(c,Math.min(n.times.highlightFade/2,500));case 9:if(n.cacheData[c].tag!=i||n.cacheData[c].isEmpty){a.next=15;break}return n.cacheStats.cacheHits++,a.next=13,n.memoryUtils.writeToCache(r,i,t);case 13:a.next=32;break;case 15:if(n.cacheStats.cacheMisses++,!n.cacheData[c].valid){a.next=23;break}return a.next=19,n.memoryUtils.readFromRam(r,e,i);case 19:return a.next=21,n.memoryUtils.writeToCache(r,i,t);case 21:a.next=32;break;case 23:return o=n.memoryUtils.getRamAddressFromCache(n.cacheData[c].tag,r,n.cacheAddressBits),a.next=26,n.memoryUtils.writeToRam(r,o);case 26:return a.next=28,fn(n.times.connectorFade/2);case 28:return a.next=30,n.memoryUtils.readFromRam(r,e,i);case 30:return a.next=32,n.memoryUtils.writeToCache(r,i,t);case 32:case"end":return a.stop()}}),a)})))()},Read:function(e){var t=this;return Object(ie["a"])(regeneratorRuntime.mark((function n(){var a,r,c,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(e>t.ramDataLength||e<0)){n.next=2;break}throw RangeError("Invalid memory address (0x".concat(e.toString(16).toUpperCase(),")."));case 2:return a=e&(1<<t.cacheAddressBits)-1,r=a>>2,c=e>>t.cacheAddressBits,t.cacheStats.memoryAccesses++,t.cacheStats.cycles+=t.cycleCosts.cacheCheck,n.next=9,t.cacheModel.highlightTag(r,Math.min(t.times.highlightFade/2,500));case 9:if(t.cacheData[r].tag!=c||t.cacheData[r].isEmpty){n.next=16;break}return t.cacheStats.cacheHits++,n.next=13,t.memoryUtils.readFromCache(a);case 13:return n.abrupt("return",n.sent);case 16:if(t.cacheStats.cacheMisses++,!t.cacheData[r].valid){n.next=25;break}return n.next=20,t.memoryUtils.readFromRam(a,e,c);case 20:return n.next=22,t.memoryUtils.readFromCache(a);case 22:return n.abrupt("return",n.sent);case 25:return i=t.memoryUtils.getRamAddressFromCache(t.cacheData[r].tag,a,t.cacheAddressBits),n.next=28,t.memoryUtils.writeToRam(a,i);case 28:return n.next=30,fn(t.times.connectorFade/2);case 30:return n.next=32,t.memoryUtils.readFromRam(a,e,c);case 32:return n.next=34,t.memoryUtils.readFromCache(a);case 34:return n.abrupt("return",n.sent);case 35:case"end":return n.stop()}}),n)})))()},Flush:function(){for(var e=0;e<this.cacheData.length;e++){var t=this.memoryUtils.getRamAddressFromCache(this.cacheData[e].tag,e,this.cacheAddressBits-2);this.ramData[t]=Object(Wt["a"])(this.cacheData[e].data),this.cacheData[e]=new pn}},Initialize:function(){this.ramData=Array(this.memorySize.ram);for(var e=0;e<this.memorySize.ram;e++)this.ramData[e]=[0,0,0,0];this.cacheData=Array(this.memorySize.cache);for(var t=0;t<this.memorySize.cache;t++)this.cacheData[t]=new pn;this.memoryUtils=new bn(this.ramData,this.cacheData,this.ramModel,this.cacheModel,this.connectorCpuCache,this.connectorCacheMem,this)},SwitchValidBit:function(e){this.cacheData[e].switchValid()},RegisterConnector:function(e,t){0==e?this.connectorCpuCache=t:1==e&&(this.connectorCacheMem=t)},RegisterRam:function(e){this.ramModel=e},RegisterCache:function(e){this.cacheModel=e}}};const vn=y()(On,[["render",_t]]);var yn=vn,Cn={class:"vertical-container"},An={class:"vertical-container"},jn={class:"vertical-container"};function Rn(e,t,n,r,c,i){var o=Object(a["resolveComponent"])("processor-model"),s=Object(a["resolveComponent"])("connector"),l=Object(a["resolveComponent"])("cache-model"),u=Object(a["resolveComponent"])("ram-model");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createVNode"])(o,{instruction:n.instruction,instuctionPointer:n.instructionPointer,accumulator:n.accumulator,addressPointer:n.addressPointer,onRegisterRegs:t[0]||(t[0]=function(t){return e.$emit("RegisterRegs",t)})},null,8,["instruction","instuctionPointer","accumulator","addressPointer"]),Object(a["createElementVNode"])("div",Cn,[Object(a["createVNode"])(s,{id:0,width:3.5,onRegisterConnector:i.RegisterConnector},null,8,["width","onRegisterConnector"]),Object(a["createVNode"])(s,{id:2,width:3.5,onRegisterConnector:i.RegisterConnector},null,8,["width","onRegisterConnector"])]),Object(a["createElementVNode"])("div",An,[Object(a["createVNode"])(l,{id:0,data:c.cacheData[0],tagLength:i.tagLength,onSwitchValidBit:i.SwitchValidBit,onRegisterCache:i.RegisterCache},null,8,["data","tagLength","onSwitchValidBit","onRegisterCache"]),Object(a["createVNode"])(l,{id:1,data:c.cacheData[1],tagLength:i.tagLength,onSwitchValidBit:i.SwitchValidBit,onRegisterCache:i.RegisterCache},null,8,["data","tagLength","onSwitchValidBit","onRegisterCache"])]),Object(a["createElementVNode"])("div",jn,[Object(a["createVNode"])(s,{id:1,width:3.5,onRegisterConnector:i.RegisterConnector},null,8,["width","onRegisterConnector"]),Object(a["createVNode"])(s,{id:3,width:3.5,onRegisterConnector:i.RegisterConnector},null,8,["width","onRegisterConnector"])]),Object(a["createVNode"])(u,{data:c.ramData,onRegisterRam:i.RegisterRam},null,8,["data","onRegisterRam"])],64)}var Sn={name:"TwoWayCacheMemory",components:{ProcessorModel:yt,CacheModel:mn,RamModel:Pt,Connector:Ft},emits:["RegisterMemory","RegisterRegs"],props:{instruction:{type:String},instructionPointer:{type:Number},accumulator:{type:Number},addressPointer:{type:Number}},computed:{tagLength:function(){return Math.floor(Math.log2(this.ramDataLength+1))-Math.floor(Math.log2(this.cacheDataLength+1))},cacheAddressBits:function(){return Math.floor(Math.log2(this.cacheDataLength+1))},ramDataLength:function(){return 4*this.ramData.length},cacheDataLength:function(){return 4*this.cacheData[0].length}},data:function(){return{ramData:[],cacheData:[[],[]],connectorCpuCache:[],connectorCacheMem:[],cacheModel:[],ramModel:{highlight:null,highlightTag:null},memoryUtils:null}},created:function(){this.$emit("RegisterMemory",{write:this.Write,read:this.Read,flush:this.Flush,initialize:this.Initialize}),this.Initialize()},methods:{Write:function(e,t){var n=this;return Object(ie["a"])(regeneratorRuntime.mark((function a(){var r,c,i,o,s,l,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(e>n.ramDataLength||e<0)){a.next=2;break}throw RangeError("Invalid memory address (0x".concat(e.toString(16).toUpperCase(),")."));case 2:r=e&(1<<n.cacheAddressBits)-1,c=r>>2,i=e>>n.cacheAddressBits,n.cacheStats.memoryAccesses++,o=0;case 7:if(!(o<n.cacheData.length)){a.next=19;break}return n.cacheStats.cycles+=n.cycleCosts.cacheCheck,a.next=11,n.cacheModel[o].highlightTag(c,Math.min(n.times.highlightFade/2,500));case 11:if(n.cacheData[o][c].tag!=i||n.cacheData[o][c].isEmpty){a.next=16;break}return n.cacheStats.cacheHits++,a.next=15,n.memoryUtils.writeToCache(r,i,t,o);case 15:return a.abrupt("return");case 16:o++,a.next=7;break;case 19:n.cacheStats.cacheMisses++,s=null,l=0;case 22:if(!(l<n.cacheData.length)){a.next=29;break}if(!n.cacheData[l][c].isEmpty){a.next=26;break}return s=l,a.abrupt("break",29);case 26:l++,a.next=22;break;case 29:if(null==s&&(s=Math.floor(Math.random()*n.cacheData.length)),!n.cacheData[s][c].valid){a.next=37;break}return a.next=33,n.memoryUtils.readFromRam(r,e,i,s);case 33:return a.next=35,n.memoryUtils.writeToCache(r,i,t,s);case 35:a.next=46;break;case 37:return u=n.memoryUtils.getRamAddressFromCache(n.cacheData[s][c].tag,r,n.cacheAddressBits),a.next=40,n.memoryUtils.writeToRam(r,u,s);case 40:return a.next=42,fn(n.times.connectorFade/2);case 42:return a.next=44,n.memoryUtils.readFromRam(r,e,i,s);case 44:return a.next=46,n.memoryUtils.writeToCache(r,i,t,s);case 46:case"end":return a.stop()}}),a)})))()},Read:function(e){var t=this;return Object(ie["a"])(regeneratorRuntime.mark((function n(){var a,r,c,i,o,s,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(e>t.ramDataLength||e<0)){n.next=2;break}throw RangeError("Invalid memory address (0x".concat(e.toString(16).toUpperCase(),")."));case 2:a=e&(1<<t.cacheAddressBits)-1,r=a>>2,c=e>>t.cacheAddressBits,t.cacheStats.memoryAccesses++,i=0;case 7:if(!(i<t.cacheData.length)){n.next=19;break}return t.cacheStats.cycles+=t.cycleCosts.cacheCheck,n.next=11,t.cacheModel[i].highlightTag(r,Math.min(t.times.highlightFade/2,500));case 11:if(t.cacheData[i][r].tag!=c||t.cacheData[i][r].isEmpty){n.next=16;break}return t.cacheStats.cacheHits++,n.next=15,t.memoryUtils.readFromCache(a,i);case 15:return n.abrupt("return",n.sent);case 16:i++,n.next=7;break;case 19:t.cacheStats.cacheMisses++,o=null,s=0;case 22:if(!(s<t.cacheData.length)){n.next=29;break}if(!t.cacheData[s][r].isEmpty){n.next=26;break}return o=s,n.abrupt("break",29);case 26:s++,n.next=22;break;case 29:if(null==o&&(o=Math.floor(Math.random()*t.cacheData.length)),!t.cacheData[o][r].valid){n.next=38;break}return n.next=33,t.memoryUtils.readFromRam(a,e,c,o);case 33:return n.next=35,t.memoryUtils.readFromCache(a,o);case 35:return n.abrupt("return",n.sent);case 38:return l=t.memoryUtils.getRamAddressFromCache(t.cacheData[o][r].tag,a,t.cacheAddressBits),n.next=41,t.memoryUtils.writeToRam(a,l,o);case 41:return n.next=43,fn(t.times.connectorFade/2);case 43:return n.next=45,t.memoryUtils.readFromRam(a,e,c,o);case 45:return n.next=47,t.memoryUtils.readFromCache(a,o);case 47:return n.abrupt("return",n.sent);case 48:case"end":return n.stop()}}),n)})))()},Flush:function(){for(var e=0;e<this.cacheData.length;e++)for(var t=0;t<this.cacheData[e].length;t++){var n=this.memoryUtils.getRamAddressFromCache(this.cacheData[e][t].tag,t,this.cacheAddressBits-2);this.cacheData[e][t].isEmpty||(this.ramData[n]=Object(Wt["a"])(this.cacheData[e][t].data),this.cacheData[e][t]=new pn)}},Initialize:function(){this.ramData=Array(this.memorySize.ram);for(var e=0;e<this.memorySize.ram;e++)this.ramData[e]=[0,0,0,0];this.cacheData[0]=Array(Math.floor(this.memorySize.cache/2)),this.cacheData[1]=Array(Math.floor(this.memorySize.cache/2));for(var t=0;t<2;t++)for(var n=0;n<this.memorySize.cache/2;n++)this.cacheData[t][n]=new pn;this.memoryUtils=new bn(this.ramData,this.cacheData,this.ramModel,this.cacheModel,this.connectorCpuCache,this.connectorCacheMem,this)},SwitchValidBit:function(e,t){this.cacheData[t][e].switchValid()},RegisterConnector:function(e,t){e%2==0?this.connectorCpuCache[Math.floor(e/2)]=t:e%2==1&&(this.connectorCacheMem[Math.floor(e/2)]=t)},RegisterRam:function(e){this.ramModel=e},RegisterCache:function(e,t){this.cacheModel[t]=e}}};const Dn=y()(Sn,[["render",Rn]]);var En=Dn;function kn(e,t,n,r,c,i){var o=Object(a["resolveComponent"])("processor-model"),s=Object(a["resolveComponent"])("connector"),l=Object(a["resolveComponent"])("cache-model"),u=Object(a["resolveComponent"])("ram-model");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createVNode"])(o,{instruction:n.instruction,instuctionPointer:n.instructionPointer,accumulator:n.accumulator,addressPointer:n.addressPointer,onRegisterRegs:t[0]||(t[0]=function(t){return e.$emit("RegisterRegs",t)})},null,8,["instruction","instuctionPointer","accumulator","addressPointer"]),Object(a["createVNode"])(s,{id:0,width:3.5,onRegisterConnector:i.RegisterConnector},null,8,["width","onRegisterConnector"]),Object(a["createVNode"])(l,{data:c.cacheData,tagLength:i.tagLength,onSwitchValidBit:i.SwitchValidBit,onRegisterCache:i.RegisterCache},null,8,["data","tagLength","onSwitchValidBit","onRegisterCache"]),Object(a["createVNode"])(s,{id:1,width:3.5,onRegisterConnector:i.RegisterConnector},null,8,["width","onRegisterConnector"]),Object(a["createVNode"])(u,{data:c.ramData,onRegisterRam:i.RegisterRam},null,8,["data","onRegisterRam"])],64)}var wn={name:"FullCacheMemory",components:{ProcessorModel:yt,CacheModel:mn,RamModel:Pt,Connector:Ft},emits:["RegisterMemory","RegisterRegs"],props:{instruction:{type:String},instructionPointer:{type:Number},accumulator:{type:Number},addressPointer:{type:Number}},computed:{tagLength:function(){return Math.floor(Math.log2(this.ramDataLength+1))},cacheAddressBits:function(){return Math.floor(Math.log2(this.cacheDataLength+1))},ramDataLength:function(){return 4*this.ramData.length},cacheDataLength:function(){return 4*this.cacheData.length}},data:function(){return{ramData:[],cacheData:[],connectorCpuCache:{fromCpuToMemory:null,fromMemoryToCpu:null},connectorCacheMem:{fromCpuToMemory:null,fromMemoryToCpu:null},ramModel:{highlight:null},cacheModel:{highlight:null,highlightTag:null},memoryUtils:null}},created:function(){this.$emit("RegisterMemory",{write:this.Write,read:this.Read,flush:this.Flush,initialize:this.Initialize}),this.Initialize()},methods:{Write:function(e,t){var n=this;return Object(ie["a"])(regeneratorRuntime.mark((function a(){var r,c,i,o,s,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(e>n.ramDataLength||e<0)){a.next=2;break}throw RangeError("Invalid memory address (0x".concat(e.toString(16).toUpperCase(),")."));case 2:r=-4&e,n.cacheStats.memoryAccesses++,c=0;case 5:if(!(c<n.cacheData.length)){a.next=17;break}return n.cacheStats.cycles+=n.cycleCosts.cacheCheck,a.next=9,n.cacheModel.highlightTag(c,Math.min(n.times.highlightFade/2,500));case 9:if(n.cacheData[c].tag!=r||n.cacheData[c].isEmpty){a.next=14;break}return n.cacheStats.cacheHits++,a.next=13,n.memoryUtils.writeToCache(n.GetCacheAddress(c,e),r,t);case 13:return a.abrupt("return");case 14:c++,a.next=5;break;case 17:n.cacheStats.cacheMisses++,i=null,o=0;case 20:if(!(o<n.cacheData.length)){a.next=27;break}if(!n.cacheData[o].isEmpty){a.next=24;break}return i=o,a.abrupt("break",27);case 24:o++,a.next=20;break;case 27:if(null==i&&(i=Math.floor(Math.random()*n.cacheData.length)),s=n.GetCacheAddress(i,e),!n.cacheData[i].valid){a.next=36;break}return a.next=32,n.memoryUtils.readFromRam(s,e,r);case 32:return a.next=34,n.memoryUtils.writeToCache(s,r,t);case 34:a.next=45;break;case 36:return l=n.cacheData[i].tag,a.next=39,n.memoryUtils.writeToRam(s,l);case 39:return a.next=41,fn(n.times.connectorFade/2);case 41:return a.next=43,n.memoryUtils.readFromRam(s,e,r);case 43:return a.next=45,n.memoryUtils.writeToCache(s,r,t);case 45:case"end":return a.stop()}}),a)})))()},Read:function(e){var t=this;return Object(ie["a"])(regeneratorRuntime.mark((function n(){var a,r,c,i,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(e>t.ramDataLength||e<0)){n.next=2;break}throw RangeError("Invalid memory address (0x".concat(e.toString(16).toUpperCase(),")."));case 2:a=-4&e,t.cacheStats.memoryAccesses++,r=0;case 5:if(!(r<t.cacheData.length)){n.next=17;break}return t.cacheStats.cycles+=t.cycleCosts.cacheCheck,n.next=9,t.cacheModel.highlightTag(r,Math.min(t.times.highlightFade/2,500));case 9:if(t.cacheData[r].tag!=a||t.cacheData[r].isEmpty){n.next=14;break}return t.cacheStats.cacheHits++,n.next=13,t.memoryUtils.readFromCache(t.GetCacheAddress(r,e));case 13:return n.abrupt("return",n.sent);case 14:r++,n.next=5;break;case 17:t.cacheStats.cacheMisses++,c=null,i=0;case 20:if(!(i<t.cacheData.length)){n.next=27;break}if(!t.cacheData[i].isEmpty){n.next=24;break}return c=i,n.abrupt("break",27);case 24:i++,n.next=20;break;case 27:if(null==c&&(c=Math.floor(Math.random()*t.cacheData.length)),o=t.GetCacheAddress(c,e),!t.cacheData[c].valid){n.next=37;break}return n.next=32,t.memoryUtils.readFromRam(o,e,a);case 32:return n.next=34,t.memoryUtils.readFromCache(o);case 34:return n.abrupt("return",n.sent);case 37:return s=t.cacheData[c].tag,n.next=40,t.memoryUtils.writeToRam(o,s);case 40:return n.next=42,fn(t.times.connectorFade/2);case 42:return n.next=44,t.memoryUtils.readFromRam(o,e,a);case 44:return n.next=46,t.memoryUtils.readFromCache(o);case 46:return n.abrupt("return",n.sent);case 47:case"end":return n.stop()}}),n)})))()},Flush:function(){for(var e=0;e<this.cacheData.length;e++){var t=this.cacheData[e].tag>>2;this.cacheData[e].isEmpty||(this.ramData[t]=Object(Wt["a"])(this.cacheData[e].data),this.cacheData[e]=new pn)}},Initialize:function(){this.ramData=Array(this.memorySize.ram);for(var e=0;e<this.memorySize.ram;e++)this.ramData[e]=[0,0,0,0];this.cacheData=Array(this.memorySize.cache);for(var t=0;t<this.memorySize.cache;t++)this.cacheData[t]=new pn;this.memoryUtils=new bn(this.ramData,this.cacheData,this.ramModel,this.cacheModel,this.connectorCpuCache,this.connectorCacheMem,this)},SwitchValidBit:function(e){this.cacheData[e].switchValid()},GetCacheAddress:function(e,t){return e<<2|3&t},RegisterConnector:function(e,t){0==e?this.connectorCpuCache=t:1==e&&(this.connectorCacheMem=t)},RegisterRam:function(e){this.ramModel=e},RegisterCache:function(e){this.cacheModel=e}}};const Nn=y()(wn,[["render",kn]]);var Tn=Nn,Mn={name:"TheTabContainer",components:{TabButton:Fe,RamOnlyMemory:zt,DirectCacheMemory:yn,TwoWayCacheMemory:En,FullCacheMemory:Tn},emits:["RegisterMemory","RegisterRegs"],props:{instruction:{type:String},instructionPointer:{type:Number},accumulator:{type:Number},addressPointer:{type:Number},hasStarted:{type:Boolean},editingCode:{type:Boolean}},data:function(){return{currentTab:"RamOnlyMemory",activeTab:{RamOnlyMemory:!0,DirectCacheMemory:!1,TwoWayCacheMemory:!1,FullCacheMemory:!1},tooltips:{ramOnlyMemory:{content:"<p>Memory with no cache</p><p>Shortcut: [<b>1</b>]</p>",html:!0},directCacheMemory:{content:"<p>Memory with directly mapped cache</p><p>Shortcut: [<b>2</b>]</p>",html:!0},twoWayCacheMemory:{content:"<p>Memory with two way associative cache</p><p>Shortcut: [<b>3</b>]</p>",html:!0},fullCacheMemory:{content:"<p>Memory with fully associative cache</p><p>Shortcut: [<b>4</b>]</p>",html:!0}}}},created:function(){var e=this;window.addEventListener("keydown",(function(t){if(!e.editingCode)switch(t.key){case"+":case"1":"RamOnlyMemory"!=e.currentTab&&e.ChangeCurrentTab("RamOnlyMemory");break;case"ě":case"2":"DirectCacheMemory"!=e.currentTab&&e.ChangeCurrentTab("DirectCacheMemory");break;case"š":case"3":"TwoWayCacheMemory"!=e.currentTab&&e.ChangeCurrentTab("TwoWayCacheMemory");break;case"č":case"4":"FullCacheMemory"!=e.currentTab&&e.ChangeCurrentTab("FullCacheMemory");break}}))},methods:{ChangeCurrentTab:function(e){this.activeTab[this.currentTab]=!1,this.currentTab=e,this.activeTab[this.currentTab]=!0}}};n("21e6");const xn=y()(Mn,[["render",Ve]]);var Vn=xn,Pn=function e(t){Object(ge["a"])(this,e),this.name=t};Object(be["a"])(Pn,"NextInstruction",new Pn("NextInstruction")),Object(be["a"])(Pn,"HaltExecution",new Pn("HaltExecution")),Object(be["a"])(Pn,"EndExecution",new Pn("EndExecution")),Object(be["a"])(Pn,"MoveToLabel",new Pn("MoveToLabel")),Object(be["a"])(Pn,"MoveToAddress",new Pn("MoveToAddress"));var Ln=function(){function e(t,n,a,r,c){Object(ge["a"])(this,e),this.memory=t,this.acc=n,this.ap=a,this.regs=r,this.cacheStats=c}return Object(gn["a"])(e,[{key:"execute",value:function(){var e=Object(ie["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=t.instruction,e.next=e.t0===pe.HALT.name?3:e.t0===pe.NEGATE.name?5:e.t0===pe.ACCDEC.name?7:e.t0===pe.ACCINC.name?9:e.t0===pe.NOP.name?11:e.t0===pe.OUTP.name?13:e.t0===pe.INP.name?15:e.t0===pe.MLOAD.name?17:e.t0===pe.DLOAD.name?19:e.t0===pe.ILOAD.name?23:e.t0===pe.DSTORE.name?27:e.t0===pe.ISTORE.name?31:e.t0===pe.BRANCH.name?35:e.t0===pe.BRZERO.name?37:e.t0===pe.BRPOS.name?39:e.t0===pe.BRNEG.name?41:e.t0===pe.MADD.name?43:e.t0===pe.IJUMP.name?47:e.t0===pe.LABEL.name?51:e.t0===pe.FLUSH.name?53:"END"===e.t0?55:57;break;case 3:return n=this._executeHalt(),e.abrupt("break",58);case 5:return n=this._executeNegate(),e.abrupt("break",58);case 7:return n=this._executeAccdec(),e.abrupt("break",58);case 9:return n=this._executeAccinc(),e.abrupt("break",58);case 11:return n=this._executeNop(),e.abrupt("break",58);case 13:return n=this._executeOutp(),e.abrupt("break",58);case 15:return n=this._executeInp(),e.abrupt("break",58);case 17:return n=this._executeMload(t.value),e.abrupt("break",58);case 19:return e.next=21,this._executeDload(t.address);case 21:return n=e.sent,e.abrupt("break",58);case 23:return e.next=25,this._executeIload(t.address);case 25:return n=e.sent,e.abrupt("break",58);case 27:return e.next=29,this._executeDstore(t.address);case 29:return n=e.sent,e.abrupt("break",58);case 31:return e.next=33,this._executeIstore(t.address);case 33:return n=e.sent,e.abrupt("break",58);case 35:return n=this._executeBranch(t.label),e.abrupt("break",58);case 37:return n=this._executeBrzero(t.label),e.abrupt("break",58);case 39:return n=this._executeBrpos(t.label),e.abrupt("break",58);case 41:return n=this._executeBrneg(t.label),e.abrupt("break",58);case 43:return e.next=45,this._executeMadd(t.address);case 45:return n=e.sent,e.abrupt("break",58);case 47:return e.next=49,this._executeIjump(t.address);case 49:return n=e.sent,e.abrupt("break",58);case 51:return n=this._executeLabel(),e.abrupt("break",58);case 53:return n=this._executeFlush(),e.abrupt("break",58);case 55:return n=this._endExecution(),e.abrupt("break",58);case 57:throw Error("Unknown instruction ".concat(t.instruction,"."));case 58:return e.abrupt("return",n);case 59:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_executeHalt",value:function(){return this.cacheStats.cycles+=1,{result:Pn.HaltExecution}}},{key:"_executeNegate",value:function(){return this.cacheStats.cycles+=1,this.acc.value=-this.acc.value,this.regs.highlightACC(),{result:Pn.NextInstruction}}},{key:"_executeAccdec",value:function(){return this.cacheStats.cycles+=1,this.acc.value-=1,this.regs.highlightACC(),{result:Pn.NextInstruction}}},{key:"_executeAccinc",value:function(){return this.cacheStats.cycles+=1,this.acc.value+=1,this.regs.highlightACC(),{result:Pn.NextInstruction}}},{key:"_executeNop",value:function(){return this.cacheStats.cycles+=1,{result:Pn.NextInstruction}}},{key:"_executeOutp",value:function(){return this.cacheStats.cycles+=1,{result:Pn.NextInstruction}}},{key:"_executeInp",value:function(){return this.cacheStats.cycles+=1,this.acc.value=Math.floor(1024*Math.random()),this.regs.highlightACC(),{result:Pn.NextInstruction}}},{key:"_executeMload",value:function(e){return this.cacheStats.cycles+=1,this.acc.value=e,this.regs.highlightACC(),{result:Pn.NextInstruction}}},{key:"_executeDload",value:function(){var e=Object(ie["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.cacheStats.cycles+=1,this.ap.value=t,this.regs.highlightAP(),e.next=5,this.memory.read(t);case 5:return this.acc.value=e.sent,this.regs.highlightACC(),e.abrupt("return",{result:Pn.NextInstruction});case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_executeIload",value:function(){var e=Object(ie["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.cacheStats.cycles+=1,this.ap.value=t,this.regs.highlightAP(),e.next=5,this.memory.read(t);case 5:return this.ap.value=e.sent,this.regs.highlightAP(),this.cacheStats.cycles+=1,e.next=10,this.memory.read(this.ap.value);case 10:return this.acc.value=e.sent,this.regs.highlightACC(),e.abrupt("return",{result:Pn.NextInstruction});case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_executeDstore",value:function(){var e=Object(ie["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.cacheStats.cycles+=1,this.ap.value=t,this.regs.highlightAP(),e.next=5,this.memory.write(t,this.acc.value);case 5:return e.abrupt("return",{result:Pn.NextInstruction});case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_executeIstore",value:function(){var e=Object(ie["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.cacheStats.cycles+=1,this.ap.value=t,this.regs.highlightAP(),e.next=5,this.memory.read(t);case 5:return this.ap.value=e.sent,this.regs.highlightAP(),this.cacheStats.cycles+=1,e.next=10,this.memory.write(this.ap.value,this.acc.value);case 10:return e.abrupt("return",{result:Pn.NextInstruction});case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_executeBranch",value:function(e){return this.cacheStats.cycles+=1,{result:Pn.MoveToLabel,label:e}}},{key:"_executeBrzero",value:function(e){return this.cacheStats.cycles+=1,0==this.acc.value?(this.cacheStats.cycles+=1,{result:Pn.MoveToLabel,label:e}):{result:Pn.NextInstruction}}},{key:"_executeBrpos",value:function(e){return this.cacheStats.cycles+=1,this.acc.value>0?(this.cacheStats.cycles+=1,{result:Pn.MoveToLabel,label:e}):{result:Pn.NextInstruction}}},{key:"_executeBrneg",value:function(e){return this.cacheStats.cycles+=1,this.acc.value<0?(this.cacheStats.cycles+=1,{result:Pn.MoveToLabel,label:e}):{result:Pn.NextInstruction}}},{key:"_executeMadd",value:function(){var e=Object(ie["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.cacheStats.cycles+=1,this.ap.value=t,this.regs.highlightAP(),e.t0=this.acc.value,e.next=6,this.memory.read(t);case 6:return this.acc.value=e.t0+=e.sent,this.regs.highlightACC(),e.abrupt("return",{result:Pn.NextInstruction});case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_executeIjump",value:function(){var e=Object(ie["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.cacheStats.cycles+=1,this.ap.value=t,this.regs.highlightAP(),e.next=5,this.memory.read(t);case 5:return n=e.sent,e.abrupt("return",{result:Pn.MoveToAddress,address:n});case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_executeLabel",value:function(){return{result:Pn.NextInstruction}}},{key:"_executeFlush",value:function(){return this.cacheStats.cycles=0,this.memory.flush(),{result:Pn.NextInstruction}}},{key:"_endExecution",value:function(){return this.memory.flush(),{result:Pn.EndExecution}}}]),e}(),Bn={FORWARD:"fastForward",START:"start",STOP:"stop",PAUSE:"pause",STEP:"step"},In={STOPPED:"notStarted",STARTED:"started",HALTED:"halted"},Fn={name:"TheLayout",components:{IconButton:A,CodeEditor:Te,TheTabContainer:Vn,vSelect:se.a},computed:{hasStarted:function(){return this.currentState!=In.STOPPED}},data:function(){return{controlButtons:{fastForward:{display:"fa-solid fa-forward",function:this.FastForward,tooltip:{content:"<p>Skip to next breakpoint</p><p>Shortcut: [<b>S</b>]</p>",html:!0},disabled:!1,visible:!1},start:{display:"fa-solid fa-play",function:this.StartProgram,tooltip:{content:"<p>Start program</p><p>Shortcut: [<b>S</b>]</p>",html:!0},disabled:!1,visible:!0},stop:{display:"fa-solid fa-stop",function:this.StopProgram,tooltip:{content:"<p>Stop program</p><p>Shortcut: [<b>Q</b>]</p>",html:!0},disabled:!0,visible:!0},pause:{display:"fa-solid fa-pause",function:this.PauseProgram,tooltip:{content:"<p>Pause program execution</p><p>Shortcut: [<b>SPACE</b>]</p>",html:!0},disabled:!0,visible:!0},step:{display:"fa-solid fa-forward-step",function:this.ExecuteInstruction,tooltip:{content:"<p>Execute next instruction</p><p>Shortcut: [<b>F</b>]</p>",html:!0},disabled:!1,visible:!0}},compiler:{compile:null,getInstruction:null,getLabel:null,getNextLine:null,highlightLine:null},memory:{write:null,read:null,flush:null,initialize:null},regs:{highlightACC:null,highlightAP:null},cpu:null,currentState:In.STOPPED,editingCode:!1,instructionPointer:0,accumulator:{value:0},addressPointer:{value:0},instruction:{instruction:"INST",line:0},programs:le,selected:le[0].label,selectedProgram:le[0].code}},created:function(){var e=this;window.addEventListener("keydown",(function(t){if(!e.editingCode)switch(t.key){case"s":switch(e.currentState){case In.STOPPED:case In.HALTED:e.StartProgram();break;case In.STARTED:e.FastForward();break}break;case"q":e.currentState!=In.STOPPED&&e.StopProgram();break;case" ":e.currentState==In.STARTED&&e.PauseProgram();break;case"f":e.currentState!=In.STARTED&&e.ExecuteInstruction();break}}))},methods:{SelectProgram:function(e){console.log(e),this.selectedProgram=e.code},StartProgram:function(){var e=this;return Object(ie["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("Start program"),e.currentState!=In.STOPPED){t.next=6;break}if(n=e.CompileProgram(),!n){t.next=6;break}return e.ChangeSimulationState(In.STOPPED),t.abrupt("return");case 6:e.ChangeSimulationState(In.STARTED);case 7:if(e.currentState!=In.STARTED){t.next=15;break}return t.next=10,e.ExecuteInstruction();case 10:if(!e.animations.enable){t.next=13;break}return t.next=13,fn(e.times.instructionWait);case 13:t.next=7;break;case 15:case"end":return t.stop()}}),t)})))()},StopProgram:function(){console.log("Stop program"),this.ChangeSimulationState(In.STOPPED),this.Initialize()},PauseProgram:function(){console.log("Pause program"),this.ChangeSimulationState(In.HALTED)},ExecuteInstruction:function(){var e=this;return Object(ie["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.currentState!=In.STOPPED){t.next=6;break}if(n=e.CompileProgram(),!n){t.next=5;break}return e.ChangeSimulationState(In.STOPPED),t.abrupt("return");case 5:e.ChangeSimulationState(In.HALTED);case 6:return t.prev=6,e.currentState==In.HALTED&&(e.controlButtons[Bn.STEP].disabled=!0),e.instruction=e.compiler.getInstruction(e.instructionPointer),t.next=11,e.cpu.execute(e.instruction);case 11:a=t.sent,console.log(e.instruction),t.t0=a.result,t.next=t.t0===Pn.NextInstruction?16:t.t0===Pn.MoveToLabel?18:t.t0===Pn.MoveToAddress?20:t.t0===Pn.HaltExecution?22:t.t0===Pn.EndExecution?26:30;break;case 16:return e.instructionPointer++,t.abrupt("break",31);case 18:return e.instructionPointer=e.compiler.getLabel(a.label)+1,t.abrupt("break",31);case 20:return e.instructionPointer=a.address,t.abrupt("break",31);case 22:return console.log("Program stopped"),e.instructionPointer++,e.ChangeSimulationState(In.HALTED),t.abrupt("break",31);case 26:return console.log("Program ended"),e.compiler.highlightLine(-1),e.ChangeSimulationState(In.STOPPED),t.abrupt("return");case 30:throw Error("Unknown instruction result.");case 31:e.compiler.highlightLine(e.compiler.getNextLine(e.instructionPointer)),e.currentState==In.HALTED&&(e.controlButtons[Bn.STEP].disabled=!1),t.next=40;break;case 35:t.prev=35,t.t1=t["catch"](6),e.$notify({title:"Execution Error",text:t.t1.message,type:"error"}),console.error(t.t1),e.ChangeSimulationState(In.STOPPED);case 40:case"end":return t.stop()}}),t,null,[[6,35]])})))()},FastForward:function(){this.animations.enable=!1},CompileProgram:function(){try{this.compiler.compile()}catch(e){return this.$notify({title:"Compilation Error",text:e.message,type:"error"}),console.error(e),!0}return this.Initialize(),this.cpu=new Ln(this.memory,this.accumulator,this.addressPointer,this.regs,this.cacheStats),this.compiler.highlightLine(this.compiler.getNextLine(this.instructionPointer)),!1},RegisterCompiler:function(e){this.compiler=e},RegisterMemory:function(e){this.memory=e},RegisterRegs:function(e){this.regs=e},ChangeSimulationState:function(e){switch(e){case In.STOPPED:this.controlButtons[Bn.START].disabled=!1,this.controlButtons[Bn.STOP].disabled=!0,this.controlButtons[Bn.PAUSE].disabled=!0,this.controlButtons[Bn.STEP].disabled=!1,this.controlButtons[Bn.START].visible=!0,this.controlButtons[Bn.FORWARD].visible=!1;break;case In.STARTED:this.controlButtons[Bn.START].disabled=!0,this.controlButtons[Bn.STOP].disabled=!1,this.controlButtons[Bn.PAUSE].disabled=!1,this.controlButtons[Bn.STEP].disabled=!0,this.controlButtons[Bn.START].visible=!1,this.controlButtons[Bn.FORWARD].visible=!0;break;case In.HALTED:this.controlButtons[Bn.START].disabled=!1,this.controlButtons[Bn.STOP].disabled=!1,this.controlButtons[Bn.PAUSE].disabled=!0,this.controlButtons[Bn.STEP].disabled=!1,this.controlButtons[Bn.START].visible=!0,this.controlButtons[Bn.FORWARD].visible=!1;break}this.animations.enable=!0,this.currentState=e},Initialize:function(){this.instructionPointer=0,this.accumulator={value:0},this.addressPointer={value:0},this.instruction={instruction:"INST"},this.cacheStats.cycles=0,this.cacheStats.memoryAccesses=0,this.cacheStats.cacheHits=0,this.cacheStats.cacheMisses=0,this.compiler.highlightLine(-1),this.memory.initialize()}}};n("20ec");const Hn=y()(Fn,[["render",ce]]);var Un=Hn,zn={name:"App",components:{TheTitle:X,TheProcessor:Un},methods:{Initialize:function(){this.$refs.processor.Initialize()}}};n("e1be");const _n=y()(zn,[["render",o]]);var Wn=_n,Gn=Object(a["createApp"])(Wn);Gn.config.globalProperties.animations={enable:!0},Gn.config.globalProperties.times={instructionWait:500,connectorFill:500,connectorFade:1e3,highlightFade:1e3},Gn.config.globalProperties.cacheStats={cycles:0,memoryAccesses:0,cacheHits:0,cacheMisses:0},Gn.config.globalProperties.cycleCosts={cacheCheck:2,cacheAccess:10,ramAccess:200},Gn.config.globalProperties.memorySize={cache:4,ram:16},Gn.config.globalProperties.colors={secondaryColor:"#8b161c",secondaryColorLight:"#cc1717",fontColor:"#D6D6D6",infoColor:"#3f60bb"},c["a"].options.disposeTimeout=0,c["a"].options.instantMove=!0,c["a"].options.themes.tooltip.triggers=["hover"],c["a"].options.themes.tooltip.delay={show:500,hide:0},Gn.use(r["a"]).use(c["a"]).mount("#app")},"5a91":function(e,t,n){},"76bd":function(e,t,n){"use strict";n("f0a1")},"7b1c":function(e,t,n){},"80a4":function(e,t,n){},8569:function(e,t,n){"use strict";n("ae5d")},8588:function(e,t,n){"use strict";n("cd19")},a031:function(e,t,n){},a960:function(e,t,n){"use strict";n("a031")},ae5d:function(e,t,n){},b2b0:function(e,t,n){},b7d6:function(e,t,n){},ba61:function(e,t,n){},c769:function(e,t,n){"use strict";n("36b0")},cd19:function(e,t,n){},d6c1:function(e,t,n){},dbd5:function(e,t,n){},e1be:function(e,t,n){"use strict";n("d6c1")},e564:function(e,t,n){},e5d3:function(e,t,n){"use strict";n("7b1c")},f0a1:function(e,t,n){},f84f:function(e,t,n){},f8dc:function(e,t,n){"use strict";n("ba61")}});
//# sourceMappingURL=app.2fb33fb1.js.map