(function(e){function t(t){for(var n,c,o=t[0],s=t[1],u=t[2],h=0,m=[];h<o.length;h++)c=o[h],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&m.push(a[c][0]),a[c]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);l&&l(t);while(m.length)m.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,o=1;o<r.length;o++){var s=r[o];0!==a[s]&&(n=!1)}n&&(i.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={app:0},i=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=s;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"10c6":function(e,t,r){},"12bd":function(e,t,r){"use strict";r("31b0")},"14a2":function(e,t,r){"use strict";r("c7b8")},"15b7":function(e,t,r){"use strict";r("4486")},"173f":function(e,t,r){"use strict";r("8abf")},1780:function(e,t,r){"use strict";r("9c99")},"1c07":function(e,t,r){"use strict";r("7e21")},"2f89":function(e,t,r){},"31b0":function(e,t,r){},"34ea":function(e,t,r){"use strict";r("8600")},4486:function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23");function a(e,t,r,a,i,c){var o=Object(n["m"])("the-processor");return Object(n["k"])(),Object(n["c"])(o)}var i={class:"vertical-container main-container"},c={class:"horizontal-container app-container"},o={class:"vertical-container control-container"},s={class:"horizontal-container button-container"},u={class:"program-container"},l={class:"vertical-container model-container"};function h(e,t,r,a,h,m){var d=Object(n["m"])("the-title"),b=Object(n["m"])("icon-button"),f=Object(n["m"])("code-editor"),g=Object(n["m"])("the-tab-container");return Object(n["k"])(),Object(n["d"])("div",i,[Object(n["f"])(d,{title:"Cache Simulator",author:"Daniel PeÅ™ina",organisation:"Brno University of Technology",suborganisation:"Faculty of Information Technology",date:"2022"}),Object(n["e"])("div",c,[Object(n["e"])("div",o,[Object(n["e"])("div",s,[(Object(n["k"])(!0),Object(n["d"])(n["a"],null,Object(n["l"])(h.controlButtons,(function(e){return Object(n["k"])(),Object(n["c"])(b,{key:e,displayIcon:e.display,function:e.function,disabled:e.disabled,class:"control-button"},null,8,["displayIcon","function","disabled"])})),128))]),Object(n["e"])("div",u,[Object(n["f"])(f,{hasStarted:m.hasStarted,onRegisterCompiler:m.RegisterCompiler},null,8,["hasStarted","onRegisterCompiler"])])]),Object(n["e"])("div",l,[Object(n["f"])(g,{onRegisterMemory:m.RegisterMemory,hasStarted:m.hasStarted,instruction:h.instruction.instruction,instructionPointer:h.instructionPointer,accumulator:h.accumulator.value,addressPointer:h.addressPointer.value},null,8,["onRegisterMemory","hasStarted","instruction","instructionPointer","accumulator","addressPointer"])])])])}var m=r("1da1"),d=(r("96cf"),["disabled"]);function b(e,t,r,a,i,c){return Object(n["k"])(),Object(n["d"])("button",{class:"icon-button",disabled:r.disabled,onClick:t[0]||(t[0]=function(){return c.Click&&c.Click.apply(c,arguments)})},[Object(n["e"])("i",{class:Object(n["i"])(r.displayIcon)},null,2)],8,d)}var f={name:"CommonButton",props:{displayIcon:{type:String,required:!0},function:{type:Function,required:!0},disabled:{type:Boolean,default:!1}},methods:{Click:function(){this.function()}}},g=(r("5c5f"),r("6b0d")),p=r.n(g);const y=p()(f,[["render",b]]);var v=y;function C(e,t,r,a,i,c){var o=Object(n["m"])("prism-editor");return Object(n["k"])(),Object(n["c"])(o,{class:"code-editor",modelValue:i.code,"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.code=e}),highlight:c.HighlightCode,"line-numbers":!0,readonly:r.hasStarted},null,8,["modelValue","highlight","readonly"])}var O=r("e57a"),R=(r("cabf"),r("8c7a")),j=r.n(R),x=(r("ac1f"),r("1276"),r("2ca0"),r("8a79"),r("b0c0"),r("fb6a"),r("159b"),r("b64b"),r("d4ec")),w=r("ade3"),k=function e(t){Object(x["a"])(this,e),this.name=t};Object(w["a"])(k,"HALT",new k("HALT")),Object(w["a"])(k,"NEGATE",new k("NEGATE")),Object(w["a"])(k,"ACCDEC",new k("ACCDEC")),Object(w["a"])(k,"ACCINC",new k("ACCINC")),Object(w["a"])(k,"NOP",new k("NOP")),Object(w["a"])(k,"OUTP",new k("OUTP")),Object(w["a"])(k,"INP",new k("INP")),Object(w["a"])(k,"MLOAD",new k("MLOAD")),Object(w["a"])(k,"DLOAD",new k("DLOAD")),Object(w["a"])(k,"ILOAD",new k("ILOAD")),Object(w["a"])(k,"DSTORE",new k("DSTORE")),Object(w["a"])(k,"ISTORE",new k("ISTORE")),Object(w["a"])(k,"BRANCH",new k("BRANCH")),Object(w["a"])(k,"BRZERO",new k("BRZERO")),Object(w["a"])(k,"BRPOS",new k("BRPOS")),Object(w["a"])(k,"BRNEG",new k("BRNEG")),Object(w["a"])(k,"MADD",new k("MADD")),Object(w["a"])(k,"IJUMP",new k("IJUMP")),Object(w["a"])(k,"LABEL",new k("LABEL"));var M=1,T=1;function D(e,t){var r=e.split("\n");M=1,T=1;while(r.length>0){var n=r.shift().split(/\s+/);while(n.length>0)P(n,t);T++}t.push({instruction:"END"})}function P(e,t){var r=e.shift();if(r.startsWith(";"))e.length=0;else if(r.endsWith(":"))A(k.LABEL.name,r.slice(0,-1),t);else switch(r.toUpperCase()){case k.HALT.name:S(k.HALT.name,t);break;case k.NEGATE.name:S(k.NEGATE.name,t);break;case k.ACCDEC.name:S(k.ACCDEC.name,t);break;case k.ACCINC.name:S(k.ACCINC.name,t);break;case k.NOP.name:S(k.NOP.name,t);break;case k.OUTP.name:S(k.OUTP.name,t);break;case k.INP.name:S(k.INP.name,t);break;case k.MLOAD.name:L(k.MLOAD.name,e.shift(),t);break;case k.DLOAD.name:I(k.DLOAD.name,e.shift(),t);break;case k.ILOAD.name:I(k.ILOAD.name,e.shift(),t);break;case k.DSTORE.name:I(k.DSTORE.name,e.shift(),t);break;case k.ISTORE.name:I(k.ISTORE.name,e.shift(),t);break;case k.BRANCH.name:A(k.BRANCH.name,e.shift(),t);break;case k.BRZERO.name:A(k.BRZERO.name,e.shift(),t);break;case k.BRPOS.name:A(k.BRPOS.name,e.shift(),t);break;case k.BRNEG.name:A(k.BRNEG.name,e.shift(),t);break;case k.MADD.name:I(k.MADD.name,e.shift(),t);break;case k.IJUMP.name:I(k.IJUMP.name,e.shift(),t);break;case"":break;default:throw Error("Unknown instruction at "+M)}}function S(e,t){M++,t.push({instruction:e,line:T})}function I(e,t,r){if(M++,!E(t))throw Error("Incorrect parameter format at instruction "+M+" ("+e+")");t=parseInt(t.substring(1)),r.push({instruction:e,address:t,line:T})}function L(e,t,r){if(M++,!F(t))throw Error("Incorrect parameter format at instruction "+M+" ("+e+")");t=parseInt(t),r.push({instruction:e,value:t,line:T})}function A(e,t,r){if(M++,N(t))throw Error("Label must not be keyword at instruction "+M+" ("+e+")");r.push({instruction:e,label:t,line:T})}function E(e){var t=e.startsWith("@");return t&&(e=e.substring(1),t=F(e)),t}function N(e){var t=!1;return Object.keys(k).forEach((function(r){r===e.toUpperCase()&&(t=!0)})),t}function F(e){return/^-?\d+$/.test(e)}var B={operator:/\b(?:HALT|NEGATE|ACCDEC|ACCINC|NOP|OUTP|INP|MLOAD|DLOAD|ILOAD|DSTORE|ISTORE|BRANCH|BRZERO|BRPOS|BRNEG|MADD|IJUMP|LABEL)\b/i,comment:/;.*/,string:/@\d*\b/},U=(r("10c6"),{name:"CodeEditor",components:{PrismEditor:O["a"]},emits:["RegisterCompiler"],props:{hasStarted:{type:Boolean,required:!0}},data:function(){return{code:"",instructionList:[],labelDict:{},highlightedLine:-1}},created:function(){this.$emit("RegisterCompiler",{compile:this.CompileProgram,getInstruction:this.GetInstruction,getLabel:this.GetLabel,getNextLine:this.GetNextLine,highlightLine:this.HighlightLine})},methods:{HighlightCode:function(e){return j.a.languages.bp22=B,j.a.highlight(e,j.a.languages.bp22)},HighlightLine:function(e){if(this.highlightedLine>=0){var t=this.$el.querySelector(".prism-editor__line-number:nth-child(".concat(this.highlightedLine+1,")"));if(!t)return;t.classList.remove("highlight-line")}if(this.highlightedLine=e,e>=0){var r=this.$el.querySelector(".prism-editor__line-number:nth-child(".concat(e+1,")"));if(!r)return;r.classList.add("highlight-line")}},CompileProgram:function(){this.instructionList=[],this.labelDict={};try{D(this.code,this.instructionList)}catch(t){throw console.error(t),t}for(var e in this.instructionList)"LABEL"==this.instructionList[e].instruction&&(this.labelDict[this.instructionList[e].label]=parseInt(e));console.log(this.instructionList),console.log(this.labelDict)},GetInstruction:function(e){if(e<this.instructionList.length)return this.instructionList[e];throw RangeError("Invalid instruction address")},GetLabel:function(e){if(e in this.labelDict)return this.labelDict[e];throw RangeError("No such label")},GetNextLine:function(e){return e<this.instructionList.length?this.instructionList[e].line:-1}}});r("14a2");const _=p()(U,[["render",C]]);var H=_,z={class:"horizontal-container tab-button-row"},W={class:"horizontal-container tab-container"};function G(e,t,r,a,i,c){var o=Object(n["m"])("common-button"),s=Object(n["m"])("cycle-counter");return Object(n["k"])(),Object(n["d"])(n["a"],null,[Object(n["e"])("div",z,[Object(n["f"])(o,{displayValue:"RAM-Only Memory",disabled:r.hasStarted,function:function(){return c.ChangeCurrentTab("RamOnlyMemory")},class:Object(n["i"])("tab-button "+i.activeTab["RamOnlyMemory"])},null,8,["disabled","function","class"]),Object(n["f"])(o,{displayValue:"Direct Cache",disabled:r.hasStarted,function:function(){return c.ChangeCurrentTab("DirectCacheMemory")},class:Object(n["i"])("tab-button "+i.activeTab["DirectCacheMemory"])},null,8,["disabled","function","class"]),Object(n["f"])(o,{displayValue:"Two-Way Cache",disabled:r.hasStarted,function:function(){return c.ChangeCurrentTab("TwoWayCacheMemory")},class:Object(n["i"])("tab-button "+i.activeTab["TwoWayCacheMemory"])},null,8,["disabled","function","class"]),Object(n["f"])(o,{displayValue:"Full Cache",disabled:r.hasStarted,function:function(){return c.ChangeCurrentTab("FullCacheMemory")},class:Object(n["i"])("tab-button "+i.activeTab["FullCacheMemory"])},null,8,["disabled","function","class"]),Object(n["f"])(s,{cycles:this.cycleCounter.value},null,8,["cycles"])]),Object(n["e"])("div",W,[(Object(n["k"])(),Object(n["c"])(Object(n["n"])(i.currentTab),{onRegisterMemory:c.RegisterMemory,instruction:r.instruction,instructionPointer:r.instructionPointer,accumulator:r.accumulator,addressPointer:r.addressPointer},null,8,["onRegisterMemory","instruction","instructionPointer","accumulator","addressPointer"]))])],64)}r("a9e3");var q=["disabled"];function $(e,t,r,a,i,c){return Object(n["k"])(),Object(n["d"])("button",{class:"common-button",disabled:r.disabled,onClick:t[0]||(t[0]=function(){return c.Click&&c.Click.apply(c,arguments)})},[Object(n["e"])("span",null,Object(n["o"])(r.displayValue),1)],8,q)}var V={name:"CommonButton",props:{displayValue:{type:String,required:!0},function:{type:Function,required:!0},disabled:{type:Boolean,default:!1}},methods:{Click:function(){this.function()}}};r("1780");const J=p()(V,[["render",$]]);var Z=J,K={class:"vertical-container cycle-counter"},Q=Object(n["e"])("span",{class:"cycle-label"},"Processor cycles:",-1),X={class:"cycle-value"};function Y(e,t,r,a,i,c){return Object(n["k"])(),Object(n["d"])("div",K,[Q,Object(n["e"])("span",X,Object(n["o"])(c.cycleCounterFormat),1)])}var ee={name:"CycleCounter",props:{cycles:{required:!0}},computed:{cycleCounterFormat:function(){return this.cycles.toLocaleString(void 0)}}};r("b0ff");const te=p()(ee,[["render",Y]]);var re=te;function ne(e,t,r,a,i,c){var o=Object(n["m"])("processor-model"),s=Object(n["m"])("connector"),u=Object(n["m"])("ram-model");return Object(n["k"])(),Object(n["d"])(n["a"],null,[Object(n["f"])(o,{instruction:r.instruction,instuctionPointer:r.instructionPointer,accumulator:r.accumulator,addressPointer:r.addressPointer},null,8,["instruction","instuctionPointer","accumulator","addressPointer"]),Object(n["f"])(s,{id:0,width:4,onRegisterConnector:c.RegisterConnector},null,8,["onRegisterConnector"]),Object(n["f"])(u,{data:i.ramData,onRegisterRam:c.RegisterRam},null,8,["data","onRegisterRam"])],64)}var ae={class:"vertical-container processor"},ie=Object(n["e"])("span",{class:"title"},"CPU",-1),ce={class:"horizontal-container registers"};function oe(e,t,r,a,i,c){var o=Object(n["m"])("register-label");return Object(n["k"])(),Object(n["d"])("div",ae,[ie,Object(n["f"])(o,{value:r.instruction,class:"current-instruction"},null,8,["value"]),Object(n["e"])("div",ce,[Object(n["f"])(o,{label:"IP",value:r.instuctionPointer},null,8,["value"]),Object(n["f"])(o,{label:"ACC",value:r.accumulator},null,8,["value"])]),Object(n["f"])(o,{label:"AP",value:c.addressPointerString,class:"address-pointer"},null,8,["value"])])}r("d3b7"),r("25f0");var se={class:"register-label"},ue={class:"value"};function le(e,t,r,a,i,c){return Object(n["k"])(),Object(n["d"])("div",se,[Object(n["q"])(Object(n["e"])("span",{class:"title"},Object(n["o"])(r.label),513),[[n["p"],null!=r.label]]),Object(n["e"])("span",ue,Object(n["o"])(r.value),1)])}var he={name:"RegisterLabel",props:{label:{type:String,default:null},value:{required:!0}}};r("a591");const me=p()(he,[["render",le]]);var de=me,be={name:"ProcessorModel",components:{RegisterLabel:de},props:{instruction:{type:String},instuctionPointer:{type:Number},accumulator:{type:Number},addressPointer:{type:Number,default:0}},computed:{addressPointerString:function(){return"0x".concat(this.addressPointer.toString(16).toUpperCase())}}};r("eb36");const fe=p()(be,[["render",oe]]);var ge=fe,pe={class:"ram"},ye=Object(n["e"])("tr",null,[Object(n["e"])("th",{class:"address"}," Address "),Object(n["e"])("th",{class:"value"}," Data ")],-1);function ve(e,t,r,a,i,c){return Object(n["k"])(),Object(n["d"])("table",pe,[ye,(Object(n["k"])(!0),Object(n["d"])(n["a"],null,Object(n["l"])(r.data.length,(function(e){return Object(n["k"])(),Object(n["d"])("tr",{key:e},[Object(n["e"])("td",{class:"address",style:Object(n["j"])(i.highlightId==e-1?i.rowStyle:"")},Object(n["o"])(c.FormatAddress(e-1)),5),Object(n["e"])("td",{class:"value",style:Object(n["j"])(i.highlightId==e-1?i.rowStyle:"")},Object(n["o"])(r.data[e-1]),5)])})),128))])}r("90d7"),r("4d90");var Ce={name:"RamModel",emits:["RegisterRam"],props:{data:{type:Array,required:!0},highlightColor:{type:String,default:"#8b161c"}},data:function(){return{rowStyle:{background:this.highlightColor+"00"},highlightId:-1,fadeOut:{interval:null,timeout:null}}},created:function(){this.$emit("RegisterRam",{highlight:this.HighlightRow})},methods:{FormatAddress:function(e){var t=Math.floor(Math.log2(this.data.length+1)),r="0x".concat(e.toString(16).padStart(t/4,"0").toUpperCase());return r+=" (".concat(e.toString(2).padStart(t,"0"),")"),r},HighlightRow:function(e,t){var r=this;this.ResetIntervals(),this.ResetHighlight(),this.highlightId=e;var n,a=t;this.fadeOut.interval=setInterval((function(){n=Math.floor(a/t*255).toString(16).padStart(2,"0"),r.rowStyle.background=r.highlightColor+n,a-=10}),10),this.fadeOut.timeout=setTimeout((function(){clearInterval(r.fadeOut.interval),r.fadeOut.interval=null,r.fadeOut.timeout=null}),t)},ResetHighlight:function(){this.rowStyle.background=this.highlightColor+"00"},ResetIntervals:function(){null!=this.fadeOut.interval&&(clearInterval(this.fadeOut.interval),clearTimeout(this.fadeOut.timeout),this.fadeOut.interval=null,this.fadeOut.timeout=null)}}};r("f114");const Oe=p()(Ce,[["render",ve]]);var Re=Oe;function je(e,t,r,a,i,c){return Object(n["k"])(),Object(n["d"])("div",{class:"connector",style:Object(n["j"])(i.connectorStyle)},[Object(n["e"])("div",{class:"bar",style:Object(n["j"])(i.barStyle)},null,4)],4)}var xe={name:"Connector",emits:["RegisterConnector"],props:{id:{type:Number,required:!0},width:{type:Number,default:4}},data:function(){return{connectorStyle:{width:this.width+"rem"},barStyle:{width:"0rem",opacity:1,"margin-left":"initial"},fillBar:{interval:null,timeout:null},fadeOut:{interval:null,timeout:null}}},created:function(){this.$emit("RegisterConnector",this.id,{fromCpuToMemory:this.FromCpuToMemory,fromMemoryToCpu:this.FromMemoryToCpu})},methods:{FromCpuToMemory:function(e,t){var r=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r.ResetIntervals(),r.ResetBar("initial"),n.next=4,r.AnimateBar(e,t);case 4:case"end":return n.stop()}}),n)})))()},FromMemoryToCpu:function(e,t){var r=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r.ResetIntervals(),r.ResetBar("auto"),n.next=4,r.AnimateBar(e,t);case 4:case"end":return n.stop()}}),n)})))()},AnimateBar:function(e,t){var r=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=10,r.fillBar.interval=setInterval((function(){r.barStyle.width=a/e*r.width+"rem",a+=10}),10),i=new Promise((function(t){r.fillBar.timeout=setTimeout((function(){clearInterval(r.fillBar.interval),r.fillBar.interval=null,r.fillBar.timeout=null,t()}),e)})),n.next=5,i;case 5:r.fadeOut.interval=setInterval((function(){r.barStyle.opacity=a/t,a-=10}),10),r.fadeOut.timeout=setTimeout((function(){clearInterval(r.fadeOut.interval),r.fadeOut.interval=null,r.fadeOut.timeout=null}),t);case 7:case"end":return n.stop()}}),n)})))()},ResetBar:function(e){this.barStyle.width="0rem",this.barStyle.opacity=1,this.barStyle["margin-left"]=e},ResetIntervals:function(){null!=this.fillBar.interval&&(clearInterval(this.fillBar.interval),clearTimeout(this.fillBar.timeout),this.fillBar.interval=null,this.fillBar.timeout=null),null!=this.fadeOut.interval&&(clearInterval(this.fadeOut.interval),clearTimeout(this.fadeOut.timeout),this.fadeOut.interval=null,this.fadeOut.timeout=null)}}};r("15b7");const we=p()(xe,[["render",je]]);var ke=we,Me={name:"RamOnlyMemory",components:{ProcessorModel:ge,RamModel:Re,Connector:ke},emits:["RegisterMemory"],props:{instruction:{type:String},instructionPointer:{type:Number},accumulator:{type:Number},addressPointer:{type:Number}},data:function(){return{ramData:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],connector:{fromCpuToMemory:null,fromMemoryToCpu:null},ramModel:{highlight:null}}},created:function(){this.$emit("RegisterMemory",{write:this.Write,read:this.Read,flush:function(){},initialize:this.Initialize})},methods:{Write:function(e,t){var r=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(e<r.ramData.length&&e>=0)){n.next=8;break}return n.next=3,r.connector.fromCpuToMemory(r.connectorFillTime,r.connectorFadeTime);case 3:r.ramModel.highlight(e,r.highlightFadeTime),r.cycleCounter.value+=r.cycleCosts.ramAccess,r.ramData[e]=t,n.next=9;break;case 8:throw RangeError("Invalid memory address");case 9:case"end":return n.stop()}}),n)})))()},Read:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!(e<t.ramData.length&&e>=0)){r.next=8;break}return t.cycleCounter.value+=t.cycleCosts.ramAccess,t.ramModel.highlight(e,t.highlightFadeTime),r.next=5,t.connector.fromMemoryToCpu(t.connectorFillTime,t.connectorFadeTime);case 5:return r.abrupt("return",t.ramData[e]);case 8:throw RangeError("Invalid memory address");case 9:case"end":return r.stop()}}),r)})))()},Initialize:function(){this.ramData=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},RegisterConnector:function(e,t){this.connector=t},RegisterRam:function(e){this.ramModel=e}}};const Te=p()(Me,[["render",ne]]);var De=Te;function Pe(e,t,r,a,i,c){var o=Object(n["m"])("processor-model"),s=Object(n["m"])("connector"),u=Object(n["m"])("cache-model"),l=Object(n["m"])("ram-model");return Object(n["k"])(),Object(n["d"])(n["a"],null,[Object(n["f"])(o,{instruction:r.instruction,instuctionPointer:r.instructionPointer,accumulator:r.accumulator,addressPointer:r.addressPointer},null,8,["instruction","instuctionPointer","accumulator","addressPointer"]),Object(n["f"])(s,{id:0,width:4,onRegisterConnector:c.RegisterConnector},null,8,["onRegisterConnector"]),Object(n["f"])(u,{data:i.cacheData,tagLength:c.tagLength,onRegisterCache:c.RegisterCache},null,8,["data","tagLength","onRegisterCache"]),Object(n["f"])(s,{id:1,width:4,onRegisterConnector:c.RegisterConnector},null,8,["onRegisterConnector"]),Object(n["f"])(l,{data:i.ramData,onRegisterRam:c.RegisterRam},null,8,["data","onRegisterRam"])],64)}var Se={class:"cache"},Ie=Object(n["e"])("tr",null,[Object(n["e"])("th",{class:"address"}," Address "),Object(n["e"])("th",{class:"valid"}," V "),Object(n["e"])("th",{class:"tag"}," Tag "),Object(n["e"])("th",{class:"value"}," Data ")],-1);function Le(e,t,r,a,i,c){return Object(n["k"])(),Object(n["d"])("table",Se,[Ie,(Object(n["k"])(!0),Object(n["d"])(n["a"],null,Object(n["l"])(r.data.length,(function(e){return Object(n["k"])(),Object(n["d"])("tr",{key:e},[Object(n["e"])("td",{class:"address",style:Object(n["j"])(i.highlightId==e-1?i.rowStyle:"")},Object(n["o"])(c.FormatAddress(e-1)),5),Object(n["e"])("td",{class:Object(n["i"])("valid "+c.HighlightInvalid(r.data[e-1].valid)),style:Object(n["j"])(i.highlightId==e-1?i.rowStyle:"")},Object(n["o"])(r.data[e-1].valid?"T":"F"),7),Object(n["e"])("td",{class:"tag",style:Object(n["j"])(i.highlightId==e-1?i.rowStyle:"")},Object(n["o"])(c.FormatTag(r.data[e-1].tag)),5),Object(n["e"])("td",{class:"value",style:Object(n["j"])(i.highlightId==e-1?i.rowStyle:"")},Object(n["o"])(r.data[e-1].data),5)])})),128))])}var Ae={name:"CacheModel",emits:["RegisterCache"],props:{id:{type:Number,default:0},data:{type:Array,required:!0},tagLength:{type:Number,default:1},highlightColor:{type:String,default:"#8b161c"}},data:function(){return{rowStyle:{background:this.highlightColor+"00"},highlightId:-1,fadeOut:{interval:null,timeout:null}}},created:function(){this.$emit("RegisterCache",{highlight:this.HighlightRow},this.id)},methods:{FormatAddress:function(e){var t=Math.floor(Math.log2(this.data.length+1)),r="0x".concat(e.toString(16).padStart(t/4,"0").toUpperCase());return r+=" (".concat(e.toString(2).padStart(t,"0"),")"),r},FormatTag:function(e){var t="0x".concat(e.toString(16).padStart(this.tagLength/4,"0").toUpperCase());return t+=" (".concat(e.toString(2).padStart(this.tagLength,"0"),")"),t},HighlightInvalid:function(e){return e?"":"highlight"},HighlightRow:function(e,t){var r=this;this.ResetIntervals(),this.ResetHighlight(),this.highlightId=e;var n,a=t;this.fadeOut.interval=setInterval((function(){n=Math.floor(a/t*255).toString(16).padStart(2,"0"),r.rowStyle.background=r.highlightColor+n,a-=10}),10),this.fadeOut.timeout=setTimeout((function(){clearInterval(r.fadeOut.interval),r.fadeOut.interval=null,r.fadeOut.timeout=null}),t)},ResetHighlight:function(){this.rowStyle.background=this.highlightColor+"00"},ResetIntervals:function(){null!=this.fadeOut.interval&&(clearInterval(this.fadeOut.interval),clearTimeout(this.fadeOut.timeout),this.fadeOut.interval=null,this.fadeOut.timeout=null)}}};r("12bd");const Ee=p()(Ae,[["render",Le]]);var Ne=Ee,Fe=r("bee2"),Be=function(){function e(t,r,n,a,i,c,o){Object(x["a"])(this,e),this.ram=t,this.cache=r,this.ramModel=n,this.cacheModel=a,this.connectorCpuCache=i,this.connectorCacheMem=c,this.config=o}return Object(Fe["a"])(e,[{key:"getRamAddressFromCache",value:function(e,t,r){return t<<r|e}},{key:"readFromRam",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r,n,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.ramModel.highlight(r,this.config.highlightFadeTime),"undefined"!=typeof a){e.next=8;break}return e.next=4,this.connectorCacheMem.fromMemoryToCpu(this.config.connectorFillTime,this.config.connectorFadeTime);case 4:this.cache[t].update(!0,n,this.ram[r]),this.cacheModel.highlight(t,this.config.highlightFadeTime),e.next=12;break;case 8:return e.next=10,this.connectorCacheMem[a].fromMemoryToCpu(this.config.connectorFillTime,this.config.connectorFadeTime);case 10:this.cache[a][t].update(!0,n,this.ram[r]),this.cacheModel[a].highlight(t,this.config.highlightFadeTime);case 12:this.config.cycleCounter.value+=this.config.cycleCosts.ramAccess;case 13:case"end":return e.stop()}}),e,this)})));function t(t,r,n,a){return e.apply(this,arguments)}return t}()},{key:"writeToRam",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("undefined"!=typeof n){e.next=7;break}return this.cacheModel.highlight(t,this.config.highlightFadeTime),e.next=4,this.connectorCacheMem.fromCpuToMemory(this.config.connectorFillTime,this.config.connectorFadeTime);case 4:this.ram[r]=this.cache[t].data,e.next=11;break;case 7:return this.cacheModel[n].highlight(t,this.config.highlightFadeTime),e.next=10,this.connectorCacheMem[n].fromCpuToMemory(this.config.connectorFillTime,this.config.connectorFadeTime);case 10:this.ram[r]=this.cache[n][t].data;case 11:this.ramModel.highlight(r,this.config.highlightFadeTime),this.config.cycleCounter.value+=this.config.cycleCosts.ramAccess;case 13:case"end":return e.stop()}}),e,this)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"readFromCache",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("undefined"!=typeof r){e.next=7;break}return this.cacheModel.highlight(t,this.config.highlightFadeTime),e.next=4,this.connectorCpuCache.fromMemoryToCpu(this.config.connectorFillTime,this.config.connectorFadeTime);case 4:n=this.cache[t].data,e.next=11;break;case 7:return this.cacheModel[r].highlight(t,this.config.highlightFadeTime),e.next=10,this.connectorCpuCache[r].fromMemoryToCpu(this.config.connectorFillTime,this.config.connectorFadeTime);case 10:n=this.cache[r][t].data;case 11:return this.config.cycleCounter.value+=this.config.cycleCosts.cacheAccess,e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"writeToCache",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r,n,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("undefined"!=typeof a){e.next=7;break}return e.next=3,this.connectorCpuCache.fromCpuToMemory(this.config.connectorFillTime,this.config.connectorFadeTime);case 3:this.cache[t].update(!1,r,n),this.cacheModel.highlight(t,this.config.highlightFadeTime),e.next=11;break;case 7:return e.next=9,this.connectorCpuCache[a].fromCpuToMemory(this.config.connectorFillTime,this.config.connectorFadeTime);case 9:this.cache[a][t].update(!1,r,n),this.cacheModel[a].highlight(t,this.config.highlightFadeTime);case 11:this.config.cycleCounter.value+=this.config.cycleCosts.cacheAccess;case 12:case"end":return e.stop()}}),e,this)})));function t(t,r,n,a){return e.apply(this,arguments)}return t}()}]),e}(),Ue=function(){function e(){Object(x["a"])(this,e),this.valid=!0,this.tag=0,this.data=0,this.isEmpty=!0}return Object(Fe["a"])(e,[{key:"update",value:function(e,t,r){this.valid=e,this.tag=t,this.data=r,this.isEmpty&&(this.isEmpty=!1)}}]),e}(),_e={name:"DirectCacheMemory",components:{ProcessorModel:ge,RamModel:Re,CacheModel:Ne,Connector:ke},emits:["RegisterMemory"],props:{instruction:{type:String},instructionPointer:{type:Number},accumulator:{type:Number},addressPointer:{type:Number}},computed:{tagLength:function(){return Math.floor(Math.log2(this.ramData.length+1))-Math.floor(Math.log2(this.cacheData.length+1))}},data:function(){return{ramData:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],cacheData:[new Ue,new Ue,new Ue,new Ue],connectorCpuCache:{fromCpuToMemory:null,fromMemoryToCpu:null},connectorCacheMem:{fromCpuToMemory:null,fromMemoryToCpu:null},ramModel:{highlight:null},cacheModel:{highlight:null},memoryUtils:null}},created:function(){this.$emit("RegisterMemory",{write:this.Write,read:this.Read,flush:this.Flush,initialize:this.Initialize})},methods:{Write:function(e,t){var r=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var a,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(e>r.ramData.length||e<0)){n.next=2;break}throw RangeError("Invalid memory address");case 2:if(a=3&e,i=(12&e)>>2,r.cycleCounter.value+=r.cycleCosts.cacheCheck,r.cacheData[a].tag!=i){n.next=10;break}return n.next=8,r.memoryUtils.writeToCache(a,i,t);case 8:n.next=20;break;case 10:if(!r.cacheData[a].valid){n.next=15;break}return n.next=13,r.memoryUtils.writeToCache(a,i,t);case 13:n.next=20;break;case 15:return c=r.memoryUtils.getRamAddressFromCache(a,r.cacheData[a].tag,2),n.next=18,r.memoryUtils.writeToRam(a,c);case 18:return n.next=20,r.memoryUtils.writeToCache(a,i,t);case 20:case"end":return n.stop()}}),n)})))()},Read:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function r(){var n,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!(e>t.ramData.length||e<0)){r.next=2;break}throw RangeError("Invalid memory address");case 2:if(n=3&e,a=(12&e)>>2,t.cycleCounter.value+=t.cycleCosts.cacheCheck,t.cacheData[n].tag!=a){r.next=11;break}return r.next=8,t.memoryUtils.readFromCache(n);case 8:return r.abrupt("return",r.sent);case 11:if(!t.cacheData[n].valid){r.next=19;break}return r.next=14,t.memoryUtils.readFromRam(n,e,a);case 14:return r.next=16,t.memoryUtils.readFromCache(n);case 16:return r.abrupt("return",r.sent);case 19:return i=t.memoryUtils.getRamAddressFromCache(n,t.cacheData[n].tag,2),r.next=22,t.memoryUtils.writeToRam(n,i);case 22:return r.next=24,t.memoryUtils.readFromRam(n,e,a);case 24:return r.next=26,t.memoryUtils.readFromCache(n);case 26:return r.abrupt("return",r.sent);case 27:case"end":return r.stop()}}),r)})))()},Flush:function(){for(var e=0;e<this.cacheData.length;e++){var t=this.memoryUtils.getRamAddressFromCache(e,this.cacheData[e].tag,2);this.ramData[t]=this.cacheData[e].data,this.cacheData[e].valid=!0}},Initialize:function(){this.ramData=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.cacheData=[new Ue,new Ue,new Ue,new Ue],this.memoryUtils=new Be(this.ramData,this.cacheData,this.ramModel,this.cacheModel,this.connectorCpuCache,this.connectorCacheMem,this)},RegisterConnector:function(e,t){0==e?this.connectorCpuCache=t:1==e&&(this.connectorCacheMem=t)},RegisterRam:function(e){this.ramModel=e},RegisterCache:function(e){this.cacheModel=e}}};const He=p()(_e,[["render",Pe]]);var ze=He,We={class:"vertical-container"},Ge={class:"vertical-container"},qe={class:"vertical-container"};function $e(e,t,r,a,i,c){var o=Object(n["m"])("processor-model"),s=Object(n["m"])("connector"),u=Object(n["m"])("cache-model"),l=Object(n["m"])("ram-model");return Object(n["k"])(),Object(n["d"])(n["a"],null,[Object(n["f"])(o,{instruction:r.instruction,instuctionPointer:r.instructionPointer,accumulator:r.accumulator,addressPointer:r.addressPointer},null,8,["instruction","instuctionPointer","accumulator","addressPointer"]),Object(n["e"])("div",We,[Object(n["f"])(s,{id:0,width:4,onRegisterConnector:c.RegisterConnector},null,8,["onRegisterConnector"]),Object(n["f"])(s,{id:2,width:4,onRegisterConnector:c.RegisterConnector},null,8,["onRegisterConnector"])]),Object(n["e"])("div",Ge,[Object(n["f"])(u,{id:0,data:i.cacheData[0],tagLength:c.tagLength,onRegisterCache:c.RegisterCache},null,8,["data","tagLength","onRegisterCache"]),Object(n["f"])(u,{id:1,data:i.cacheData[1],tagLength:c.tagLength,onRegisterCache:c.RegisterCache},null,8,["data","tagLength","onRegisterCache"])]),Object(n["e"])("div",qe,[Object(n["f"])(s,{id:1,width:4,onRegisterConnector:c.RegisterConnector},null,8,["onRegisterConnector"]),Object(n["f"])(s,{id:3,width:4,onRegisterConnector:c.RegisterConnector},null,8,["onRegisterConnector"])]),Object(n["f"])(l,{data:i.ramData,onRegisterRam:c.RegisterRam},null,8,["data","onRegisterRam"])],64)}var Ve={name:"TwoWayCacheMemory",components:{ProcessorModel:ge,CacheModel:Ne,RamModel:Re,Connector:ke},emits:["RegisterMemory"],props:{instruction:{type:String},instructionPointer:{type:Number},accumulator:{type:Number},addressPointer:{type:Number}},computed:{tagLength:function(){return Math.floor(Math.log2(this.ramData.length+1))-Math.floor(Math.log2(this.cacheData.length+1))}},data:function(){return{ramData:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],cacheData:[[new Ue,new Ue],[new Ue,new Ue]],connectorCpuCache:[],connectorCacheMem:[],cacheModel:[],ramModel:{highlight:null},memoryUtils:null}},created:function(){this.$emit("RegisterMemory",{write:this.Write,read:this.Read,flush:this.Flush,initialize:this.Initialize})},methods:{Write:function(e,t){var r=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var a,i,c,o,s,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(e>r.ramData.length||e<0)){n.next=2;break}throw RangeError("Invalid memory address");case 2:a=1&e,i=(14&e)>>1,c=0;case 5:if(!(c<r.cacheData.length)){n.next=14;break}if(r.cycleCounter.value+=r.cycleCosts.cacheCheck,r.cacheData[c][a].tag!=i){n.next=11;break}return n.next=10,r.memoryUtils.writeToCache(a,i,t,c);case 10:return n.abrupt("return");case 11:c++,n.next=5;break;case 14:o=null,s=0;case 16:if(!(s<r.cacheData.length)){n.next=23;break}if(!r.cacheData[s][a].isEmpty){n.next=20;break}return o=s,n.abrupt("break",23);case 20:s++,n.next=16;break;case 23:if(null==o&&(o=Math.floor(2*Math.random())),!r.cacheData[o][a].valid){n.next=29;break}return n.next=27,r.memoryUtils.writeToCache(a,i,t,o);case 27:n.next=34;break;case 29:return u=r.memoryUtils.getRamAddressFromCache(a,r.cacheData[o][a].tag,1),n.next=32,r.memoryUtils.writeToRam(a,u,o);case 32:return n.next=34,r.memoryUtils.writeToCache(a,i,t,o);case 34:case"end":return n.stop()}}),n)})))()},Read:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function r(){var n,a,i,c,o,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!(e>t.ramData.length||e<0)){r.next=2;break}throw RangeError("Invalid memory address");case 2:n=1&e,a=(14&e)>>1,i=0;case 5:if(!(i<t.cacheData.length)){r.next=14;break}if(t.cycleCounter.value+=t.cycleCosts.cacheCheck,t.cacheData[i][n].tag!=a){r.next=11;break}return r.next=10,t.memoryUtils.readFromCache(n,i);case 10:return r.abrupt("return",r.sent);case 11:i++,r.next=5;break;case 14:c=null,o=0;case 16:if(!(o<t.cacheData.length)){r.next=23;break}if(!t.cacheData[o][n].isEmpty){r.next=20;break}return c=o,r.abrupt("break",23);case 20:o++,r.next=16;break;case 23:if(null==c&&(c=Math.floor(2*Math.random())),!t.cacheData[c][n].valid){r.next=32;break}return r.next=27,t.memoryUtils.readFromRam(n,e,a,c);case 27:return r.next=29,t.memoryUtils.readFromCache(n,c);case 29:return r.abrupt("return",r.sent);case 32:return s=t.memoryUtils.getRamAddressFromCache(n,t.cacheData[c][n].tag,1),r.next=35,t.memoryUtils.writeToRam(n,s,c);case 35:return r.next=37,t.memoryUtils.readFromRam(n,e,a,c);case 37:return r.next=39,t.memoryUtils.readFromCache(n,c);case 39:return r.abrupt("return",r.sent);case 40:case"end":return r.stop()}}),r)})))()},Flush:function(){for(var e=0;e<this.cacheData.length;e++)for(var t=0;t<this.cacheData[e].length;t++){var r=this.memoryUtils.getRamAddressFromCache(t,this.cacheData[e][t].tag,1);this.ramData[r]=this.cacheData[e][t].data,this.cacheData[e][t].valid=!0}},Initialize:function(){this.ramData=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.cacheData=[[new Ue,new Ue],[new Ue,new Ue]],this.memoryUtils=new Be(this.ramData,this.cacheData,this.ramModel,this.cacheModel,this.connectorCpuCache,this.connectorCacheMem,this)},RegisterConnector:function(e,t){e%2==0?this.connectorCpuCache[Math.floor(e/2)]=t:e%2==1&&(this.connectorCacheMem[Math.floor(e/2)]=t)},RegisterRam:function(e){this.ramModel=e},RegisterCache:function(e,t){this.cacheModel[t]=e}}};const Je=p()(Ve,[["render",$e]]);var Ze=Je;function Ke(e,t,r,a,i,c){var o=Object(n["m"])("processor-model"),s=Object(n["m"])("connector"),u=Object(n["m"])("cache-model"),l=Object(n["m"])("ram-model");return Object(n["k"])(),Object(n["d"])(n["a"],null,[Object(n["f"])(o,{instruction:r.instruction,instuctionPointer:r.instructionPointer,accumulator:r.accumulator,addressPointer:r.addressPointer},null,8,["instruction","instuctionPointer","accumulator","addressPointer"]),Object(n["f"])(s,{id:0,width:4,onRegisterConnector:c.RegisterConnector},null,8,["onRegisterConnector"]),Object(n["f"])(u,{data:i.cacheData,tagLength:c.tagLength,onRegisterCache:c.RegisterCache},null,8,["data","tagLength","onRegisterCache"]),Object(n["f"])(s,{id:1,width:4,onRegisterConnector:c.RegisterConnector},null,8,["onRegisterConnector"]),Object(n["f"])(l,{data:i.ramData,onRegisterRam:c.RegisterRam},null,8,["data","onRegisterRam"])],64)}var Qe={name:"FullCacheMemory",components:{ProcessorModel:ge,CacheModel:Ne,RamModel:Re,Connector:ke},emits:["RegisterMemory"],props:{instruction:{type:String},instructionPointer:{type:Number},accumulator:{type:Number},addressPointer:{type:Number}},computed:{tagLength:function(){return Math.floor(Math.log2(this.ramData.length+1))}},data:function(){return{ramData:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],cacheData:[new Ue,new Ue,new Ue,new Ue],connectorCpuCache:{fromCpuToMemory:null,fromMemoryToCpu:null},connectorCacheMem:{fromCpuToMemory:null,fromMemoryToCpu:null},ramModel:{highlight:null},cacheModel:{highlight:null},memoryUtils:null}},created:function(){this.$emit("RegisterMemory",{write:this.Write,read:this.Read,flush:this.Flush,initialize:this.Initialize})},methods:{Write:function(e,t){var r=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var a,i,c,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(e>r.ramData.length||e<0)){n.next=2;break}throw RangeError("Invalid memory address");case 2:a=0;case 3:if(!(a<r.cacheData.length)){n.next=12;break}if(r.cycleCounter.value+=r.cycleCosts.cacheCheck,r.cacheData[a].tag!=e){n.next=9;break}return n.next=8,r.memoryUtils.writeToCache(a,e,t);case 8:return n.abrupt("return");case 9:a++,n.next=3;break;case 12:i=null,c=0;case 14:if(!(c<r.cacheData.length)){n.next=21;break}if(!r.cacheData[c].isEmpty){n.next=18;break}return i=c,n.abrupt("break",21);case 18:c++,n.next=14;break;case 21:if(null==i&&(i=Math.floor(4*Math.random())),!r.cacheData[i].valid){n.next=27;break}return n.next=25,r.memoryUtils.writeToCache(i,e,t);case 25:n.next=32;break;case 27:return o=r.cacheData[i].tag,n.next=30,r.memoryUtils.writeToRam(i,o);case 30:return n.next=32,r.memoryUtils.writeToCache(i,e,t);case 32:case"end":return n.stop()}}),n)})))()},Read:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function r(){var n,a,i,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!(e>t.ramData.length||e<0)){r.next=2;break}throw RangeError("Invalid memory address");case 2:n=0;case 3:if(!(n<t.cacheData.length)){r.next=12;break}if(t.cycleCounter.value+=t.cycleCosts.cacheCheck,t.cacheData[n].tag!=e){r.next=9;break}return r.next=8,t.memoryUtils.readFromCache(n);case 8:return r.abrupt("return",r.sent);case 9:n++,r.next=3;break;case 12:a=null,i=0;case 14:if(!(i<t.cacheData.length)){r.next=21;break}if(!t.cacheData[i].isEmpty){r.next=18;break}return a=i,r.abrupt("break",21);case 18:i++,r.next=14;break;case 21:if(null==a&&(a=Math.floor(4*Math.random())),!t.cacheData[a].valid){r.next=30;break}return r.next=25,t.memoryUtils.readFromRam(a,e,e);case 25:return r.next=27,t.memoryUtils.readFromCache(a);case 27:return r.abrupt("return",r.sent);case 30:return c=t.cacheData[a].tag,r.next=33,t.memoryUtils.writeToRam(a,c);case 33:return r.next=35,t.memoryUtils.readFromRam(a,e,e);case 35:return r.next=37,t.memoryUtils.readFromCache(a);case 37:return r.abrupt("return",r.sent);case 38:case"end":return r.stop()}}),r)})))()},Flush:function(){for(var e=0;e<this.cacheData.length;e++)this.ramData[this.cacheData[e].tag]=this.cacheData[e].data,this.cacheData[e].valid=!0},Initialize:function(){this.ramData=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.cacheData=[new Ue,new Ue,new Ue,new Ue],this.memoryUtils=new Be(this.ramData,this.cacheData,this.ramModel,this.cacheModel,this.connectorCpuCache,this.connectorCacheMem,this)},RegisterConnector:function(e,t){0==e?this.connectorCpuCache=t:1==e&&(this.connectorCacheMem=t)},RegisterRam:function(e){this.ramModel=e},RegisterCache:function(e){this.cacheModel=e}}};const Xe=p()(Qe,[["render",Ke]]);var Ye=Xe,et={name:"TheTabContainer",components:{CommonButton:Z,CycleCounter:re,RamOnlyMemory:De,DirectCacheMemory:ze,TwoWayCacheMemory:Ze,FullCacheMemory:Ye},emits:["RegisterMemory"],props:{instruction:{type:String},instructionPointer:{type:Number},accumulator:{type:Number},addressPointer:{type:Number},hasStarted:{type:Boolean}},data:function(){return{currentTab:"RamOnlyMemory",activeTab:{RamOnlyMemory:"active",DirectCacheMemory:"",TwoWayCacheMemory:"",FullCacheMemory:""}}},methods:{ChangeCurrentTab:function(e){this.activeTab[this.currentTab]="",this.currentTab=e,this.activeTab[this.currentTab]="active",this.cycleCounter.value=0},RegisterMemory:function(e){this.$emit("RegisterMemory",e)}}};r("1c07");const tt=p()(et,[["render",G]]);var rt=tt,nt={class:"horizontal-container title-bar"},at={class:"horizontal-container title-container"},it={class:"title"},ct={class:"vertical-container additional-info"};function ot(e,t,r,a,i,c){return Object(n["k"])(),Object(n["d"])("div",nt,[Object(n["e"])("div",at,[Object(n["e"])("h1",it,Object(n["o"])(r.title),1),Object(n["e"])("div",ct,[Object(n["e"])("span",null,Object(n["o"])(r.organisation),1),Object(n["e"])("span",null,Object(n["o"])(r.suborganisation),1),Object(n["e"])("span",null,Object(n["o"])(c.authorDate),1)])])])}var st={name:"TheTitle",props:{title:{type:String,required:!0},author:{type:String},organisation:{type:String},suborganisation:{type:String},date:{type:String}},computed:{authorDate:function(){return this.author+", "+this.date}}};r("34ea");const ut=p()(st,[["render",ot]]);var lt=ut,ht=function e(t){Object(x["a"])(this,e),this.name=t};Object(w["a"])(ht,"NextInstruction",new ht("NextInstruction")),Object(w["a"])(ht,"HaltExecution",new ht("HaltExecution")),Object(w["a"])(ht,"EndExecution",new ht("EndExecution")),Object(w["a"])(ht,"MoveToLabel",new ht("MoveToLabel")),Object(w["a"])(ht,"MoveToAddress",new ht("MoveToAddress"));var mt=function(){function e(t,r,n,a){Object(x["a"])(this,e),this.memory=t,this.acc=r,this.ap=n,this.cycleCounter=a}return Object(Fe["a"])(e,[{key:"execute",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=t.instruction,e.next=e.t0===k.HALT.name?3:e.t0===k.NEGATE.name?5:e.t0===k.ACCDEC.name?7:e.t0===k.ACCINC.name?9:e.t0===k.NOP.name?11:e.t0===k.OUTP.name?13:e.t0===k.INP.name?15:e.t0===k.MLOAD.name?17:e.t0===k.DLOAD.name?19:e.t0===k.ILOAD.name?23:e.t0===k.DSTORE.name?27:e.t0===k.ISTORE.name?31:e.t0===k.BRANCH.name?35:e.t0===k.BRZERO.name?37:e.t0===k.BRPOS.name?39:e.t0===k.BRNEG.name?41:e.t0===k.MADD.name?43:e.t0===k.IJUMP.name?47:e.t0===k.LABEL.name?51:"END"===e.t0?53:55;break;case 3:return r=this._executeHalt(),e.abrupt("break",56);case 5:return r=this._executeNegate(),e.abrupt("break",56);case 7:return r=this._executeAccdec(),e.abrupt("break",56);case 9:return r=this._executeAccinc(),e.abrupt("break",56);case 11:return r=this._executeNop(),e.abrupt("break",56);case 13:return r=this._executeOutp(),e.abrupt("break",56);case 15:return r=this._executeInp(),e.abrupt("break",56);case 17:return r=this._executeMload(t.value),e.abrupt("break",56);case 19:return e.next=21,this._executeDload(t.address);case 21:return r=e.sent,e.abrupt("break",56);case 23:return e.next=25,this._executeIload(t.address);case 25:return r=e.sent,e.abrupt("break",56);case 27:return e.next=29,this._executeDstore(t.address);case 29:return r=e.sent,e.abrupt("break",56);case 31:return e.next=33,this._executeIstore(t.address);case 33:return r=e.sent,e.abrupt("break",56);case 35:return r=this._executeBranch(t.label),e.abrupt("break",56);case 37:return r=this._executeBrzero(t.label),e.abrupt("break",56);case 39:return r=this._executeBrpos(t.label),e.abrupt("break",56);case 41:return r=this._executeBrneg(t.label),e.abrupt("break",56);case 43:return e.next=45,this._executeMadd(t.address);case 45:return r=e.sent,e.abrupt("break",56);case 47:return e.next=49,this._executeIjump(t.address);case 49:return r=e.sent,e.abrupt("break",56);case 51:return r=this._executeLabel(),e.abrupt("break",56);case 53:return r=this._endExecution(),e.abrupt("break",56);case 55:throw Error("Unknown instruction");case 56:return e.abrupt("return",r);case 57:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_executeHalt",value:function(){return this.cycleCounter.value+=1,{result:ht.HaltExecution}}},{key:"_executeNegate",value:function(){return this.cycleCounter.value+=1,this.acc.value=-this.acc.value,{result:ht.NextInstruction}}},{key:"_executeAccdec",value:function(){return this.cycleCounter.value+=1,this.acc.value-=1,{result:ht.NextInstruction}}},{key:"_executeAccinc",value:function(){return this.cycleCounter.value+=1,this.acc.value+=1,{result:ht.NextInstruction}}},{key:"_executeNop",value:function(){return this.cycleCounter.value+=1,{result:ht.NextInstruction}}},{key:"_executeOutp",value:function(){return this.cycleCounter.value+=1,{result:ht.NextInstruction}}},{key:"_executeInp",value:function(){return this.cycleCounter.value+=1,this.acc.value=Math.floor(1024*Math.random()),{result:ht.NextInstruction}}},{key:"_executeMload",value:function(e){return this.cycleCounter.value+=1,this.acc.value=e,{result:ht.NextInstruction}}},{key:"_executeDload",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.cycleCounter.value+=1,this.ap.value=t,e.next=4,this.memory.read(t);case 4:return this.acc.value=e.sent,e.abrupt("return",{result:ht.NextInstruction});case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_executeIload",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.cycleCounter.value+=1,this.ap.value=t,e.next=4,this.memory.read(t);case 4:return this.ap.value=e.sent,this.cycleCounter.value+=1,e.next=8,this.memory.read(this.ap.value);case 8:return this.acc.value=e.sent,e.abrupt("return",{result:ht.NextInstruction});case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_executeDstore",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.cycleCounter.value+=1,this.ap.value=t,e.next=4,this.memory.write(t,this.acc.value);case 4:return e.abrupt("return",{result:ht.NextInstruction});case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_executeIstore",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.cycleCounter.value+=1,this.ap.value=t,e.next=4,this.memory.read(t);case 4:return this.ap.value=e.sent,this.cycleCounter.value+=1,e.next=8,this.memory.write(this.ap.value,this.acc.value);case 8:return e.abrupt("return",{result:ht.NextInstruction});case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_executeBranch",value:function(e){return this.cycleCounter.value+=1,{result:ht.MoveToLabel,label:e}}},{key:"_executeBrzero",value:function(e){return this.cycleCounter.value+=1,0==this.acc.value?(this.cycleCounter.value+=1,{result:ht.MoveToLabel,label:e}):{result:ht.NextInstruction}}},{key:"_executeBrpos",value:function(e){return this.cycleCounter.value+=1,this.acc.value>0?(this.cycleCounter.value+=1,{result:ht.MoveToLabel,label:e}):{result:ht.NextInstruction}}},{key:"_executeBrneg",value:function(e){return this.cycleCounter.value+=1,this.acc.value<0?(this.cycleCounter.value+=1,{result:ht.MoveToLabel,label:e}):{result:ht.NextInstruction}}},{key:"_executeMadd",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.cycleCounter.value+=1,this.ap.value=t,e.t0=this.acc.value,e.next=5,this.memory.read(t);case 5:return this.acc.value=e.t0+=e.sent,e.abrupt("return",{result:ht.NextInstruction});case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_executeIjump",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.cycleCounter.value+=1,this.ap.value=t,e.next=4,this.memory.read(t);case 4:return r=e.sent,e.abrupt("return",{result:ht.MoveToAddress,address:r});case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_executeLabel",value:function(){return{result:ht.NextInstruction}}},{key:"_endExecution",value:function(){return this.memory.flush(),{result:ht.EndExecution}}}]),e}();function dt(e){return new Promise((function(t){setTimeout(t,e)}))}var bt="notStarted",ft="started",gt="halted",pt="ended",yt={name:"TheLayout",components:{IconButton:v,CodeEditor:H,TheTabContainer:rt,TheTitle:lt},computed:{hasStarted:function(){return this.currentState!=bt&&this.currentState!=pt}},data:function(){return{controlButtons:[{display:"fa-solid fa-play",function:this.StartProgram,disabled:!1},{display:"fa-solid fa-stop",function:this.StopProgram,disabled:!0},{display:"fa-solid fa-pause",function:this.PauseProgram,disabled:!0},{display:"fa-solid fa-forward-step",function:this.ExecuteInstruction,disabled:!0}],compiler:{compile:null,getInstruction:null,getLabel:null,getNextLine:null,highlightLine:null},memory:{write:null,read:null,flush:null,initialize:null},cpu:null,currentState:bt,instructionPointer:0,accumulator:{value:0},addressPointer:{value:0},instruction:{instruction:"INST",line:0}}},methods:{StartProgram:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("Start program"),e.currentState==pt&&e.ChangeSimulationState(bt),e.currentState!=bt){t.next=13;break}t.prev=3,e.compiler.compile(),t.next=11;break;case 7:return t.prev=7,t.t0=t["catch"](3),console.error("Compilation failed"),t.abrupt("return");case 11:e.Initialize(),e.cpu=new mt(e.memory,e.accumulator,e.addressPointer,e.cycleCounter);case 13:e.ChangeSimulationState(ft),e.compiler.highlightLine(-1);case 15:if(e.currentState!=ft){t.next=22;break}return t.next=18,e.ExecuteInstruction();case 18:return t.next=20,dt(e.instructionWaitTime);case 20:t.next=15;break;case 22:case"end":return t.stop()}}),t,null,[[3,7]])})))()},StopProgram:function(){console.log("Stop program"),this.compiler.highlightLine(-1),this.ChangeSimulationState(bt),this.Initialize()},PauseProgram:function(){console.log("Pause program"),this.compiler.highlightLine(this.compiler.getNextLine(this.instructionPointer)),this.ChangeSimulationState(gt)},ExecuteInstruction:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.currentState==gt&&(e.controlButtons[3].disabled=!0),e.instruction=e.compiler.getInstruction(e.instructionPointer),t.next=5,e.cpu.execute(e.instruction);case 5:r=t.sent,console.log(e.instruction),r.result==ht.NextInstruction?e.instructionPointer++:r.result==ht.MoveToLabel?e.instructionPointer=e.compiler.getLabel(r.label)+1:r.result==ht.MoveToAddress?e.instructionPointer=r.address:r.result==ht.HaltExecution?(console.log("Program halted"),e.instructionPointer++,e.ChangeSimulationState(gt)):r.result==ht.EndExecution&&(console.log("Program end"),e.compiler.highlightLine(-1),e.ChangeSimulationState(pt)),e.currentState==gt&&(e.compiler.highlightLine(e.compiler.getNextLine(e.instructionPointer)),e.controlButtons[3].disabled=!1),t.next=16;break;case 11:t.prev=11,t.t0=t["catch"](0),console.error("Execution failed"),console.error(t.t0),e.ChangeSimulationState(pt);case 16:case"end":return t.stop()}}),t,null,[[0,11]])})))()},RegisterCompiler:function(e){this.compiler=e},RegisterMemory:function(e){this.memory=e},ChangeSimulationState:function(e){switch(e){case bt:this.controlButtons[0].disabled=!1,this.controlButtons[1].disabled=!0,this.controlButtons[2].disabled=!0,this.controlButtons[3].disabled=!0;break;case ft:this.controlButtons[0].disabled=!0,this.controlButtons[1].disabled=!1,this.controlButtons[2].disabled=!1,this.controlButtons[3].disabled=!0;break;case gt:this.controlButtons[0].disabled=!1,this.controlButtons[1].disabled=!1,this.controlButtons[2].disabled=!0,this.controlButtons[3].disabled=!1;break;case pt:this.controlButtons[0].disabled=!1,this.controlButtons[1].disabled=!0,this.controlButtons[2].disabled=!0,this.controlButtons[3].disabled=!0;break}this.currentState=e},Initialize:function(){this.instructionPointer=0,this.accumulator={value:0},this.addressPointer={value:0},this.instruction={instruction:"INST"},this.cycleCounter.value=0,this.memory.initialize()}}};r("7a58");const vt=p()(yt,[["render",h]]);var Ct=vt,Ot={name:"App",components:{TheProcessor:Ct}};r("173f");const Rt=p()(Ot,[["render",a]]);var jt=Rt,xt=Object(n["b"])(jt);xt.config.globalProperties.instructionWaitTime=500,xt.config.globalProperties.connectorFillTime=500,xt.config.globalProperties.connectorFadeTime=1e3,xt.config.globalProperties.highlightFadeTime=1e3,xt.config.globalProperties.cycleCounter={value:0},xt.config.globalProperties.cycleCosts={cacheCheck:2,cacheAccess:10,ramAccess:200},xt.mount("#app")},"5c5f":function(e,t,r){"use strict";r("f26d")},6051:function(e,t,r){},7856:function(e,t,r){},"7a58":function(e,t,r){"use strict";r("8b5b")},"7e21":function(e,t,r){},8600:function(e,t,r){},"8abf":function(e,t,r){},"8b5b":function(e,t,r){},"9c99":function(e,t,r){},a591:function(e,t,r){"use strict";r("7856")},ad06:function(e,t,r){},b0ff:function(e,t,r){"use strict";r("ad06")},c7b8:function(e,t,r){},eb36:function(e,t,r){"use strict";r("2f89")},f114:function(e,t,r){"use strict";r("6051")},f26d:function(e,t,r){}});
//# sourceMappingURL=app.abecf250.js.map