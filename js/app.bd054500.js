(function(e){function t(t){for(var r,o,c=t[0],s=t[1],l=t[2],h=0,d=[];h<c.length;h++)o=c[h],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);u&&u(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==a[s]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/bp22_cpu_perina/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0197":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURUJCQhaLU8ZnFzsAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACQSURBVHja7c6hEQAgDATBtED/zeIxzJAIAnv2xW9IkiRJkiRJkiSdNpYAAAAAAAAAAAAAAAAAAADeA+wOsjsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAP0A2AAAAAAAAAAAAAAAAAACA/oDqHQAAAAAAAAAAAAAAAAAA4H6AJEmSJEmSJEn6pIgJyBT+EOiZi/cAAAAASUVORK5CYII="},"0ef0":function(e,t,n){"use strict";n("7413")},"10c6":function(e,t,n){},1220:function(e,t,n){"use strict";n("6da3")},"1d58":function(e,t,n){},2036:function(e,t,n){"use strict";n("80a4")},3543:function(e,t,n){},3630:function(e,t,n){},"36b0":function(e,t,n){},"426b":function(e,t,n){},"4af3":function(e,t,n){"use strict";n("3630")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),a=n("bfbe");function i(e,t,n,a,i,o){var c=Object(r["resolveComponent"])("the-processor"),s=Object(r["resolveComponent"])("notifications");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createVNode"])(c),Object(r["createVNode"])(s,{position:"bottom right",duration:1e4,classes:"vue-notification custom-notification"})],64)}var o={class:"vertical-container main-container"},c={class:"horizontal-container app-container"},s={class:"vertical-container control-container"},l={class:"horizontal-container button-container"},u={class:"vertical-container program-container"},h={class:"vertical-container model-container"};function d(e,t,n,a,i,d){var m=Object(r["resolveComponent"])("the-title"),g=Object(r["resolveComponent"])("icon-button"),b=Object(r["resolveComponent"])("v-select"),p=Object(r["resolveComponent"])("code-editor"),f=Object(r["resolveComponent"])("the-tab-container");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",o,[Object(r["createVNode"])(m,{title:"Cache Simulator",author:"Daniel Peřina",date:"2022",organisation:"Brno University of Technology",suborganisation:"Faculty of Information Technology",onUpdateSettings:d.Initialize},null,8,["onUpdateSettings"]),Object(r["createElementVNode"])("div",c,[Object(r["createElementVNode"])("div",s,[Object(r["createElementVNode"])("div",l,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(i.controlButtons,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(g,{key:e,displayIcon:e.display,function:e.function,disabled:e.disabled,visible:e.visible,class:"control-button"},null,8,["displayIcon","function","disabled","visible"])})),128))]),Object(r["createElementVNode"])("div",u,[Object(r["createVNode"])(b,{class:"program-select",modelValue:i.selected,"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.selected=e}),options:i.programs,label:"label",reduce:function(e){return e.label},disabled:d.hasStarted,placeholder:"Vyberte ukázkový program","onOption:selected":d.SelectProgram},null,8,["modelValue","options","reduce","disabled","onOption:selected"]),Object(r["createVNode"])(p,{selectedProgram:i.selectedProgram,hasStarted:d.hasStarted,onRegisterCompiler:d.RegisterCompiler},null,8,["selectedProgram","hasStarted","onRegisterCompiler"])])]),Object(r["createElementVNode"])("div",h,[Object(r["createVNode"])(f,{onRegisterMemory:d.RegisterMemory,onRegisterRegs:d.RegisterRegs,hasStarted:d.hasStarted,instruction:i.instruction.instruction,instructionPointer:i.instructionPointer,accumulator:i.accumulator.value,addressPointer:i.addressPointer.value},null,8,["onRegisterMemory","onRegisterRegs","hasStarted","instruction","instructionPointer","accumulator","addressPointer"])])])])}var m=n("1da1"),g=(n("96cf"),n("4a7a")),b=n.n(g),p=(n("6dfc"),[{label:"Základní ukázkový program",code:"; Základní ukázkový program\n; Naplní paměti 7-0 hodnotami jejich adres\n  MLOAD 7\nloop:\n  DSTORE @10\n  ISTORE @10\n  ACCDEC\n  BRPOS loop\n"},{label:"Průchod maticí po sloupcích",code:"; Průchod maticí 4x4\n; Matice je v paměti uložena po řádcích\n; Matice je procházena po sloupcích\n; Při průchodu se pole matice zpracují\n; Zpracované pole matici mají hodnotu 1\n\n  ; Aktuální adresa\n  MLOAD 0\n  DSTORE @20\n  ; Čítač sloupců\n  MLOAD 4\n  DSTORE @21\n  ; Čítač řádků\n  MLOAD 4\n  DSTORE @22\n  ; Základní adresa sloupce\n  MLOAD -1\n  DSTORE @23\n\n  ; Algoritmus\n  FLUSH HALT\ncol:\n  ; Načte se základní adresa sloupce\n  DLOAD @23\n  ACCINC\n  DSTORE @23\n  ; Skok na end pok čítač sloupců == 0\n  DLOAD @21\n  BRZERO end\n  ; Dekrementuje se čítač sloupců\n  ACCDEC\n  DSTORE @21\n  ; Nastaví se čítač řádků\n  MLOAD 4\n  DSTORE @22\n  ; Nastaví aktuální adresu\n  DLOAD @23\n  DSTORE @20\nrow:\n  ; Průchod\n  MLOAD 1\n  ISTORE @20\n  ; Upraví se adresa sloupce na další řádek\n  DLOAD @20\n  ACCINC ACCINC ACCINC ACCINC\n  DSTORE @20\n  ; Dekrementuje se čítač řádku\n  DLOAD @22\n  ACCDEC\n  DSTORE @22\n  ; Skok na col pokud čítač řádků == 0\n  BRZERO col\n  ; Skok na row jinak\n  BRANCH row\nend:\n  HALT\n"},{label:"Průchod maticí po řádcích",code:"; Průchod maticí 4x4\n; Matice je v paměti uložena po řádcích\n; Matice je procházena po řádcích\n; Při průchodu se pole matice zpracují\n; Zpracované pole matici mají hodnotu 1\n  ; Aktuální adresa\n  MLOAD 0\n  DSTORE @20\n  ; Čítač řádků\n  MLOAD 4\n  DSTORE @21\n  ; Čítač sloupců\n  MLOAD 4\n  DSTORE @22\n\n ; Algoritmus\n  FLUSH HALT\nrow:\n  ; Skok na end pokud čítač řádků == 0\n  DLOAD @21\n  BRZERO end\n  ; Dekrementuje se čítač řádků\n  ACCDEC\n  DSTORE @21\n  ; Nastaví se čítač sloupců\n  MLOAD 4\n  DSTORE @22\ncol:\n  ; Průchod\n  MLOAD 1\n  ISTORE @20\n  ; Upraví se adresa na další buňku\n  DLOAD @20\n  ACCINC\n  DSTORE @20\n  ; Dekrementuje se čítač sloupců\n  DLOAD @22\n  ACCDEC\n  DSTORE @22\n  ; Skok na col pokud čítač sloupců == 0\n  BRZERO row\n  ; Skok na row jinak\n  BRANCH col\nend:\n  HALT\n"},{label:"Zpracování pole jedním cyklem",code:"; Zpracování pole pomocí jednoho cyklu\n; Hodnota prvku se nejdřív nastaví na 1\n; poté se inkrementuje\n\n  ; Čítač pro pohyb v poli\n  MLOAD 31\n  DSTORE @3F\n  FLUSH HALT\nloop:\n  ; Nastavit hodnotu na 1 a uložit\n  MLOAD 1\n  ISTORE @3F\n  ; Hodnotu inkrementovat a uložit\n  ILOAD @3F\n  ACCINC\n  ISTORE @3F\n  ; Pokud čítač == 0 tak konec\n  DLOAD @3F\n  BRZERO end\n  ; Jinak pokračovat\n  ACCDEC\n  DSTORE @3F\n  BRANCH loop\nend:\n  HALT\n"},{label:"Zpracování pole dvěma cykly",code:"; Zpracování pole pomocí dvou cyklů\n; Hodnota prvku se nejdřív nastaví na 1\n; poté se inkrementuje\n\n  ; Čítač pro pohyb v poli\n  MLOAD 31\n  DSTORE @3F\n  FLUSH HALT\nloop_one:\n  ; Nastavit hodnota na 1\n  MLOAD 1\n  ISTORE @3F\n  ; Pokud čítač == 0 tak konec cyklu\n  DLOAD @3F\n  BRZERO end_one\n  ; Jinak pokračovat\n  ACCDEC\n  DSTORE @3F\n  BRANCH loop_one\nend_one:\n  ; Čítač pro pohyb v poli (znovu)\n  MLOAD 31\n  DSTORE @3F\nloop_inc:\n  ; Hodnotu inkrementovat\n  ILOAD @3F\n  ACCINC\n  ISTORE @3F\n  ; Pokud čítač == 0 tak konec\n  DLOAD @3F\n  BRZERO end_inc\n  ; Jinak pokračovat\n  ACCDEC\n  DSTORE @3F\n  BRANCH loop_inc\nend_inc:\n  HALT\n"},{label:"Zpracování spojitého seznamu",code:"; Průchod spojitým seznamem\n; Prvek seznamu se skládá ze dvojice:\n; hodnota a odkaz na další prvek\n\n  ; Vytvořit seznam\n  MLOAD 1 DSTORE @04 MLOAD 10 DSTORE @05\n  MLOAD 1 DSTORE @0A MLOAD 16 DSTORE @0B\n  MLOAD 1 DSTORE @10 MLOAD 22 DSTORE @11\n  MLOAD 1 DSTORE @16 MLOAD 28 DSTORE @17\n  MLOAD 1 DSTORE @1C MLOAD 34 DSTORE @1D\n  MLOAD 1 DSTORE @22 MLOAD 40 DSTORE @23\n  MLOAD 1 DSTORE @28 MLOAD 44 DSTORE @29\n  MLOAD 1 DSTORE @2C MLOAD -1 DSTORE @2D\n\n  ; Průchod seznamem\n  FLUSH HALT\n  ; Aktuální prvek\n  MLOAD 4\n  DSTORE @0\nloop:\n  ; Vynulovat hodnotu prvku\n  MLOAD 0\n  ISTORE @0\n  ; Načíst odkaz na další prvek\n  DLOAD @0\n  ACCINC\n  DSTORE @0\n  ILOAD @0\n  DSTORE @0\n  ; Pokud odkaz je záporný tak konec\n  BRNEG end\n  ; Jinak pokračovat\n  BRANCH loop\nend:\n  HALT\n"}]),f=["disabled"];function v(e,t,n,a,i,o){return n.visible?(Object(r["openBlock"])(),Object(r["createElementBlock"])("button",{key:0,class:"icon-button",disabled:n.disabled,onClick:t[0]||(t[0]=function(){return o.Click&&o.Click.apply(o,arguments)})},[Object(r["createElementVNode"])("i",{class:Object(r["normalizeClass"])(n.displayIcon)},null,2)],8,f)):Object(r["createCommentVNode"])("",!0)}var O={name:"IconButton",props:{displayIcon:{type:String,required:!0},function:{type:Function,required:!0},visible:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},methods:{Click:function(){this.function()}}},C=(n("7834"),n("6b0d")),y=n.n(C);const R=y()(O,[["render",v]]);var A=R;function D(e,t,n,a,i,o){var c=Object(r["resolveComponent"])("prism-editor");return Object(r["openBlock"])(),Object(r["createBlock"])(c,{class:"code-editor",modelValue:i.code,"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.code=e}),highlight:o.HighlightCode,"line-numbers":!0,readonly:n.hasStarted},null,8,["modelValue","highlight","readonly"])}var k=n("e57a"),S=(n("cabf"),n("8c7a")),j=n.n(S),w=(n("ac1f"),n("1276"),n("2ca0"),n("8a79"),n("b0c0"),n("fb6a"),n("99af"),n("159b"),n("b64b"),n("d4ec")),E=n("ade3"),x=function e(t){Object(w["a"])(this,e),this.name=t};Object(E["a"])(x,"HALT",new x("HALT")),Object(E["a"])(x,"NEGATE",new x("NEGATE")),Object(E["a"])(x,"ACCDEC",new x("ACCDEC")),Object(E["a"])(x,"ACCINC",new x("ACCINC")),Object(E["a"])(x,"NOP",new x("NOP")),Object(E["a"])(x,"OUTP",new x("OUTP")),Object(E["a"])(x,"INP",new x("INP")),Object(E["a"])(x,"MLOAD",new x("MLOAD")),Object(E["a"])(x,"DLOAD",new x("DLOAD")),Object(E["a"])(x,"ILOAD",new x("ILOAD")),Object(E["a"])(x,"DSTORE",new x("DSTORE")),Object(E["a"])(x,"ISTORE",new x("ISTORE")),Object(E["a"])(x,"BRANCH",new x("BRANCH")),Object(E["a"])(x,"BRZERO",new x("BRZERO")),Object(E["a"])(x,"BRPOS",new x("BRPOS")),Object(E["a"])(x,"BRNEG",new x("BRNEG")),Object(E["a"])(x,"MADD",new x("MADD")),Object(E["a"])(x,"IJUMP",new x("IJUMP")),Object(E["a"])(x,"LABEL",new x("LABEL")),Object(E["a"])(x,"FLUSH",new x("FLUSH"));var T=1;function M(e,t){var n=e.split("\n");T=1;while(n.length>0){var r=n.shift().split(/\s+/);while(r.length>0)N(r,t);T++}t.push({instruction:"END"})}function N(e,t){var n=e.shift();if(n.startsWith(";"))e.length=0;else if(n.endsWith(":"))V(x.LABEL.name,n.slice(0,-1),t);else switch(n.toUpperCase()){case x.HALT.name:L(x.HALT.name,t);break;case x.NEGATE.name:L(x.NEGATE.name,t);break;case x.ACCDEC.name:L(x.ACCDEC.name,t);break;case x.ACCINC.name:L(x.ACCINC.name,t);break;case x.NOP.name:L(x.NOP.name,t);break;case x.OUTP.name:L(x.OUTP.name,t);break;case x.INP.name:L(x.INP.name,t);break;case x.MLOAD.name:B(x.MLOAD.name,e.shift(),t);break;case x.DLOAD.name:P(x.DLOAD.name,e.shift(),t);break;case x.ILOAD.name:P(x.ILOAD.name,e.shift(),t);break;case x.DSTORE.name:P(x.DSTORE.name,e.shift(),t);break;case x.ISTORE.name:P(x.ISTORE.name,e.shift(),t);break;case x.BRANCH.name:V(x.BRANCH.name,e.shift(),t);break;case x.BRZERO.name:V(x.BRZERO.name,e.shift(),t);break;case x.BRPOS.name:V(x.BRPOS.name,e.shift(),t);break;case x.BRNEG.name:V(x.BRNEG.name,e.shift(),t);break;case x.MADD.name:P(x.MADD.name,e.shift(),t);break;case x.IJUMP.name:P(x.IJUMP.name,e.shift(),t);break;case x.FLUSH.name:L(x.FLUSH.name,t);break;case"":break;default:throw Error("Unknown instruction at line ".concat(T," (").concat(n,")."))}}function L(e,t){t.push({instruction:e,line:T})}function P(e,t,n){if(!I(t))throw Error("Invalid parameter at line ".concat(T," (").concat(e," ").concat(t,")."));t=parseInt(t.substring(1),16),n.push({instruction:e,address:t,line:T})}function B(e,t,n){if(!H(t))throw Error("Invalid parameter at line ".concat(T," (").concat(e," ").concat(t,")."));t=parseInt(t),n.push({instruction:e,value:t,line:T})}function V(e,t,n){if(F(t))throw Error("Invalid label at line ".concat(T," (label ").concat(t,"). Label must not be keyword."));n.push({instruction:e,label:t,line:T})}function I(e){var t=e.startsWith("@");return t&&(e=e.substring(1),t=U(e)),t}function F(e){var t=!1;return Object.keys(x).forEach((function(n){n===e.toUpperCase()&&(t=!0)})),t}function H(e){return/^-?\d+$/.test(e)}function U(e){return/[0-9a-f]+$/i.test(e)}var z={operator:/\b(?:HALT|NEGATE|ACCDEC|ACCINC|NOP|OUTP|INP|MLOAD|DLOAD|ILOAD|DSTORE|ISTORE|BRANCH|BRZERO|BRPOS|BRNEG|MADD|IJUMP|LABEL|FLUSH)\b/i,comment:/;.*/,string:/@[0-9a-f]+\b/i},_=(n("10c6"),{name:"CodeEditor",components:{PrismEditor:k["a"]},emits:["RegisterCompiler"],props:{hasStarted:{type:Boolean,required:!0},selectedProgram:{type:String,default:""}},watch:{selectedProgram:function(e){this.code=e}},data:function(){return{code:"",instructionList:[],labelDict:{},highlightedLine:-1}},created:function(){this.code=this.selectedProgram,this.$emit("RegisterCompiler",{compile:this.CompileProgram,getInstruction:this.GetInstruction,getLabel:this.GetLabel,getNextLine:this.GetNextLine,highlightLine:this.HighlightLine})},methods:{HighlightCode:function(e){return j.a.languages.bp22=z,j.a.highlight(e,j.a.languages.bp22)},HighlightLine:function(e){if(this.highlightedLine>=0){var t=document.querySelector(".prism-editor__line-number:nth-child(".concat(this.highlightedLine+1,")"));if(!t)return;t.classList.remove("highlight-line")}if(this.highlightedLine=e,e>=0){var n=document.querySelector(".prism-editor__line-number:nth-child(".concat(e+1,")"));if(!n)return;n.classList.add("highlight-line")}},CompileProgram:function(){for(var e in this.instructionList=[],this.labelDict={},M(this.code,this.instructionList),this.instructionList)"LABEL"==this.instructionList[e].instruction&&(this.labelDict[this.instructionList[e].label]=parseInt(e));console.log(this.instructionList),console.log(this.labelDict)},GetInstruction:function(e){if(e<this.instructionList.length)return this.instructionList[e];throw RangeError("Invalid instruction address (".concat(e,")."))},GetLabel:function(e){if(e in this.labelDict)return this.labelDict[e];throw RangeError("Unknown label (".concat(e,")."))},GetNextLine:function(e){return e<this.instructionList.length?this.instructionList[e].line:-1}}});n("2036");const G=y()(_,[["render",D]]);var W=G,Z={class:"horizontal-container tab-button-row"},$={class:"horizontal-container tab-container"};function J(e,t,n,a,i,o){var c=Object(r["resolveComponent"])("tab-button"),s=Object(r["resolveComponent"])("cycle-counter");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createElementVNode"])("div",Z,[Object(r["createVNode"])(c,{displayValue:"RAM-Only Memory",disabled:n.hasStarted,active:i.activeTab["RamOnlyMemory"],function:function(){return o.ChangeCurrentTab("RamOnlyMemory")}},null,8,["disabled","active","function"]),Object(r["createVNode"])(c,{displayValue:"Direct Cache",disabled:n.hasStarted,active:i.activeTab["DirectCacheMemory"],function:function(){return o.ChangeCurrentTab("DirectCacheMemory")}},null,8,["disabled","active","function"]),Object(r["createVNode"])(c,{displayValue:"Two-Way Cache",disabled:n.hasStarted,active:i.activeTab["TwoWayCacheMemory"],function:function(){return o.ChangeCurrentTab("TwoWayCacheMemory")}},null,8,["disabled","active","function"]),Object(r["createVNode"])(c,{displayValue:"Full Cache",disabled:n.hasStarted,active:i.activeTab["FullCacheMemory"],function:function(){return o.ChangeCurrentTab("FullCacheMemory")}},null,8,["disabled","active","function"]),Object(r["createVNode"])(s,{cycles:this.cycleCounter.value},null,8,["cycles"])]),Object(r["createElementVNode"])("div",$,[(Object(r["openBlock"])(),Object(r["createBlock"])(Object(r["resolveDynamicComponent"])(i.currentTab),{onRegisterMemory:t[0]||(t[0]=function(t){return e.$emit("RegisterMemory",t)}),onRegisterRegs:t[1]||(t[1]=function(t){return e.$emit("RegisterRegs",t)}),instruction:n.instruction,instructionPointer:n.instructionPointer,accumulator:n.accumulator,addressPointer:n.addressPointer},null,8,["instruction","instructionPointer","accumulator","addressPointer"]))])],64)}n("a9e3");var q=["disabled"];function Q(e,t,n,a,i,o){return Object(r["openBlock"])(),Object(r["createElementBlock"])("button",{class:Object(r["normalizeClass"])("tab-button"+(n.active?" active":"")),disabled:n.disabled,onClick:t[0]||(t[0]=function(){return o.Click&&o.Click.apply(o,arguments)})},[Object(r["createElementVNode"])("span",null,Object(r["toDisplayString"])(n.displayValue),1)],10,q)}var Y={name:"TabButton",props:{displayValue:{type:String,required:!0},function:{type:Function,required:!0},disabled:{type:Boolean,default:!1},active:{type:Boolean,default:!1}},methods:{Click:function(){this.function()}}};n("e5d3");const K=y()(Y,[["render",Q]]);var X=K,ee={class:"vertical-container cycle-counter"},te=Object(r["createElementVNode"])("span",{class:"cycle-label"},"Processor cycles:",-1),ne={class:"cycle-value"};function re(e,t,n,a,i,o){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",ee,[te,Object(r["createElementVNode"])("span",ne,Object(r["toDisplayString"])(o.cycleCounterFormat),1)])}var ae={name:"CycleCounter",props:{cycles:{required:!0}},computed:{cycleCounterFormat:function(){return this.cycles.toLocaleString(void 0)}}};n("b0ff");const ie=y()(ae,[["render",re]]);var oe=ie;function ce(e,t,n,a,i,o){var c=Object(r["resolveComponent"])("processor-model"),s=Object(r["resolveComponent"])("connector"),l=Object(r["resolveComponent"])("ram-model");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createVNode"])(c,{instruction:n.instruction,instuctionPointer:n.instructionPointer,accumulator:n.accumulator,addressPointer:n.addressPointer,onRegisterRegs:t[0]||(t[0]=function(t){return e.$emit("RegisterRegs",t)})},null,8,["instruction","instuctionPointer","accumulator","addressPointer"]),Object(r["createVNode"])(s,{id:0,width:6,onRegisterConnector:o.RegisterConnector},null,8,["onRegisterConnector"]),Object(r["createVNode"])(l,{data:i.ramData,onRegisterRam:o.RegisterRam},null,8,["data","onRegisterRam"])],64)}n("d3b7"),n("25f0");var se={class:"vertical-container processor"},le=Object(r["createElementVNode"])("span",{class:"title"},"CPU",-1),ue={class:"horizontal-container registers"};function he(e,t,n,a,i,o){var c=Object(r["resolveComponent"])("register-label");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",se,[le,Object(r["createVNode"])(c,{value:n.instruction,class:"current-instruction"},null,8,["value"]),Object(r["createElementVNode"])("div",ue,[Object(r["createVNode"])(c,{label:"IP",value:n.instuctionPointer},null,8,["value"]),Object(r["createVNode"])(c,{label:"ACC",value:n.accumulator,onRegisterLabel:o.RegisterACC},null,8,["value","onRegisterLabel"])]),Object(r["createVNode"])(c,{label:"AP",value:o.addressPointerString,class:"address-pointer",onRegisterLabel:o.RegisterAP},null,8,["value","onRegisterLabel"])])}var de={class:"register-label"},me={class:"value"};function ge(e,t,n,a,i,o){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",de,[Object(r["withDirectives"])(Object(r["createElementVNode"])("span",{class:"title"},Object(r["toDisplayString"])(n.label),513),[[r["vShow"],null!=n.label]]),Object(r["createElementVNode"])("div",me,[Object(r["createElementVNode"])("div",{style:Object(r["normalizeStyle"])(i.highlightStyle)},[Object(r["createElementVNode"])("span",null,Object(r["toDisplayString"])(n.value),1)],4)])])}n("4d90");var be={name:"RegisterLabel",emits:["RegisterLabel"],props:{label:{type:String,default:null},value:{required:!0}},data:function(){return{highlightStyle:{background:this.colors.secondaryColor+"00"},fadeOut:{interval:null,timeout:null}}},created:function(){this.$emit("RegisterLabel",{highlight:this.Highlight})},methods:{Highlight:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.times.highlightFade;if(this.animations.enable){this.ResetIntervals(),this.ResetHighlight();var n,r=t;this.fadeOut.interval=setInterval((function(){n=Math.floor(r/t*255).toString(16).padStart(2,"0"),e.highlightStyle.background=e.colors.secondaryColor+n,r-=10}),10),this.fadeOut.timeout=setTimeout((function(){clearInterval(e.fadeOut.interval),e.fadeOut.interval=null,e.fadeOut.timeout=null}),t)}},ResetHighlight:function(){this.highlightStyle.background=this.colors.secondaryColor+"00"},ResetIntervals:function(){null!=this.fadeOut.interval&&(clearInterval(this.fadeOut.interval),clearTimeout(this.fadeOut.timeout),this.fadeOut.interval=null,this.fadeOut.timeout=null)}}};n("972f");const pe=y()(be,[["render",ge]]);var fe=pe,ve={name:"ProcessorModel",components:{RegisterLabel:fe},emits:["RegisterRegs"],props:{instruction:{type:String},instuctionPointer:{type:Number},accumulator:{type:Number},addressPointer:{type:Number,default:0}},computed:{addressPointerString:function(){return"0x".concat(this.addressPointer.toString(16).toUpperCase())}},data:function(){return{registers:{highlightACC:null,highlightAP:null}}},methods:{RegisterACC:function(e){this.registers.highlightACC=e.highlight,this.$emit("RegisterRegs",this.registers)},RegisterAP:function(e){this.registers.highlightAP=e.highlight,this.$emit("RegisterRegs",this.registers)}}};n("e2bb");const Oe=y()(ve,[["render",he]]);var Ce=Oe,ye={class:"ram"},Re=Object(r["createElementVNode"])("tr",null,[Object(r["createElementVNode"])("th",{class:"address"}," Address "),Object(r["createElementVNode"])("th",{class:"value"}," Data ")],-1),Ae={class:"address"},De={class:"hex"},ke={class:"bin"},Se={class:"value"};function je(e,t,n,a,i,o){return Object(r["openBlock"])(),Object(r["createElementBlock"])("table",ye,[Re,(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(n.data.length,(function(e){return Object(r["openBlock"])(),Object(r["createElementBlock"])("tr",{key:e,style:Object(r["normalizeStyle"])(i.rowHighlightId==e-1?i.rowHighlightStyle:"")},[Object(r["createElementVNode"])("td",Ae,[Object(r["createElementVNode"])("span",De,Object(r["toDisplayString"])(o.FormatAddressHex(4*(e-1))),1),Object(r["createElementVNode"])("span",ke," ("+Object(r["toDisplayString"])(o.FormatAddressBin(4*(e-1)))+")",1)]),Object(r["createElementVNode"])("td",Se,Object(r["toDisplayString"])(n.data[e-1]),1)],4)})),128))])}n("90d7");var we={name:"RamModel",emits:["RegisterRam"],props:{data:{type:Array,required:!0}},data:function(){return{rowHighlightStyle:{background:this.colors.secondaryColor+"00"},rowHighlightId:-1,rowHighlight:{interval:null,timeout:null}}},computed:{dataLength:function(){return 4*this.data.length}},created:function(){this.$emit("RegisterRam",{highlight:this.HighlightRow})},methods:{FormatAddressHex:function(e){var t=Math.log2(this.dataLength)/4;return t=t%1==0?Math.floor(t):Math.floor(t)+1,"0x".concat(e.toString(16).padStart(t,"0").toUpperCase())},FormatAddressBin:function(e){var t=Math.log2(this.dataLength);return t=t%1==0?Math.floor(t):Math.floor(t)+1,"".concat(e.toString(2).padStart(t,"0"))},HighlightRow:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.times.highlightFade;if(this.animations.enable){this.ResetRowIntervals(),this.ResetRowHighlight(),this.rowHighlightId=Math.floor(e/4);var r,a=n;this.rowHighlight.interval=setInterval((function(){r=Math.floor(a/n*255).toString(16).padStart(2,"0"),t.rowHighlightStyle.background=t.colors.secondaryColor+r,a-=10}),10),this.rowHighlight.timeout=setTimeout((function(){clearInterval(t.rowHighlight.interval),t.rowHighlight.interval=null,t.rowHighlight.timeout=null}),n)}},ResetRowIntervals:function(){null!=this.rowHighlight.interval&&(clearInterval(this.rowHighlight.interval),clearTimeout(this.rowHighlight.timeout),this.rowHighlight.interval=null,this.rowHighlight.timeout=null)},ResetRowHighlight:function(){this.rowHighlightStyle.background=this.colors.secondaryColor+"00"}}};n("dca8");const Ee=y()(we,[["render",je]]);var xe=Ee;function Te(e,t,n,a,i,o){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:"connector",style:Object(r["normalizeStyle"])(i.connectorStyle)},[Object(r["createElementVNode"])("div",{class:"bar",style:Object(r["normalizeStyle"])(i.barStyle)},null,4)],4)}var Me={name:"Connector",emits:["RegisterConnector"],props:{id:{type:Number,required:!0},width:{type:Number,default:4}},data:function(){return{connectorStyle:{width:this.width+"rem"},barStyle:{width:"0%",opacity:1,"margin-left":"initial"},fillBar:{interval:null,timeout:null},fadeOut:{interval:null,timeout:null}}},created:function(){this.$emit("RegisterConnector",this.id,{fromCpuToMemory:this.FromCpuToMemory,fromMemoryToCpu:this.FromMemoryToCpu})},methods:{FromCpuToMemory:function(){var e=arguments,t=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.length>0&&void 0!==e[0]?e[0]:t.times.connectorFill,a=e.length>1&&void 0!==e[1]?e[1]:t.times.connectorFade,!t.animations.enable){n.next=7;break}return t.ResetIntervals(),t.ResetBar("initial"),n.next=7,t.AnimateBar(r,a);case 7:case"end":return n.stop()}}),n)})))()},FromMemoryToCpu:function(){var e=arguments,t=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.length>0&&void 0!==e[0]?e[0]:t.times.connectorFill,a=e.length>1&&void 0!==e[1]?e[1]:t.times.connectorFade,!t.animations.enable){n.next=7;break}return t.ResetIntervals(),t.ResetBar("auto"),n.next=7,t.AnimateBar(r,a);case 7:case"end":return n.stop()}}),n)})))()},AnimateBar:function(e,t){var n=this;return Object(m["a"])(regeneratorRuntime.mark((function r(){var a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=10,n.fillBar.interval=setInterval((function(){n.barStyle.width=a/e*100+"%",a+=10}),10),i=new Promise((function(t){n.fillBar.timeout=setTimeout((function(){clearInterval(n.fillBar.interval),n.fillBar.interval=null,n.fillBar.timeout=null,t()}),e)})),r.next=5,i;case 5:n.fadeOut.interval=setInterval((function(){n.barStyle.opacity=a/t,a-=10}),10),n.fadeOut.timeout=setTimeout((function(){clearInterval(n.fadeOut.interval),n.fadeOut.interval=null,n.fadeOut.timeout=null}),t);case 7:case"end":return r.stop()}}),r)})))()},ResetBar:function(e){this.barStyle.width="0%",this.barStyle.opacity=1,this.barStyle["margin-left"]=e},ResetIntervals:function(){null!=this.fillBar.interval&&(clearInterval(this.fillBar.interval),clearTimeout(this.fillBar.timeout),this.fillBar.interval=null,this.fillBar.timeout=null),null!=this.fadeOut.interval&&(clearInterval(this.fadeOut.interval),clearTimeout(this.fadeOut.timeout),this.fadeOut.interval=null,this.fadeOut.timeout=null)}}};n("f8dc");const Ne=y()(Me,[["render",Te]]);var Le=Ne,Pe={name:"RamOnlyMemory",components:{ProcessorModel:Ce,RamModel:xe,Connector:Le},emits:["RegisterMemory","RegisterRegs"],props:{instruction:{type:String},instructionPointer:{type:Number},accumulator:{type:Number},addressPointer:{type:Number}},data:function(){return{ramData:[],connector:{fromCpuToMemory:null,fromMemoryToCpu:null},ramModel:{highlight:null}}},computed:{ramDataLength:function(){return 4*this.ramData.length}},created:function(){this.$emit("RegisterMemory",{write:this.Write,read:this.Read,flush:function(){},initialize:this.Initialize}),this.Initialize()},methods:{Write:function(e,t){var n=this;return Object(m["a"])(regeneratorRuntime.mark((function r(){var a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!(e<n.ramDataLength&&e>=0)){r.next=10;break}return a=e>>2,i=3&e,r.next=5,n.connector.fromCpuToMemory();case 5:n.ramModel.highlight(e),n.cycleCounter.value+=n.cycleCosts.ramAccess,n.ramData[a][i]=t,r.next=11;break;case 10:throw RangeError("Invalid memory address (0x".concat(e.toString(16).toUpperCase(),")."));case 11:case"end":return r.stop()}}),r)})))()},Read:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(e<t.ramDataLength&&e>=0)){n.next=10;break}return r=e>>2,a=3&e,t.cycleCounter.value+=t.cycleCosts.ramAccess,t.ramModel.highlight(e),n.next=7,t.connector.fromMemoryToCpu();case 7:return n.abrupt("return",t.ramData[r][a]);case 10:throw RangeError("Invalid memory address (0x".concat(e.toString(16).toUpperCase(),")."));case 11:case"end":return n.stop()}}),n)})))()},Initialize:function(){this.ramData=Array(this.memorySize.ram);for(var e=0;e<this.memorySize.ram;e++)this.ramData[e]=[0,0,0,0]},RegisterConnector:function(e,t){this.connector=t},RegisterRam:function(e){this.ramModel=e}}};const Be=y()(Pe,[["render",ce]]);var Ve=Be;function Ie(e,t,n,a,i,o){var c=Object(r["resolveComponent"])("processor-model"),s=Object(r["resolveComponent"])("connector"),l=Object(r["resolveComponent"])("cache-model"),u=Object(r["resolveComponent"])("ram-model");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createVNode"])(c,{instruction:n.instruction,instuctionPointer:n.instructionPointer,accumulator:n.accumulator,addressPointer:n.addressPointer,onRegisterRegs:t[0]||(t[0]=function(t){return e.$emit("RegisterRegs",t)})},null,8,["instruction","instuctionPointer","accumulator","addressPointer"]),Object(r["createVNode"])(s,{id:0,width:3.5,onRegisterConnector:o.RegisterConnector},null,8,["width","onRegisterConnector"]),Object(r["createVNode"])(l,{data:i.cacheData,tagLength:o.tagLength,onSwitchValidBit:o.SwitchValidBit,onRegisterCache:o.RegisterCache},null,8,["data","tagLength","onSwitchValidBit","onRegisterCache"]),Object(r["createVNode"])(s,{id:1,width:3.5,onRegisterConnector:o.RegisterConnector},null,8,["width","onRegisterConnector"]),Object(r["createVNode"])(u,{data:i.ramData,onRegisterRam:o.RegisterRam},null,8,["data","onRegisterRam"])],64)}var Fe=n("2909"),He={class:"cache"},Ue=Object(r["createElementVNode"])("tr",null,[Object(r["createElementVNode"])("th",{class:"address"}," Address "),Object(r["createElementVNode"])("th",{class:"valid"}," V "),Object(r["createElementVNode"])("th",{class:"tag"}," Tag "),Object(r["createElementVNode"])("th",{class:"value"}," Data ")],-1),ze={class:"address"},_e={class:"hex"},Ge={class:"bin"},We=["onDblclick"],Ze={class:"value"};function $e(e,t,n,a,i,o){return Object(r["openBlock"])(),Object(r["createElementBlock"])("table",He,[Ue,(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(n.data.length,(function(e){return Object(r["openBlock"])(),Object(r["createElementBlock"])("tr",{key:e,style:Object(r["normalizeStyle"])(i.rowHighlightId==e-1?i.rowHighlightStyle:"")},[Object(r["createElementVNode"])("td",ze,[Object(r["createElementVNode"])("span",_e,Object(r["toDisplayString"])(o.FormatAddressHex(4*(e-1))),1),Object(r["createElementVNode"])("span",Ge," ("+Object(r["toDisplayString"])(o.FormatAddressBin(4*(e-1)))+")",1)]),Object(r["createElementVNode"])("td",{class:"valid",style:Object(r["normalizeStyle"])(n.data[e-1].valid?"":i.validFalseStyle),onDblclick:function(t){return o.ValidDblClick(e-1)}},Object(r["toDisplayString"])(n.data[e-1].valid?"T":"F"),45,We),Object(r["createElementVNode"])("td",{class:"tag",style:Object(r["normalizeStyle"])(i.tagHighlightId==e-1?i.tagHighlightStyle:"")},[Object(r["createElementVNode"])("span",null,Object(r["toDisplayString"])(o.FormatAddressBin(n.data[e-1].tag,n.tagLength)),1)],4),Object(r["createElementVNode"])("td",Ze,Object(r["toDisplayString"])(n.data[e-1].data),1)],4)})),128))])}var Je={name:"CacheModel",emits:["RegisterCache","SwitchValidBit"],props:{id:{type:Number,default:0},data:{type:Array,required:!0},tagLength:{type:Number,default:1}},data:function(){return{rowHighlightStyle:{background:this.colors.secondaryColor+"00"},tagHighlightStyle:{background:this.colors.infoColor+"00"},validFalseStyle:{color:this.colors.secondaryColorLight,"font-weight":"bold"},rowHighlightId:-1,rowHighlight:{interval:null,timeout:null},tagHighlightId:-1,tagHighlight:{interval:null,timeout:null}}},computed:{dataLength:function(){return 4*this.data.length}},created:function(){this.$emit("RegisterCache",{highlight:this.HighlightRow,highlightTag:this.HighlightTag},this.id)},methods:{FormatAddressHex:function(e,t){var n;return n="undefined"==typeof t?Math.log2(this.dataLength)/4:t/4,n=n%1==0?Math.floor(n):Math.floor(n)+1,"0x".concat(e.toString(16).padStart(n,"0").toUpperCase())},FormatAddressBin:function(e,t){var n;return n="undefined"==typeof t?Math.log2(this.dataLength):t,n=n%1==0?Math.floor(n):Math.floor(n)+1,"".concat(e.toString(2).padStart(n,"0"))},ValidDblClick:function(e){this.$emit("SwitchValidBit",e,this.id)},HighlightRow:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.times.highlightFade;if(this.animations.enable){this.ResetRowIntervals(),this.ResetRowHighlight(),this.rowHighlightId=Math.floor(e/4);var r,a=n;this.rowHighlight.interval=setInterval((function(){r=Math.floor(a/n*255).toString(16).padStart(2,"0"),t.rowHighlightStyle.background=t.colors.secondaryColor+r,a-=10}),10),this.rowHighlight.timeout=setTimeout((function(){clearInterval(t.rowHighlight.interval),t.rowHighlight.interval=null,t.rowHighlight.timeout=null}),n)}},ResetRowIntervals:function(){null!=this.rowHighlight.interval&&(clearInterval(this.rowHighlight.interval),clearTimeout(this.rowHighlight.timeout),this.rowHighlight.interval=null,this.rowHighlight.timeout=null)},ResetRowHighlight:function(){this.rowHighlightStyle.background=this.colors.secondaryColor+"00"},HighlightTag:function(e){var t=arguments,n=this;return Object(m["a"])(regeneratorRuntime.mark((function r(){var a,i,o,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=t.length>1&&void 0!==t[1]?t[1]:n.times.highlightFade,!n.animations.enable){r.next=10;break}return n.ResetTagIntervals(),n.ResetTagHighlight(),n.tagHighlightId=e,i=a,n.tagHighlight.interval=setInterval((function(){o=Math.floor(i/a*255).toString(16).padStart(2,"0"),n.tagHighlightStyle.background=n.colors.infoColor+o,i-=10}),10),c=new Promise((function(e){n.tagHighlight.timeout=setTimeout((function(){clearInterval(n.tagHighlight.interval),n.tagHighlight.interval=null,n.tagHighlight.timeout=null,e()}),a)})),r.next=10,c;case 10:case"end":return r.stop()}}),r)})))()},ResetTagIntervals:function(){null!=this.tagHighlight.interval&&(clearInterval(this.tagHighlight.interval),clearTimeout(this.tagHighlight.timeout),this.tagHighlight.interval=null,this.tagHighlight.timeout=null)},ResetTagHighlight:function(){this.tagHighlightStyle.background=this.colors.infoColor+"00"}}};n("1220");const qe=y()(Je,[["render",$e]]);var Qe=qe,Ye=n("bee2"),Ke=function(){function e(t,n,r,a,i,o,c){Object(w["a"])(this,e),this.ram=t,this.cache=n,this.ramModel=r,this.cacheModel=a,this.connectorCpuCache=i,this.connectorCacheMem=o,this.config=c}return Object(Ye["a"])(e,[{key:"getRamAddressFromCache",value:function(e,t,n){return e<<n|t}},{key:"readFromRam",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t>>2,o=n>>2,this.ramModel.highlight(n),"undefined"!=typeof a){e.next=10;break}return e.next=6,this.connectorCacheMem.fromMemoryToCpu();case 6:this.cache[i].update(!0,r,this.ram[o]),this.cacheModel.highlight(t),e.next=14;break;case 10:return e.next=12,this.connectorCacheMem[a].fromMemoryToCpu();case 12:this.cache[a][i].update(!0,r,this.ram[o]),this.cacheModel[a].highlight(t);case 14:this.config.cycleCounter.value+=this.config.cycleCosts.ramAccess;case 15:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"writeToRam",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t>>2,i=n>>2,"undefined"!=typeof r){e.next=9;break}return this.cacheModel.highlight(t),e.next=6,this.connectorCacheMem.fromCpuToMemory();case 6:this.ram[i]=Object(Fe["a"])(this.cache[a].data),e.next=13;break;case 9:return this.cacheModel[r].highlight(t),e.next=12,this.connectorCacheMem[r].fromCpuToMemory();case 12:this.ram[i]=Object(Fe["a"])(this.cache[r][a].data);case 13:this.ramModel.highlight(n),this.config.cycleCounter.value+=this.config.cycleCosts.ramAccess;case 15:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"readFromCache",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t>>2,i=3&t,"undefined"!=typeof n){e.next=9;break}return this.cacheModel.highlight(t),e.next=6,this.connectorCpuCache.fromMemoryToCpu();case 6:r=this.cache[a].data[i],e.next=13;break;case 9:return this.cacheModel[n].highlight(t),e.next=12,this.connectorCpuCache[n].fromMemoryToCpu();case 12:r=this.cache[n][a].data[i];case 13:return this.config.cycleCounter.value+=this.config.cycleCosts.cacheAccess,e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"writeToCache",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t>>2,o=3&t,"undefined"!=typeof a){e.next=9;break}return e.next=5,this.connectorCpuCache.fromCpuToMemory();case 5:this.cache[i].update(!1,n,r,o),this.cacheModel.highlight(t),e.next=13;break;case 9:return e.next=11,this.connectorCpuCache[a].fromCpuToMemory();case 11:this.cache[a][i].update(!1,n,r,o),this.cacheModel[a].highlight(t);case 13:this.config.cycleCounter.value+=this.config.cycleCosts.cacheAccess;case 14:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()}]),e}(),Xe=function(){function e(){Object(w["a"])(this,e),this.valid=!0,this.tag=0,this.data=[0,0,0,0],this.isEmpty=!0}return Object(Ye["a"])(e,[{key:"update",value:function(e,t,n,r){this.valid=e,this.tag=t,"undefined"==typeof r?this.data=Object(Fe["a"])(n):this.data[r]=n,this.isEmpty&&(this.isEmpty=!1)}},{key:"switchValid",value:function(){this.valid=!this.valid}}]),e}();function et(e){return new Promise((function(t){setTimeout(t,e)}))}var tt={name:"DirectCacheMemory",components:{ProcessorModel:Ce,RamModel:xe,CacheModel:Qe,Connector:Le},emits:["RegisterMemory","RegisterRegs"],props:{instruction:{type:String},instructionPointer:{type:Number},accumulator:{type:Number},addressPointer:{type:Number}},computed:{tagLength:function(){return Math.floor(Math.log2(this.ramDataLength+1))-Math.floor(Math.log2(this.cacheDataLength+1))},cacheAddressBits:function(){return Math.floor(Math.log2(this.cacheDataLength+1))},ramDataLength:function(){return 4*this.ramData.length},cacheDataLength:function(){return 4*this.cacheData.length}},data:function(){return{ramData:[],cacheData:[],connectorCpuCache:{fromCpuToMemory:null,fromMemoryToCpu:null},connectorCacheMem:{fromCpuToMemory:null,fromMemoryToCpu:null},ramModel:{highlight:null},cacheModel:{highlight:null,highlightTag:null},memoryUtils:null}},created:function(){this.$emit("RegisterMemory",{write:this.Write,read:this.Read,flush:this.Flush,initialize:this.Initialize}),this.Initialize()},methods:{Write:function(e,t){var n=this;return Object(m["a"])(regeneratorRuntime.mark((function r(){var a,i,o,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!(e>n.ramDataLength||e<0)){r.next=2;break}throw RangeError("Invalid memory address (0x".concat(e.toString(16).toUpperCase(),")."));case 2:return a=e&(1<<n.cacheAddressBits)-1,i=a>>2,o=e>>n.cacheAddressBits,n.cycleCounter.value+=n.cycleCosts.cacheCheck,r.next=8,n.cacheModel.highlightTag(i,Math.min(n.times.highlightFade/2,500));case 8:if(n.cacheData[i].tag!=o||n.cacheData[i].isEmpty){r.next=13;break}return r.next=11,n.memoryUtils.writeToCache(a,o,t);case 11:r.next=29;break;case 13:if(!n.cacheData[i].valid){r.next=20;break}return r.next=16,n.memoryUtils.readFromRam(a,e,o);case 16:return r.next=18,n.memoryUtils.writeToCache(a,o,t);case 18:r.next=29;break;case 20:return c=n.memoryUtils.getRamAddressFromCache(n.cacheData[i].tag,a,n.cacheAddressBits),r.next=23,n.memoryUtils.writeToRam(a,c);case 23:return r.next=25,et(n.times.connectorFade/2);case 25:return r.next=27,n.memoryUtils.readFromRam(a,e,o);case 27:return r.next=29,n.memoryUtils.writeToCache(a,o,t);case 29:case"end":return r.stop()}}),r)})))()},Read:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var r,a,i,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(e>t.ramDataLength||e<0)){n.next=2;break}throw RangeError("Invalid memory address (0x".concat(e.toString(16).toUpperCase(),")."));case 2:return r=e&(1<<t.cacheAddressBits)-1,a=r>>2,i=e>>t.cacheAddressBits,t.cycleCounter.value+=t.cycleCosts.cacheCheck,n.next=8,t.cacheModel.highlightTag(a,Math.min(t.times.highlightFade/2,500));case 8:if(t.cacheData[a].tag!=i||t.cacheData[a].isEmpty){n.next=14;break}return n.next=11,t.memoryUtils.readFromCache(r);case 11:return n.abrupt("return",n.sent);case 14:if(!t.cacheData[a].valid){n.next=22;break}return n.next=17,t.memoryUtils.readFromRam(r,e,i);case 17:return n.next=19,t.memoryUtils.readFromCache(r);case 19:return n.abrupt("return",n.sent);case 22:return o=t.memoryUtils.getRamAddressFromCache(t.cacheData[a].tag,r,t.cacheAddressBits),n.next=25,t.memoryUtils.writeToRam(r,o);case 25:return n.next=27,et(t.times.connectorFade/2);case 27:return n.next=29,t.memoryUtils.readFromRam(r,e,i);case 29:return n.next=31,t.memoryUtils.readFromCache(r);case 31:return n.abrupt("return",n.sent);case 32:case"end":return n.stop()}}),n)})))()},Flush:function(){for(var e=0;e<this.cacheData.length;e++){var t=this.memoryUtils.getRamAddressFromCache(this.cacheData[e].tag,e,this.cacheAddressBits-2);this.ramData[t]=Object(Fe["a"])(this.cacheData[e].data),this.cacheData[e]=new Xe}},Initialize:function(){this.ramData=Array(this.memorySize.ram);for(var e=0;e<this.memorySize.ram;e++)this.ramData[e]=[0,0,0,0];this.cacheData=Array(this.memorySize.cache);for(var t=0;t<this.memorySize.cache;t++)this.cacheData[t]=new Xe;this.memoryUtils=new Ke(this.ramData,this.cacheData,this.ramModel,this.cacheModel,this.connectorCpuCache,this.connectorCacheMem,this)},SwitchValidBit:function(e){this.cacheData[e].switchValid()},RegisterConnector:function(e,t){0==e?this.connectorCpuCache=t:1==e&&(this.connectorCacheMem=t)},RegisterRam:function(e){this.ramModel=e},RegisterCache:function(e){this.cacheModel=e}}};const nt=y()(tt,[["render",Ie]]);var rt=nt,at={class:"vertical-container"},it={class:"vertical-container"},ot={class:"vertical-container"};function ct(e,t,n,a,i,o){var c=Object(r["resolveComponent"])("processor-model"),s=Object(r["resolveComponent"])("connector"),l=Object(r["resolveComponent"])("cache-model"),u=Object(r["resolveComponent"])("ram-model");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createVNode"])(c,{instruction:n.instruction,instuctionPointer:n.instructionPointer,accumulator:n.accumulator,addressPointer:n.addressPointer,onRegisterRegs:t[0]||(t[0]=function(t){return e.$emit("RegisterRegs",t)})},null,8,["instruction","instuctionPointer","accumulator","addressPointer"]),Object(r["createElementVNode"])("div",at,[Object(r["createVNode"])(s,{id:0,width:3.5,onRegisterConnector:o.RegisterConnector},null,8,["width","onRegisterConnector"]),Object(r["createVNode"])(s,{id:2,width:3.5,onRegisterConnector:o.RegisterConnector},null,8,["width","onRegisterConnector"])]),Object(r["createElementVNode"])("div",it,[Object(r["createVNode"])(l,{id:0,data:i.cacheData[0],tagLength:o.tagLength,onSwitchValidBit:o.SwitchValidBit,onRegisterCache:o.RegisterCache},null,8,["data","tagLength","onSwitchValidBit","onRegisterCache"]),Object(r["createVNode"])(l,{id:1,data:i.cacheData[1],tagLength:o.tagLength,onSwitchValidBit:o.SwitchValidBit,onRegisterCache:o.RegisterCache},null,8,["data","tagLength","onSwitchValidBit","onRegisterCache"])]),Object(r["createElementVNode"])("div",ot,[Object(r["createVNode"])(s,{id:1,width:3.5,onRegisterConnector:o.RegisterConnector},null,8,["width","onRegisterConnector"]),Object(r["createVNode"])(s,{id:3,width:3.5,onRegisterConnector:o.RegisterConnector},null,8,["width","onRegisterConnector"])]),Object(r["createVNode"])(u,{data:i.ramData,onRegisterRam:o.RegisterRam},null,8,["data","onRegisterRam"])],64)}var st={name:"TwoWayCacheMemory",components:{ProcessorModel:Ce,CacheModel:Qe,RamModel:xe,Connector:Le},emits:["RegisterMemory","RegisterRegs"],props:{instruction:{type:String},instructionPointer:{type:Number},accumulator:{type:Number},addressPointer:{type:Number}},computed:{tagLength:function(){return Math.floor(Math.log2(this.ramDataLength+1))-Math.floor(Math.log2(this.cacheDataLength+1))},cacheAddressBits:function(){return Math.floor(Math.log2(this.cacheDataLength+1))},ramDataLength:function(){return 4*this.ramData.length},cacheDataLength:function(){return 4*this.cacheData[0].length}},data:function(){return{ramData:[],cacheData:[[],[]],connectorCpuCache:[],connectorCacheMem:[],cacheModel:[],ramModel:{highlight:null,highlightTag:null},memoryUtils:null}},created:function(){this.$emit("RegisterMemory",{write:this.Write,read:this.Read,flush:this.Flush,initialize:this.Initialize}),this.Initialize()},methods:{Write:function(e,t){var n=this;return Object(m["a"])(regeneratorRuntime.mark((function r(){var a,i,o,c,s,l,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!(e>n.ramDataLength||e<0)){r.next=2;break}throw RangeError("Invalid memory address (0x".concat(e.toString(16).toUpperCase(),")."));case 2:a=e&(1<<n.cacheAddressBits)-1,i=a>>2,o=e>>n.cacheAddressBits,c=0;case 6:if(!(c<n.cacheData.length)){r.next=17;break}return n.cycleCounter.value+=n.cycleCosts.cacheCheck,r.next=10,n.cacheModel[c].highlightTag(i,Math.min(n.times.highlightFade/2,500));case 10:if(n.cacheData[c][i].tag!=o||n.cacheData[c][i].isEmpty){r.next=14;break}return r.next=13,n.memoryUtils.writeToCache(a,o,t,c);case 13:return r.abrupt("return");case 14:c++,r.next=6;break;case 17:s=null,l=0;case 19:if(!(l<n.cacheData.length)){r.next=26;break}if(!n.cacheData[l][i].isEmpty){r.next=23;break}return s=l,r.abrupt("break",26);case 23:l++,r.next=19;break;case 26:if(null==s&&(s=Math.floor(Math.random()*n.cacheData.length)),!n.cacheData[s][i].valid){r.next=34;break}return r.next=30,n.memoryUtils.readFromRam(a,e,o,s);case 30:return r.next=32,n.memoryUtils.writeToCache(a,o,t,s);case 32:r.next=43;break;case 34:return u=n.memoryUtils.getRamAddressFromCache(n.cacheData[s][i].tag,a,n.cacheAddressBits),r.next=37,n.memoryUtils.writeToRam(a,u,s);case 37:return r.next=39,et(n.times.connectorFade/2);case 39:return r.next=41,n.memoryUtils.readFromRam(a,e,o,s);case 41:return r.next=43,n.memoryUtils.writeToCache(a,o,t,s);case 43:case"end":return r.stop()}}),r)})))()},Read:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var r,a,i,o,c,s,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(e>t.ramDataLength||e<0)){n.next=2;break}throw RangeError("Invalid memory address (0x".concat(e.toString(16).toUpperCase(),")."));case 2:r=e&(1<<t.cacheAddressBits)-1,a=r>>2,i=e>>t.cacheAddressBits,o=0;case 6:if(!(o<t.cacheData.length)){n.next=17;break}return t.cycleCounter.value+=t.cycleCosts.cacheCheck,n.next=10,t.cacheModel[o].highlightTag(a,Math.min(t.times.highlightFade/2,500));case 10:if(t.cacheData[o][a].tag!=i||t.cacheData[o][a].isEmpty){n.next=14;break}return n.next=13,t.memoryUtils.readFromCache(r,o);case 13:return n.abrupt("return",n.sent);case 14:o++,n.next=6;break;case 17:c=null,s=0;case 19:if(!(s<t.cacheData.length)){n.next=26;break}if(!t.cacheData[s][a].isEmpty){n.next=23;break}return c=s,n.abrupt("break",26);case 23:s++,n.next=19;break;case 26:if(null==c&&(c=Math.floor(Math.random()*t.cacheData.length)),!t.cacheData[c][a].valid){n.next=35;break}return n.next=30,t.memoryUtils.readFromRam(r,e,i,c);case 30:return n.next=32,t.memoryUtils.readFromCache(r,c);case 32:return n.abrupt("return",n.sent);case 35:return l=t.memoryUtils.getRamAddressFromCache(t.cacheData[c][a].tag,r,t.cacheAddressBits),n.next=38,t.memoryUtils.writeToRam(r,l,c);case 38:return n.next=40,et(t.times.connectorFade/2);case 40:return n.next=42,t.memoryUtils.readFromRam(r,e,i,c);case 42:return n.next=44,t.memoryUtils.readFromCache(r,c);case 44:return n.abrupt("return",n.sent);case 45:case"end":return n.stop()}}),n)})))()},Flush:function(){for(var e=0;e<this.cacheData.length;e++)for(var t=0;t<this.cacheData[e].length;t++){var n=this.memoryUtils.getRamAddressFromCache(this.cacheData[e][t].tag,t,this.cacheAddressBits-2);this.cacheData[e][t].isEmpty||(this.ramData[n]=Object(Fe["a"])(this.cacheData[e][t].data),this.cacheData[e][t]=new Xe)}},Initialize:function(){this.ramData=Array(this.memorySize.ram);for(var e=0;e<this.memorySize.ram;e++)this.ramData[e]=[0,0,0,0];this.cacheData[0]=Array(Math.floor(this.memorySize.cache/2)),this.cacheData[1]=Array(Math.floor(this.memorySize.cache/2));for(var t=0;t<2;t++)for(var n=0;n<this.memorySize.cache/2;n++)this.cacheData[t][n]=new Xe;this.memoryUtils=new Ke(this.ramData,this.cacheData,this.ramModel,this.cacheModel,this.connectorCpuCache,this.connectorCacheMem,this)},SwitchValidBit:function(e,t){this.cacheData[t][e].switchValid()},RegisterConnector:function(e,t){e%2==0?this.connectorCpuCache[Math.floor(e/2)]=t:e%2==1&&(this.connectorCacheMem[Math.floor(e/2)]=t)},RegisterRam:function(e){this.ramModel=e},RegisterCache:function(e,t){this.cacheModel[t]=e}}};const lt=y()(st,[["render",ct]]);var ut=lt;function ht(e,t,n,a,i,o){var c=Object(r["resolveComponent"])("processor-model"),s=Object(r["resolveComponent"])("connector"),l=Object(r["resolveComponent"])("cache-model"),u=Object(r["resolveComponent"])("ram-model");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createVNode"])(c,{instruction:n.instruction,instuctionPointer:n.instructionPointer,accumulator:n.accumulator,addressPointer:n.addressPointer,onRegisterRegs:t[0]||(t[0]=function(t){return e.$emit("RegisterRegs",t)})},null,8,["instruction","instuctionPointer","accumulator","addressPointer"]),Object(r["createVNode"])(s,{id:0,width:3.5,onRegisterConnector:o.RegisterConnector},null,8,["width","onRegisterConnector"]),Object(r["createVNode"])(l,{data:i.cacheData,tagLength:o.tagLength,onSwitchValidBit:o.SwitchValidBit,onRegisterCache:o.RegisterCache},null,8,["data","tagLength","onSwitchValidBit","onRegisterCache"]),Object(r["createVNode"])(s,{id:1,width:3.5,onRegisterConnector:o.RegisterConnector},null,8,["width","onRegisterConnector"]),Object(r["createVNode"])(u,{data:i.ramData,onRegisterRam:o.RegisterRam},null,8,["data","onRegisterRam"])],64)}var dt={name:"FullCacheMemory",components:{ProcessorModel:Ce,CacheModel:Qe,RamModel:xe,Connector:Le},emits:["RegisterMemory","RegisterRegs"],props:{instruction:{type:String},instructionPointer:{type:Number},accumulator:{type:Number},addressPointer:{type:Number}},computed:{tagLength:function(){return Math.floor(Math.log2(this.ramDataLength+1))},cacheAddressBits:function(){return Math.floor(Math.log2(this.cacheDataLength+1))},ramDataLength:function(){return 4*this.ramData.length},cacheDataLength:function(){return 4*this.cacheData.length}},data:function(){return{ramData:[],cacheData:[],connectorCpuCache:{fromCpuToMemory:null,fromMemoryToCpu:null},connectorCacheMem:{fromCpuToMemory:null,fromMemoryToCpu:null},ramModel:{highlight:null},cacheModel:{highlight:null,highlightTag:null},memoryUtils:null}},created:function(){this.$emit("RegisterMemory",{write:this.Write,read:this.Read,flush:this.Flush,initialize:this.Initialize}),this.Initialize()},methods:{Write:function(e,t){var n=this;return Object(m["a"])(regeneratorRuntime.mark((function r(){var a,i,o,c,s,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!(e>n.ramDataLength||e<0)){r.next=2;break}throw RangeError("Invalid memory address (0x".concat(e.toString(16).toUpperCase(),")."));case 2:a=-4&e,i=0;case 4:if(!(i<n.cacheData.length)){r.next=15;break}return n.cycleCounter.value+=n.cycleCosts.cacheCheck,r.next=8,n.cacheModel.highlightTag(i,Math.min(n.times.highlightFade/2,500));case 8:if(n.cacheData[i].tag!=a||n.cacheData[i].isEmpty){r.next=12;break}return r.next=11,n.memoryUtils.writeToCache(n.GetCacheAddress(i,e),a,t);case 11:return r.abrupt("return");case 12:i++,r.next=4;break;case 15:o=null,c=0;case 17:if(!(c<n.cacheData.length)){r.next=24;break}if(!n.cacheData[c].isEmpty){r.next=21;break}return o=c,r.abrupt("break",24);case 21:c++,r.next=17;break;case 24:if(null==o&&(o=Math.floor(Math.random()*n.cacheData.length)),s=n.GetCacheAddress(o,e),!n.cacheData[o].valid){r.next=33;break}return r.next=29,n.memoryUtils.readFromRam(s,e,a);case 29:return r.next=31,n.memoryUtils.writeToCache(s,a,t);case 31:r.next=42;break;case 33:return l=n.cacheData[o].tag,r.next=36,n.memoryUtils.writeToRam(s,l);case 36:return r.next=38,et(n.times.connectorFade/2);case 38:return r.next=40,n.memoryUtils.readFromRam(s,e,a);case 40:return r.next=42,n.memoryUtils.writeToCache(s,a,t);case 42:case"end":return r.stop()}}),r)})))()},Read:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var r,a,i,o,c,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(e>t.ramDataLength||e<0)){n.next=2;break}throw RangeError("Invalid memory address (0x".concat(e.toString(16).toUpperCase(),")."));case 2:r=-4&e,a=0;case 4:if(!(a<t.cacheData.length)){n.next=15;break}return t.cycleCounter.value+=t.cycleCosts.cacheCheck,n.next=8,t.cacheModel.highlightTag(a,Math.min(t.times.highlightFade/2,500));case 8:if(t.cacheData[a].tag!=r||t.cacheData[a].isEmpty){n.next=12;break}return n.next=11,t.memoryUtils.readFromCache(t.GetCacheAddress(a,e));case 11:return n.abrupt("return",n.sent);case 12:a++,n.next=4;break;case 15:i=null,o=0;case 17:if(!(o<t.cacheData.length)){n.next=24;break}if(!t.cacheData[o].isEmpty){n.next=21;break}return i=o,n.abrupt("break",24);case 21:o++,n.next=17;break;case 24:if(null==i&&(i=Math.floor(Math.random()*t.cacheData.length)),c=t.GetCacheAddress(i,e),!t.cacheData[i].valid){n.next=34;break}return n.next=29,t.memoryUtils.readFromRam(c,e,r);case 29:return n.next=31,t.memoryUtils.readFromCache(c);case 31:return n.abrupt("return",n.sent);case 34:return s=t.cacheData[i].tag,n.next=37,t.memoryUtils.writeToRam(c,s);case 37:return n.next=39,et(t.times.connectorFade/2);case 39:return n.next=41,t.memoryUtils.readFromRam(c,e,r);case 41:return n.next=43,t.memoryUtils.readFromCache(c);case 43:return n.abrupt("return",n.sent);case 44:case"end":return n.stop()}}),n)})))()},Flush:function(){for(var e=0;e<this.cacheData.length;e++){var t=this.cacheData[e].tag>>2;this.cacheData[e].isEmpty||(this.ramData[t]=Object(Fe["a"])(this.cacheData[e].data),this.cacheData[e]=new Xe)}},Initialize:function(){this.ramData=Array(this.memorySize.ram);for(var e=0;e<this.memorySize.ram;e++)this.ramData[e]=[0,0,0,0];this.cacheData=Array(this.memorySize.cache);for(var t=0;t<this.memorySize.cache;t++)this.cacheData[t]=new Xe;this.memoryUtils=new Ke(this.ramData,this.cacheData,this.ramModel,this.cacheModel,this.connectorCpuCache,this.connectorCacheMem,this)},SwitchValidBit:function(e){this.cacheData[e].switchValid()},GetCacheAddress:function(e,t){return e<<2|3&t},RegisterConnector:function(e,t){0==e?this.connectorCpuCache=t:1==e&&(this.connectorCacheMem=t)},RegisterRam:function(e){this.ramModel=e},RegisterCache:function(e){this.cacheModel=e}}};const mt=y()(dt,[["render",ht]]);var gt=mt,bt={name:"TheTabContainer",components:{TabButton:X,CycleCounter:oe,RamOnlyMemory:Ve,DirectCacheMemory:rt,TwoWayCacheMemory:ut,FullCacheMemory:gt},emits:["RegisterMemory","RegisterRegs"],props:{instruction:{type:String},instructionPointer:{type:Number},accumulator:{type:Number},addressPointer:{type:Number},hasStarted:{type:Boolean}},data:function(){return{currentTab:"RamOnlyMemory",activeTab:{RamOnlyMemory:!0,DirectCacheMemory:!1,TwoWayCacheMemory:!1,FullCacheMemory:!1}}},methods:{ChangeCurrentTab:function(e){this.activeTab[this.currentTab]=!1,this.currentTab=e,this.activeTab[this.currentTab]=!0,this.cycleCounter.value=0}}};n("0ef0");const pt=y()(bt,[["render",J]]);var ft=pt,vt=n("0197"),Ot=n.n(vt),Ct={class:"horizontal-container title-bar"},yt={class:"horizontal-container title-container"},Rt=Object(r["createElementVNode"])("img",{src:Ot.a,alt:"."},null,-1),At={class:"title"},Dt={class:"vertical-container additional-info"};function kt(e,t,n,a,i,o){var c=Object(r["resolveComponent"])("icon-button"),s=Object(r["resolveComponent"])("the-settings");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createElementVNode"])("div",Ct,[Object(r["createElementVNode"])("div",yt,[Rt,Object(r["createElementVNode"])("h1",At,Object(r["toDisplayString"])(n.title),1),Object(r["createElementVNode"])("div",Dt,[Object(r["createElementVNode"])("span",null,Object(r["toDisplayString"])(n.organisation),1),Object(r["createElementVNode"])("span",null,Object(r["toDisplayString"])(n.suborganisation),1),Object(r["createElementVNode"])("span",null,Object(r["toDisplayString"])(o.authorDate),1)]),Object(r["createVNode"])(c,{displayIcon:"fa-solid fa-gear",function:o.ToggleSettings,class:"settings-button"},null,8,["function"])])]),(Object(r["openBlock"])(),Object(r["createBlock"])(r["Teleport"],{to:"body"},[Object(r["createVNode"])(s,{show:i.showSettings,onClose:o.ToggleSettings},null,8,["show","onClose"])]))],64)}var St={key:0,class:"modal-mask"},jt={class:"modal-wrapper"},wt={class:"settings-container horizontal-container"},Et={class:"vertical-container"},xt={class:"settings-section"},Tt=Object(r["createElementVNode"])("h2",null,"Animation Settings",-1),Mt={class:"settings-section"},Nt=Object(r["createElementVNode"])("h2",null,"Memory Cost Settings",-1),Lt={class:"settings-section"},Pt=Object(r["createElementVNode"])("h2",null,"Memory Size Settings",-1);function Bt(e,t,n,a,i,o){var c=this,s=Object(r["resolveComponent"])("number-input"),l=Object(r["resolveComponent"])("icon-button");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Transition"],{name:"modal"},{default:Object(r["withCtx"])((function(){return[n.show?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",St,[Object(r["createElementVNode"])("div",jt,[Object(r["createElementVNode"])("div",wt,[Object(r["createElementVNode"])("div",Et,[Object(r["createElementVNode"])("div",xt,[Tt,Object(r["createVNode"])(s,{label:"Instruction Interval:",modelValue:c.times.instructionWait,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.times.instructionWait=e}),modelModifiers:{number:!0}},null,8,["modelValue"]),Object(r["createVNode"])(s,{label:"Connector Fill Time:",modelValue:c.times.connectorFill,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.times.connectorFill=e}),modelModifiers:{number:!0}},null,8,["modelValue"]),Object(r["createVNode"])(s,{label:"Connector Fade Time:",modelValue:c.times.connectorFade,"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.times.connectorFade=e}),modelModifiers:{number:!0}},null,8,["modelValue"]),Object(r["createVNode"])(s,{label:"Highlight Fade Time:",modelValue:c.times.highlightFade,"onUpdate:modelValue":t[3]||(t[3]=function(e){return c.times.highlightFade=e}),modelModifiers:{number:!0}},null,8,["modelValue"])]),Object(r["createElementVNode"])("div",Mt,[Nt,Object(r["createVNode"])(s,{label:"Cache Check Cost:",modelValue:c.cycleCosts.cacheCheck,"onUpdate:modelValue":t[4]||(t[4]=function(e){return c.cycleCosts.cacheCheck=e}),modelModifiers:{number:!0}},null,8,["modelValue"]),Object(r["createVNode"])(s,{label:"Cache Access Cost:",modelValue:c.cycleCosts.cacheAccess,"onUpdate:modelValue":t[5]||(t[5]=function(e){return c.cycleCosts.cacheAccess=e}),modelModifiers:{number:!0}},null,8,["modelValue"]),Object(r["createVNode"])(s,{label:"RAM Access Cost:",modelValue:c.cycleCosts.ramAccess,"onUpdate:modelValue":t[6]||(t[6]=function(e){return c.cycleCosts.ramAccess=e}),modelModifiers:{number:!0}},null,8,["modelValue"])]),Object(r["createElementVNode"])("div",Lt,[Pt,Object(r["createVNode"])(s,{label:"RAM Size:",modelValue:c.memorySize.ram,"onUpdate:modelValue":t[7]||(t[7]=function(e){return c.memorySize.ram=e}),modelModifiers:{number:!0}},null,8,["modelValue"]),Object(r["createVNode"])(s,{label:"Cache Size:",modelValue:c.memorySize.cache,"onUpdate:modelValue":t[8]||(t[8]=function(e){return c.memorySize.cache=e}),modelModifiers:{number:!0}},null,8,["modelValue"])])]),Object(r["createVNode"])(l,{displayIcon:"fa-solid fa-xmark",function:o.CloseSetting,class:"close-button"},null,8,["function"])])])])):Object(r["createCommentVNode"])("",!0)]})),_:1})}var Vt={class:"number-input horizontal-container"},It=["value"];function Ft(e,t,n,a,i,o){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Vt,[Object(r["createElementVNode"])("span",null,Object(r["toDisplayString"])(n.label),1),Object(r["createElementVNode"])("input",{value:n.modelValue,onInput:t[0]||(t[0]=function(t){return e.$emit("update:modelValue",Number(t.target.value))})},null,40,It)])}var Ht={name:"NumberInput",props:{label:{type:String,required:!0},modelValue:{type:Number,required:!0}}};n("c769");const Ut=y()(Ht,[["render",Ft]]);var zt=Ut,_t={name:"TheSettings",components:{IconButton:A,NumberInput:zt},props:{show:{type:Boolean,required:!0}},methods:{CloseSetting:function(){this.$emit("close")}}};n("d6d1");const Gt=y()(_t,[["render",Bt]]);var Wt=Gt,Zt={name:"TheTitle",components:{IconButton:A,TheSettings:Wt},emits:["UpdateSettings"],props:{title:{type:String,required:!0},author:{type:String},organisation:{type:String},suborganisation:{type:String},date:{type:String}},computed:{authorDate:function(){return this.author+", "+this.date}},data:function(){return{showSettings:!1}},methods:{ToggleSettings:function(){this.showSettings&&this.$emit("UpdateSettings"),this.showSettings=!this.showSettings}}};n("9e52");const $t=y()(Zt,[["render",kt]]);var Jt=$t,qt=function e(t){Object(w["a"])(this,e),this.name=t};Object(E["a"])(qt,"NextInstruction",new qt("NextInstruction")),Object(E["a"])(qt,"HaltExecution",new qt("HaltExecution")),Object(E["a"])(qt,"EndExecution",new qt("EndExecution")),Object(E["a"])(qt,"MoveToLabel",new qt("MoveToLabel")),Object(E["a"])(qt,"MoveToAddress",new qt("MoveToAddress"));var Qt=function(){function e(t,n,r,a,i){Object(w["a"])(this,e),this.memory=t,this.acc=n,this.ap=r,this.regs=a,this.cycleCounter=i}return Object(Ye["a"])(e,[{key:"execute",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=t.instruction,e.next=e.t0===x.HALT.name?3:e.t0===x.NEGATE.name?5:e.t0===x.ACCDEC.name?7:e.t0===x.ACCINC.name?9:e.t0===x.NOP.name?11:e.t0===x.OUTP.name?13:e.t0===x.INP.name?15:e.t0===x.MLOAD.name?17:e.t0===x.DLOAD.name?19:e.t0===x.ILOAD.name?23:e.t0===x.DSTORE.name?27:e.t0===x.ISTORE.name?31:e.t0===x.BRANCH.name?35:e.t0===x.BRZERO.name?37:e.t0===x.BRPOS.name?39:e.t0===x.BRNEG.name?41:e.t0===x.MADD.name?43:e.t0===x.IJUMP.name?47:e.t0===x.LABEL.name?51:e.t0===x.FLUSH.name?53:"END"===e.t0?55:57;break;case 3:return n=this._executeHalt(),e.abrupt("break",58);case 5:return n=this._executeNegate(),e.abrupt("break",58);case 7:return n=this._executeAccdec(),e.abrupt("break",58);case 9:return n=this._executeAccinc(),e.abrupt("break",58);case 11:return n=this._executeNop(),e.abrupt("break",58);case 13:return n=this._executeOutp(),e.abrupt("break",58);case 15:return n=this._executeInp(),e.abrupt("break",58);case 17:return n=this._executeMload(t.value),e.abrupt("break",58);case 19:return e.next=21,this._executeDload(t.address);case 21:return n=e.sent,e.abrupt("break",58);case 23:return e.next=25,this._executeIload(t.address);case 25:return n=e.sent,e.abrupt("break",58);case 27:return e.next=29,this._executeDstore(t.address);case 29:return n=e.sent,e.abrupt("break",58);case 31:return e.next=33,this._executeIstore(t.address);case 33:return n=e.sent,e.abrupt("break",58);case 35:return n=this._executeBranch(t.label),e.abrupt("break",58);case 37:return n=this._executeBrzero(t.label),e.abrupt("break",58);case 39:return n=this._executeBrpos(t.label),e.abrupt("break",58);case 41:return n=this._executeBrneg(t.label),e.abrupt("break",58);case 43:return e.next=45,this._executeMadd(t.address);case 45:return n=e.sent,e.abrupt("break",58);case 47:return e.next=49,this._executeIjump(t.address);case 49:return n=e.sent,e.abrupt("break",58);case 51:return n=this._executeLabel(),e.abrupt("break",58);case 53:return n=this._executeFlush(),e.abrupt("break",58);case 55:return n=this._endExecution(),e.abrupt("break",58);case 57:throw Error("Unknown instruction ".concat(t.instruction,"."));case 58:return e.abrupt("return",n);case 59:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_executeHalt",value:function(){return this.cycleCounter.value+=1,{result:qt.HaltExecution}}},{key:"_executeNegate",value:function(){return this.cycleCounter.value+=1,this.acc.value=-this.acc.value,this.regs.highlightACC(),{result:qt.NextInstruction}}},{key:"_executeAccdec",value:function(){return this.cycleCounter.value+=1,this.acc.value-=1,this.regs.highlightACC(),{result:qt.NextInstruction}}},{key:"_executeAccinc",value:function(){return this.cycleCounter.value+=1,this.acc.value+=1,this.regs.highlightACC(),{result:qt.NextInstruction}}},{key:"_executeNop",value:function(){return this.cycleCounter.value+=1,{result:qt.NextInstruction}}},{key:"_executeOutp",value:function(){return this.cycleCounter.value+=1,{result:qt.NextInstruction}}},{key:"_executeInp",value:function(){return this.cycleCounter.value+=1,this.acc.value=Math.floor(1024*Math.random()),this.regs.highlightACC(),{result:qt.NextInstruction}}},{key:"_executeMload",value:function(e){return this.cycleCounter.value+=1,this.acc.value=e,this.regs.highlightACC(),{result:qt.NextInstruction}}},{key:"_executeDload",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.cycleCounter.value+=1,this.ap.value=t,this.regs.highlightAP(),e.next=5,this.memory.read(t);case 5:return this.acc.value=e.sent,this.regs.highlightACC(),e.abrupt("return",{result:qt.NextInstruction});case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_executeIload",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.cycleCounter.value+=1,this.ap.value=t,this.regs.highlightAP(),e.next=5,this.memory.read(t);case 5:return this.ap.value=e.sent,this.regs.highlightAP(),this.cycleCounter.value+=1,e.next=10,this.memory.read(this.ap.value);case 10:return this.acc.value=e.sent,this.regs.highlightACC(),e.abrupt("return",{result:qt.NextInstruction});case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_executeDstore",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.cycleCounter.value+=1,this.ap.value=t,this.regs.highlightAP(),e.next=5,this.memory.write(t,this.acc.value);case 5:return e.abrupt("return",{result:qt.NextInstruction});case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_executeIstore",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.cycleCounter.value+=1,this.ap.value=t,this.regs.highlightAP(),e.next=5,this.memory.read(t);case 5:return this.ap.value=e.sent,this.regs.highlightAP(),this.cycleCounter.value+=1,e.next=10,this.memory.write(this.ap.value,this.acc.value);case 10:return e.abrupt("return",{result:qt.NextInstruction});case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_executeBranch",value:function(e){return this.cycleCounter.value+=1,{result:qt.MoveToLabel,label:e}}},{key:"_executeBrzero",value:function(e){return this.cycleCounter.value+=1,0==this.acc.value?(this.cycleCounter.value+=1,{result:qt.MoveToLabel,label:e}):{result:qt.NextInstruction}}},{key:"_executeBrpos",value:function(e){return this.cycleCounter.value+=1,this.acc.value>0?(this.cycleCounter.value+=1,{result:qt.MoveToLabel,label:e}):{result:qt.NextInstruction}}},{key:"_executeBrneg",value:function(e){return this.cycleCounter.value+=1,this.acc.value<0?(this.cycleCounter.value+=1,{result:qt.MoveToLabel,label:e}):{result:qt.NextInstruction}}},{key:"_executeMadd",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.cycleCounter.value+=1,this.ap.value=t,this.regs.highlightAP(),e.t0=this.acc.value,e.next=6,this.memory.read(t);case 6:return this.acc.value=e.t0+=e.sent,this.regs.highlightACC(),e.abrupt("return",{result:qt.NextInstruction});case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_executeIjump",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.cycleCounter.value+=1,this.ap.value=t,this.regs.highlightAP(),e.next=5,this.memory.read(t);case 5:return n=e.sent,e.abrupt("return",{result:qt.MoveToAddress,address:n});case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_executeLabel",value:function(){return{result:qt.NextInstruction}}},{key:"_executeFlush",value:function(){return this.cycleCounter.value=0,this.memory.flush(),{result:qt.NextInstruction}}},{key:"_endExecution",value:function(){return this.memory.flush(),{result:qt.EndExecution}}}]),e}(),Yt={FORWARD:"fastForward",START:"start",STOP:"stop",PAUSE:"pause",STEP:"step"},Kt={STOPPED:"notStarted",STARTED:"started",HALTED:"halted"},Xt={name:"TheLayout",components:{IconButton:A,CodeEditor:W,TheTabContainer:ft,TheTitle:Jt,vSelect:b.a},computed:{hasStarted:function(){return this.currentState!=Kt.STOPPED}},data:function(){return{controlButtons:{fastForward:{display:"fa-solid fa-forward",function:this.FastForward,disabled:!1,visible:!1},start:{display:"fa-solid fa-play",function:this.StartProgram,disabled:!1,visible:!0},stop:{display:"fa-solid fa-stop",function:this.StopProgram,disabled:!0,visible:!0},pause:{display:"fa-solid fa-pause",function:this.PauseProgram,disabled:!0,visible:!0},step:{display:"fa-solid fa-forward-step",function:this.ExecuteInstruction,disabled:!1,visible:!0}},compiler:{compile:null,getInstruction:null,getLabel:null,getNextLine:null,highlightLine:null},memory:{write:null,read:null,flush:null,initialize:null},regs:{highlightACC:null,highlightAP:null},cpu:null,currentState:Kt.STOPPED,instructionPointer:0,accumulator:{value:0},addressPointer:{value:0},instruction:{instruction:"INST",line:0},programs:p,selected:p[0].label,selectedProgram:p[0].code}},methods:{SelectProgram:function(e){console.log(e),this.selectedProgram=e.code},StartProgram:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("Start program"),e.currentState!=Kt.STOPPED){t.next=6;break}if(n=e.CompileProgram(),!n){t.next=6;break}return e.ChangeSimulationState(Kt.STOPPED),t.abrupt("return");case 6:e.ChangeSimulationState(Kt.STARTED);case 7:if(e.currentState!=Kt.STARTED){t.next=15;break}return t.next=10,e.ExecuteInstruction();case 10:if(!e.animations.enable){t.next=13;break}return t.next=13,et(e.times.instructionWait);case 13:t.next=7;break;case 15:case"end":return t.stop()}}),t)})))()},StopProgram:function(){console.log("Stop program"),this.ChangeSimulationState(Kt.STOPPED),this.Initialize()},PauseProgram:function(){console.log("Pause program"),this.ChangeSimulationState(Kt.HALTED)},ExecuteInstruction:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.currentState!=Kt.STOPPED){t.next=6;break}if(n=e.CompileProgram(),!n){t.next=5;break}return e.ChangeSimulationState(Kt.STOPPED),t.abrupt("return");case 5:e.ChangeSimulationState(Kt.HALTED);case 6:return t.prev=6,e.currentState==Kt.HALTED&&(e.controlButtons[Yt.STEP].disabled=!0),e.instruction=e.compiler.getInstruction(e.instructionPointer),t.next=11,e.cpu.execute(e.instruction);case 11:r=t.sent,console.log(e.instruction),t.t0=r.result,t.next=t.t0===qt.NextInstruction?16:t.t0===qt.MoveToLabel?18:t.t0===qt.MoveToAddress?20:t.t0===qt.HaltExecution?22:t.t0===qt.EndExecution?26:30;break;case 16:return e.instructionPointer++,t.abrupt("break",31);case 18:return e.instructionPointer=e.compiler.getLabel(r.label)+1,t.abrupt("break",31);case 20:return e.instructionPointer=r.address,t.abrupt("break",31);case 22:return console.log("Program stopped"),e.instructionPointer++,e.ChangeSimulationState(Kt.HALTED),t.abrupt("break",31);case 26:return console.log("Program ended"),e.compiler.highlightLine(-1),e.ChangeSimulationState(Kt.STOPPED),t.abrupt("return");case 30:throw Error("Unknown instruction result.");case 31:e.compiler.highlightLine(e.compiler.getNextLine(e.instructionPointer)),e.currentState==Kt.HALTED&&(e.controlButtons[Yt.STEP].disabled=!1),t.next=40;break;case 35:t.prev=35,t.t1=t["catch"](6),e.$notify({title:"Execution Error",text:t.t1.message,type:"error"}),console.error(t.t1),e.ChangeSimulationState(Kt.STOPPED);case 40:case"end":return t.stop()}}),t,null,[[6,35]])})))()},FastForward:function(){this.animations.enable=!1},CompileProgram:function(){try{this.compiler.compile()}catch(e){return this.$notify({title:"Compilation Error",text:e.message,type:"error"}),console.error(e),!0}return this.Initialize(),this.cpu=new Qt(this.memory,this.accumulator,this.addressPointer,this.regs,this.cycleCounter),this.compiler.highlightLine(this.compiler.getNextLine(this.instructionPointer)),!1},RegisterCompiler:function(e){this.compiler=e},RegisterMemory:function(e){this.memory=e},RegisterRegs:function(e){this.regs=e},ChangeSimulationState:function(e){switch(e){case Kt.STOPPED:this.controlButtons[Yt.START].disabled=!1,this.controlButtons[Yt.STOP].disabled=!0,this.controlButtons[Yt.PAUSE].disabled=!0,this.controlButtons[Yt.STEP].disabled=!1,this.controlButtons[Yt.START].visible=!0,this.controlButtons[Yt.FORWARD].visible=!1;break;case Kt.STARTED:this.controlButtons[Yt.START].disabled=!0,this.controlButtons[Yt.STOP].disabled=!1,this.controlButtons[Yt.PAUSE].disabled=!1,this.controlButtons[Yt.STEP].disabled=!0,this.controlButtons[Yt.START].visible=!1,this.controlButtons[Yt.FORWARD].visible=!0;break;case Kt.HALTED:this.controlButtons[Yt.START].disabled=!1,this.controlButtons[Yt.STOP].disabled=!1,this.controlButtons[Yt.PAUSE].disabled=!0,this.controlButtons[Yt.STEP].disabled=!1,this.controlButtons[Yt.START].visible=!0,this.controlButtons[Yt.FORWARD].visible=!1;break}this.animations.enable=!0,this.currentState=e},Initialize:function(){this.instructionPointer=0,this.accumulator={value:0},this.addressPointer={value:0},this.instruction={instruction:"INST"},this.cycleCounter.value=0,this.compiler.highlightLine(-1),this.memory.initialize()}}};n("4af3");const en=y()(Xt,[["render",d]]);var tn=en,nn={name:"App",components:{TheProcessor:tn}};n("9536");const rn=y()(nn,[["render",i]]);var an=rn,on=Object(r["createApp"])(an);on.config.globalProperties.animations={enable:!0},on.config.globalProperties.times={instructionWait:500,connectorFill:500,connectorFade:1e3,highlightFade:1e3},on.config.globalProperties.cycleCounter={value:0},on.config.globalProperties.cycleCosts={cacheCheck:2,cacheAccess:10,ramAccess:200},on.config.globalProperties.memorySize={cache:4,ram:16},on.config.globalProperties.colors={secondaryColor:"#8b161c",secondaryColorLight:"#cc1717",fontColor:"#D6D6D6",infoColor:"#3f60bb"},on.use(a["a"]).mount("#app")},"6da3":function(e,t,n){},7413:function(e,t,n){},7834:function(e,t,n){"use strict";n("3543")},"7b1c":function(e,t,n){},"7cf8":function(e,t,n){},"80a4":function(e,t,n){},9536:function(e,t,n){"use strict";n("bb31")},"972f":function(e,t,n){"use strict";n("c1b5")},"9e52":function(e,t,n){"use strict";n("a9c4")},a9c4:function(e,t,n){},ad06:function(e,t,n){},b0ff:function(e,t,n){"use strict";n("ad06")},ba61:function(e,t,n){},bb31:function(e,t,n){},c1b5:function(e,t,n){},c769:function(e,t,n){"use strict";n("36b0")},d6d1:function(e,t,n){"use strict";n("426b")},dca8:function(e,t,n){"use strict";n("7cf8")},e2bb:function(e,t,n){"use strict";n("1d58")},e5d3:function(e,t,n){"use strict";n("7b1c")},f8dc:function(e,t,n){"use strict";n("ba61")}});
//# sourceMappingURL=app.bd054500.js.map