(function(e){function t(t){for(var r,s,o=t[0],u=t[1],i=t[2],b=0,m=[];b<o.length;b++)s=o[b],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&m.push(a[s][0]),a[s]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(m.length)m.shift()();return c.push.apply(c,i||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,o=1;o<n.length;o++){var u=n[o];0!==a[u]&&(r=!1)}r&&(c.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},c=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var i=0;i<o.length;i++)t(o[i]);var l=u;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"107d":function(e,t,n){"use strict";n("7c78")},"3a5b":function(e,t,n){"use strict";n("44fc")},"44fc":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function a(e,t,n,a,c,s){var o=Object(r["m"])("the-processor");return Object(r["j"])(),Object(r["c"])(o,{style:{width:"100%",height:"100%"}})}var c={class:"horizontal-container"},s={class:"vertical-container control-container"},o={class:"horizontal-container button-container"},u={class:"program-container"},i={class:"vertical-container model-container"},l={class:"vertical-container"};function b(e,t,n,a,b,m){var d=Object(r["m"])("common-button"),f=Object(r["m"])("code-editor"),O=Object(r["m"])("processor-model"),h=Object(r["m"])("ram-only-memory");return Object(r["j"])(),Object(r["d"])("div",c,[Object(r["e"])("div",s,[Object(r["e"])("div",o,[(Object(r["j"])(!0),Object(r["d"])(r["a"],null,Object(r["l"])(b.commonButtons,(function(e){return Object(r["j"])(),Object(r["c"])(d,{key:e,displayValue:e.display,function:e.function,class:"control-button"},null,8,["displayValue","function"])})),128))]),Object(r["e"])("div",u,[Object(r["f"])(f,{ref:"codeEditor"},null,512)])]),Object(r["e"])("div",i,[Object(r["f"])(O),Object(r["f"])(h,{ref:"ramOnlyMemory"},null,512)]),Object(r["e"])("div",l,[Object(r["e"])("div",{class:"test-button",onClick:t[0]||(t[0]=function(t){return e.$refs.codeEditor.ValidateProgram()})}," Validate "),Object(r["e"])("div",{class:"test-button",onClick:t[1]||(t[1]=function(t){return e.$refs.codeEditor.GetInstruction(5)})}," Get instruction "),Object(r["e"])("div",{class:"test-button",onClick:t[2]||(t[2]=function(t){return e.$refs.codeEditor.GetLabel("test")})}," Get label ")])])}function m(e,t,n,a,c,s){return Object(r["j"])(),Object(r["d"])("div",{class:"common-button",onClick:t[0]||(t[0]=function(){return s.Click&&s.Click.apply(s,arguments)})},[Object(r["e"])("span",null,Object(r["n"])(n.displayValue),1)])}var d={name:"CommonButton",props:{displayValue:{type:String,required:!0},function:{type:Function,required:!0}},methods:{Click:function(){this.function()}}},f=(n("107d"),n("6b0d")),O=n.n(f);const h=O()(d,[["render",m]]);var p=h;function v(e,t,n,a,c,s){var o=Object(r["m"])("prism-editor");return Object(r["j"])(),Object(r["c"])(o,{class:"code-editor",modelValue:c.code,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.code=e}),highlight:s.HighlightCode,"line-numbers":""},null,8,["modelValue","highlight"])}var j=n("e57a"),k=(n("cabf"),n("8c7a")),y=n.n(k),I=(n("5792"),n("ac1f"),n("1276"),n("b0c0"),n("2ca0"),n("159b"),n("b64b"),n("d4ec")),g=n("ade3"),A=function e(t){Object(I["a"])(this,e),this.name=t};Object(g["a"])(A,"HALT",new A("HALT")),Object(g["a"])(A,"NEGATE",new A("NEGATE")),Object(g["a"])(A,"ACCDEC",new A("ACCDEC")),Object(g["a"])(A,"ACCINC",new A("ACCINC")),Object(g["a"])(A,"NOP",new A("NOP")),Object(g["a"])(A,"OUTP",new A("OUTP")),Object(g["a"])(A,"INP",new A("INP")),Object(g["a"])(A,"MLOAD",new A("MLOAD")),Object(g["a"])(A,"DLOAD",new A("DLOAD")),Object(g["a"])(A,"ILOAD",new A("ILOAD")),Object(g["a"])(A,"DSTORE",new A("DSTORE")),Object(g["a"])(A,"ISTORE",new A("ISTORE")),Object(g["a"])(A,"BRANCH",new A("BRANCH")),Object(g["a"])(A,"BRZERO",new A("BRZERO")),Object(g["a"])(A,"BRPOS",new A("BRPOS")),Object(g["a"])(A,"BRNEG",new A("BRNEG")),Object(g["a"])(A,"MADD",new A("MADD")),Object(g["a"])(A,"IJUMP",new A("IJUMP")),Object(g["a"])(A,"LABEL",new A("LABEL"));var x=10,D=11,E=0;function C(e,t){var n={result:0},r=e.split(/\s+/);E=0;while(r.length>0)if(n=P(r,t),n.result)break;return n}function P(e,t){var n={result:0},r=e.shift();switch(E++,r.toUpperCase()){case A.HALT.name:n=L(A.HALT.name,t);break;case A.NEGATE.name:n=L(A.NEGATE.name,t);break;case A.ACCDEC.name:n=L(A.ACCDEC.name,t);break;case A.ACCINC.name:n=L(A.ACCINC.name,t);break;case A.NOP.name:n=L(A.NOP.name,t);break;case A.OUTP.name:n=R(A.OUTP.name,e.shift(),t);break;case A.INP.name:n=R(A.INP.name,e.shift(),t);break;case A.MLOAD.name:n=N(A.MLOAD.name,e.shift(),t);break;case A.DLOAD.name:n=R(A.DLOAD.name,e.shift(),t);break;case A.ILOAD.name:n=R(A.ILOAD.name,e.shift(),t);break;case A.DSTORE.name:n=R(A.DSTORE.name,e.shift(),t);break;case A.ISTORE.name:n=R(A.ISTORE.name,e.shift(),t);break;case A.BRANCH.name:n=B(A.BRANCH.name,e.shift(),t);break;case A.BRZERO.name:n=B(A.BRZERO.name,e.shift(),t);break;case A.BRPOS.name:n=B(A.BRPOS.name,e.shift(),t);break;case A.BRNEG.name:n=B(A.BRNEG.name,e.shift(),t);break;case A.MADD.name:n=R(A.MADD.name,e.shift(),t);break;case A.IJUMP.name:n=R(A.IJUMP.name,e.shift(),t);break;case A.LABEL.name:n=B(A.LABEL.name,e.shift(),t);break;default:n={result:x,instructionNumber:E,message:"Unknown instruction"};break}return n}function L(e,t){return t.push({instruction:e}),{result:0}}function R(e,t,n){var r={result:0};return _(t)?(t=parseInt(t.substring(1)),n.push({instruction:e,address:t})):r={result:D,instructionNumber:E,message:"Incorrect parameter format"},r}function N(e,t,n){var r={result:0};return S(t)?(t=parseInt(t),n.push({instruction:e,value:t})):r={result:D,instructionNumber:E,message:"Incorrect parameter format"},r}function B(e,t,n){var r={result:0};return w(t)?r={result:D,instructionNumber:E,message:"Parameter must not be keyword"}:n.push({instruction:e,label:t}),r}function _(e){var t=e.startsWith("@");return t&&(e=e.substring(1),t=S(e)),t}function w(e){var t=!1;return Object.keys(A).forEach((function(n){n===e.toUpperCase()&&(t=!0)})),t}function S(e){return/^\d+$/.test(e)}var T={name:"CodeEditor",components:{PrismEditor:j["a"]},data:function(){return{code:"",instructionList:[],labelDict:{}}},methods:{HighlightCode:function(e){return y.a.languages.bp22={operator:/\b(?:HALT|NEGATE|ACCDEC|ACCINC|NOP|OUTP|INP|MLOAD|DLOAD|ILOAD|DSTORE|ISTORE|BRANCH|BRZERO|BRPOS|BRNEG|MADD|IJUMP|LABEL)\b/i},y.a.highlight(e,y.a.languages.bp22)},ValidateProgram:function(){this.instructionList=[],this.labelDict={};var e=C(this.code,this.instructionList);if(e.result)console.error("Error "+e.result+" on instruction "+e.instructionNumber+": "+e.message);else{for(var t in this.instructionList)"LABEL"==this.instructionList[t].instruction&&(this.labelDict[this.instructionList[t].label]=t);console.log(this.instructionList),console.log(this.labelDict)}},GetInstruction:function(e){return console.log(this.instructionList[e]),this.instructionList[e]},GetLabel:function(e){return console.log(this.labelDict[e]),this.labelDict[e]}}};n("7d8c");const M=O()(T,[["render",v]]);var U=M;function G(e,t,n,a,c,s){var o=Object(r["m"])("ram-model");return Object(r["j"])(),Object(r["c"])(o,{data:c.ramData},null,8,["data"])}n("d3b7"),n("25f0");var H={class:"ram"},V={class:"ram-address"},J={class:"ram-value"};function Z(e,t,n,a,c,s){return Object(r["j"])(),Object(r["d"])("table",H,[(Object(r["j"])(!0),Object(r["d"])(r["a"],null,Object(r["l"])(n.data.length,(function(e){return Object(r["j"])(),Object(r["d"])("tr",{key:e},[Object(r["e"])("td",V,Object(r["n"])("0x"+(e-1).toString(16).toUpperCase()),1),Object(r["e"])("td",J,Object(r["n"])(n.data[e-1]),1)])})),128))])}var z={name:"RamModel",props:{data:{type:Array,required:!0}}};n("597e");const $=O()(z,[["render",Z]]);var q=$,W={name:"RamOnlyMemory",components:{RamModel:q},data:function(){return{ramData:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}},methods:{Write:function(e,t){if(!(e<this.ramData.length))throw RangeError("Invalid memory address");this.ramData[e]=t},Read:function(e){if(e<this.ramData.length)return this.ramData[e];throw RangeError("Invalid memory address")}}};const F=O()(W,[["render",G]]);var K=F,Q={class:"vertical-container processor"},X=Object(r["e"])("div",null,"CPU",-1);function Y(e,t,n,a,c,s){return Object(r["j"])(),Object(r["d"])("div",Q,[X,Object(r["e"])("div",null,"[ "+Object(r["n"])(n.currentInstruction)+" ]",1)])}var ee={name:"ProcessorModel",props:{currentInstruction:{type:String,default:"NOP"}}};n("b3c9");const te=O()(ee,[["render",Y]]);var ne=te,re=n("bee2"),ae=20,ce=function(){function e(t,n){Object(I["a"])(this,e),this.memory=t,this.acc=n}return Object(re["a"])(e,[{key:"execute",value:function(e){var t={result:0,nextInstruction:!0};switch(e.instruction){case A.HALT.name:t=this._executeHalt();break;case A.NEGATE.name:t=this._executeNegate();break;case A.ACCDEC.name:t=this._executeAccdec();break;case A.ACCINC.name:t=this._executeAccinc();break;case A.NOP.name:t={result:0,nextInstruction:!0};break;case A.OUTP.name:t=this._executeOutp();break;case A.INP.name:t=this._executeInp();break;case A.MLOAD.name:t=this._executeMload(e.value);break;case A.DLOAD.name:t=this._executeDload(e.address);break;case A.ILOAD.name:t=this._executeIload(e.address);break;case A.DSTORE.name:t=this._executeDstore(e.address);break;case A.ISTORE.name:t=this._executeIstore(e.address);break;case A.BRANCH.name:t=this._executeBranch(e.label);break;case A.BRZERO.name:t=this._executeBrzero(e.label);break;case A.BRPOS.name:t=this._executeBrpos(e.label);break;case A.BRNEG.name:t=this._executeBrneg(e.label);break;case A.MADD.name:t=this._executeMadd(e.address);break;case A.IJUMP.name:t=this._executeIjump(e.address);break;case A.LABEL.name:t={result:0,nextInstruction:!0};break;default:t={result:ae,message:"Unknown instruction"};break}return t}},{key:"_executeHalt",value:function(){return{result:0,nextInstruction:!1}}},{key:"_executeNegate",value:function(){return this.acc.value=-this.acc.value,{result:0,nextInstruction:!0}}},{key:"_executeAccdec",value:function(){return this.acc.value-=1,{result:0,nextInstruction:!0}}},{key:"_executeAccinc",value:function(){return this.acc.value+=1,{result:0,nextInstruction:!0}}},{key:"_executeOutp",value:function(){return{result:0,nextInstruction:!0}}},{key:"_executeInp",value:function(){return{result:0,nextInstruction:!0}}},{key:"_executeMload",value:function(e){return this.acc.value=e,{result:0,nextInstruction:!0}}},{key:"_executeDload",value:function(e){return this.acc.value=this.memory.load(e),{result:0,nextInstruction:!0}}},{key:"_executeIload",value:function(e){var t=this.memory.load(e);return this.acc.value=this.memory.load(t),{result:0,nextInstruction:!0}}},{key:"_executeDstore",value:function(e){return this.memory.store(this.acc.value,e),{result:0,nextInstruction:!0}}},{key:"_executeIstore",value:function(e){var t=this.memory.load(e);return this.memory.store(this.acc.value,t),{result:0,nextInstruction:!0}}},{key:"_executeBranch",value:function(e){return{result:0,nextInstruction:e}}},{key:"_executeBrzero",value:function(e){return 0==this.acc.value?{result:0,nextInstruction:e}:{result:0,nextInstruction:!0}}},{key:"_executeBrpos",value:function(e){return this.acc.value>0?{result:0,nextInstruction:e}:{result:0,nextInstruction:!0}}},{key:"_executeBrneg",value:function(e){return this.acc.value<0?{result:0,nextInstruction:e}:{result:0,nextInstruction:!0}}},{key:"_executeMadd",value:function(e){return this.acc.value+=this.memory.load(e),{result:0,nextInstruction:!0}}},{key:"_executeIjump",value:function(e){var t=this.memory.label(e);return{result:0,nextInstruction:t}}}]),e}(),se={name:"TheLayout",components:{CommonButton:p,CodeEditor:U,RamOnlyMemory:K,ProcessorModel:ne},data:function(){return{commonButtons:[{display:"|>",function:this.StartProgram},{display:"|||",function:this.StopProgram},{display:"||",function:this.PauseProgram},{display:">",function:this.StepProgram}],processor:null,instructionPointer:0,accumulator:{value:0}}},created:function(){this.processor=new ce(null,this.accumulator)},methods:{StartProgram:function(){console.log("Start program")},StopProgram:function(){console.log("Stop program")},PauseProgram:function(){console.log("Pause program")},StepProgram:function(){console.log("Step in program")}}};n("e03b");const oe=O()(se,[["render",b]]);var ue=oe,ie={name:"App",components:{TheProcessor:ue}};n("3a5b");const le=O()(ie,[["render",a]]);var be=le,me=n("5502"),de=Object(me["a"])({state:{},mutations:{},actions:{},modules:{}});Object(r["b"])(be).use(de).mount("#app")},"597e":function(e,t,n){"use strict";n("c0cd")},"651c":function(e,t,n){},"7c78":function(e,t,n){},"7d8c":function(e,t,n){"use strict";n("bf4b")},b3c9:function(e,t,n){"use strict";n("ebef")},bf4b:function(e,t,n){},c0cd:function(e,t,n){},e03b:function(e,t,n){"use strict";n("651c")},ebef:function(e,t,n){}});
//# sourceMappingURL=app.8a1fbe6f.js.map